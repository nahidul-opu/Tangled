From 3fef1a85b54dac28bdc63dabc84b27be78021cc4 Mon Sep 17 00:00:00 2001
From: Maarten Coene <maartenc@apache.org>
Date: Fri, 25 Sep 2009 21:53:45 +0000
Subject: [PATCH] FIX: VstfpRepository.readResponse uses bad compare logic
 (IVY-1119) (thanks to Dave Brosius)

git-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@819038 13f79535-47bb-0310-9956-ffa450edef68
---
 CHANGES.txt                                                     | 2 ++
 .../apache/ivy/plugins/repository/vsftp/VsftpRepository.java    | 2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/CHANGES.txt b/CHANGES.txt
index c1101eec6..f62f524d4 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -20,6 +20,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br
 	Mikkel Bjerg
 	Jeffrey Blattman
 	Jim Bonanno
+    Dave Brosius
 	Matthieu Brouillard
 	Carlton Brown
 	Mirko Bulovic
@@ -91,6 +92,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br
 	
    trunk
 =====================================
+- FIX: VstfpRepository.readResponse uses bad compare logic (IVY-1119) (thanks to Dave Brosius)
 - FIX: URLResource does not properly support authentication (IVY-1106) (thanks to Heschi Kreinick)
 - FIX: Excessive hits to missing URLs uses up all ports on Windows (IVY-1105)
 - FIX: ivy parse exception when using <publications defaultconf> (IVY-1102)
diff --git a/src/java/org/apache/ivy/plugins/repository/vsftp/VsftpRepository.java b/src/java/org/apache/ivy/plugins/repository/vsftp/VsftpRepository.java
index 62e302ab7..b29a1b785 100644
--- a/src/java/org/apache/ivy/plugins/repository/vsftp/VsftpRepository.java
+++ b/src/java/org/apache/ivy/plugins/repository/vsftp/VsftpRepository.java
@@ -465,7 +465,7 @@ public void run() {
             }
             throw new IOException("connection timeout to " + getHost());
         } else {
-            if ("Not connected.".equals(response)) {
+            if ("Not connected.".equals(response.toString())) {
                 Message.info("vsftp connection to " + getHost() + " reset");
                 closeConnection();
                 throw new IOException("not connected to " + getHost());
