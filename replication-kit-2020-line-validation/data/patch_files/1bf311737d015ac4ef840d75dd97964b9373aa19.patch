From 1bf311737d015ac4ef840d75dd97964b9373aa19 Mon Sep 17 00:00:00 2001
From: Rory Winston <rwinston@apache.org>
Date: Thu, 5 Feb 2009 00:25:57 +0000
Subject: [PATCH] NET-250: Make L8 check the last check

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/net/branches/NET_2_0@740953 13f79535-47bb-0310-9956-ffa450edef68
---
 .../net/ftp/parser/DefaultFTPFileEntryParserFactory.java | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/src/main/java/org/apache/commons/net/ftp/parser/DefaultFTPFileEntryParserFactory.java b/src/main/java/org/apache/commons/net/ftp/parser/DefaultFTPFileEntryParserFactory.java
index 53f07b80e..a4195f8ec 100644
--- a/src/main/java/org/apache/commons/net/ftp/parser/DefaultFTPFileEntryParserFactory.java
+++ b/src/main/java/org/apache/commons/net/ftp/parser/DefaultFTPFileEntryParserFactory.java
@@ -97,8 +97,7 @@ public FTPFileEntryParser createFileEntryParser(String key)
 	            {
 	                ukey = key.toUpperCase(java.util.Locale.ENGLISH);
 	            }
-	            if ((ukey.indexOf(FTPClientConfig.SYST_UNIX) >= 0) 
-	            		|| (ukey.indexOf(FTPClientConfig.SYST_L8) >= 0))
+	            if (ukey.indexOf(FTPClientConfig.SYST_UNIX) >= 0) 
 	            {
 	                parser = createUnixFTPEntryParser();
 	            }
@@ -127,6 +126,12 @@ else if (ukey.indexOf(FTPClientConfig.SYST_NETWARE) >= 0)
 	            {
 	            	parser = createNetwareFTPEntryParser();
 	            }
+	            else if (ukey.indexOf(FTPClientConfig.SYST_L8) >= 0) 
+	            {
+	            	// L8 normally means Unix, but move it to the end for some L8 systems that aren't.
+	            	// This check should be last!
+	            	parser = createUnixFTPEntryParser();
+	            }
 	            else
 	            {
 	                throw new ParserInitializationException("Unknown parser type: " + key);
