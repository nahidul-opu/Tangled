From 906377e8d7b9c0361e902d28ff728e5398dbe379 Mon Sep 17 00:00:00 2001
From: Sebastian Bazley <sebb@apache.org>
Date: Mon, 12 Jul 2010 15:29:52 +0000
Subject: [PATCH] NET-313 - Allow activeMaxPort == activeMinPort in
 getActivePort() method

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/net/branches/NET_2_0@963321 13f79535-47bb-0310-9956-ffa450edef68
---
 src/main/java/org/apache/commons/net/ftp/FTPClient.java | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/main/java/org/apache/commons/net/ftp/FTPClient.java b/src/main/java/org/apache/commons/net/ftp/FTPClient.java
index b3adf4dd5..c39f7fc11 100644
--- a/src/main/java/org/apache/commons/net/ftp/FTPClient.java
+++ b/src/main/java/org/apache/commons/net/ftp/FTPClient.java
@@ -1013,8 +1013,10 @@ public int getDataConnectionMode()
      */
     private int getActivePort()
     {
-        if (__activeMinPort > 0 && __activeMaxPort > __activeMinPort)
+        if (__activeMinPort > 0 && __activeMaxPort >= __activeMinPort)
         {
+            if (__activeMaxPort == __activeMinPort)
+                return __activeMaxPort;
             // Get a random port between the min and max port range
             return __random.nextInt(__activeMaxPort - __activeMinPort + 1) + __activeMinPort;
         }
