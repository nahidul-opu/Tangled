From 3977e99b1ada20355acab444d4c60ec2186dac63 Mon Sep 17 00:00:00 2001
From: Lewis John McGibbney <lewis.j.mcgibbney@jpl.nasa.gov>
Date: Sun, 28 Feb 2016 12:55:29 -0800
Subject: [PATCH] GORA-462 Potential null dereference of serializer in
 CassandraSubColumn#getFieldValue()

---
 .../apache/gora/cassandra/query/CassandraSubColumn.java   | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/gora-cassandra/src/main/java/org/apache/gora/cassandra/query/CassandraSubColumn.java b/gora-cassandra/src/main/java/org/apache/gora/cassandra/query/CassandraSubColumn.java
index 72cd0dda9..03e94e587 100644
--- a/gora-cassandra/src/main/java/org/apache/gora/cassandra/query/CassandraSubColumn.java
+++ b/gora-cassandra/src/main/java/org/apache/gora/cassandra/query/CassandraSubColumn.java
@@ -47,8 +47,12 @@ private Object getFieldValue(Type type, Schema fieldSchema, ByteBuffer byteBuffe
     Object value = null;
     if (type.equals(Type.ARRAY)) {
       ListSerializer<?> serializer = ListSerializer.get(fieldSchema.getElementType());
-      List<?> genericArray = serializer.fromByteBuffer(byteBuffer);
-      value = genericArray;
+      if (serializer != null) {
+        List<?> genericArray = serializer.fromByteBuffer(byteBuffer);
+        value = genericArray;
+      } else {
+        LOG.warn("Field detected as type Array, however no serializer could be found!")
+      }
     } else if (type.equals(Type.MAP)) {
 //      MapSerializer<?> serializer = MapSerializer.get(fieldSchema.getValueType());
 //      Map<?, ?> map = serializer.fromByteBuffer(byteBuffer);
