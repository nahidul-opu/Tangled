From 5b8a1da763d387a7e8e2c7c9c0c2c1744e579601 Mon Sep 17 00:00:00 2001
From: Simone Tripodi <simonetripodi@apache.org>
Date: Tue, 6 Nov 2012 11:48:36 +0000
Subject: [PATCH] [DIGESTER-174] Inner List Annotation has wrong @Target for
 most of the predefined annotation rules

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/digester/trunk@1406102 13f79535-47bb-0310-9956-ffa450edef68
---
 .../digester3/annotations/rules/BeanPropertySetter.java     | 6 +++---
 .../commons/digester3/annotations/rules/CallMethod.java     | 6 +++---
 .../commons/digester3/annotations/rules/CallParam.java      | 6 +++---
 .../commons/digester3/annotations/rules/PathCallParam.java  | 6 +++---
 .../commons/digester3/annotations/rules/SetProperty.java    | 6 +++---
 .../apache/commons/digester3/annotations/rules/SetTop.java  | 6 +++---
 src/changes/changes.xml                                     | 3 +++
 7 files changed, 21 insertions(+), 18 deletions(-)

diff --git a/core/src/main/java/org/apache/commons/digester3/annotations/rules/BeanPropertySetter.java b/core/src/main/java/org/apache/commons/digester3/annotations/rules/BeanPropertySetter.java
index 030c4133c..9d1e7dfca 100644
--- a/core/src/main/java/org/apache/commons/digester3/annotations/rules/BeanPropertySetter.java
+++ b/core/src/main/java/org/apache/commons/digester3/annotations/rules/BeanPropertySetter.java
@@ -32,7 +32,7 @@
 
 /**
  * Fields annotated with {@code BeanPropertySetter} will be bound with {@code BeanPropertySetterRule} digester rule.
- * 
+ *
  * @see org.apache.commons.digester3.Digester#addBeanPropertySetter(String,String)
  * @since 2.1
  */
@@ -57,12 +57,12 @@
 
     /**
      * Defines several {@code @BeanPropertySetter} annotations on the same element.
-     * 
+     *
      * @see BeanPropertySetter
      */
     @Documented
     @Retention( RetentionPolicy.RUNTIME )
-    @Target( ElementType.TYPE )
+    @Target( ElementType.FIELD )
     @DigesterRuleList
     @interface List
     {
diff --git a/core/src/main/java/org/apache/commons/digester3/annotations/rules/CallMethod.java b/core/src/main/java/org/apache/commons/digester3/annotations/rules/CallMethod.java
index 79bef1cc0..de7e0d547 100644
--- a/core/src/main/java/org/apache/commons/digester3/annotations/rules/CallMethod.java
+++ b/core/src/main/java/org/apache/commons/digester3/annotations/rules/CallMethod.java
@@ -32,7 +32,7 @@
 
 /**
  * Methods annotated with {@code CallMethod} will be bound with {@code CallMethodRule} digester rule.
- * 
+ *
  * @see org.apache.commons.digester3.Digester#addCallMethod(String,String,int,Class[])
  * @since 2.1
  */
@@ -62,12 +62,12 @@
 
     /**
      * Defines several {@code @CallMethod} annotations on the same element.
-     * 
+     *
      * @see CallMethod
      */
     @Documented
     @Retention( RetentionPolicy.RUNTIME )
-    @Target( ElementType.TYPE )
+    @Target( ElementType.METHOD )
     @DigesterRuleList
     @interface List
     {
diff --git a/core/src/main/java/org/apache/commons/digester3/annotations/rules/CallParam.java b/core/src/main/java/org/apache/commons/digester3/annotations/rules/CallParam.java
index 069d9d2da..2b6eb9088 100644
--- a/core/src/main/java/org/apache/commons/digester3/annotations/rules/CallParam.java
+++ b/core/src/main/java/org/apache/commons/digester3/annotations/rules/CallParam.java
@@ -32,7 +32,7 @@
 
 /**
  * Methods arguments annotated with {@code CallParam} will be bound with {@code CallParamRule} digester rule.
- * 
+ *
  * @see org.apache.commons.digester3.Digester#addCallParam(String,int)
  * @since 2.1
  */
@@ -78,12 +78,12 @@
 
     /**
      * Defines several {@code @CallParam} annotations on the same element.
-     * 
+     *
      * @see CallParam
      */
     @Documented
     @Retention( RetentionPolicy.RUNTIME )
-    @Target( ElementType.TYPE )
+    @Target( ElementType.PARAMETER )
     @DigesterRuleList
     @interface List
     {
diff --git a/core/src/main/java/org/apache/commons/digester3/annotations/rules/PathCallParam.java b/core/src/main/java/org/apache/commons/digester3/annotations/rules/PathCallParam.java
index 37f7205ed..da308628a 100644
--- a/core/src/main/java/org/apache/commons/digester3/annotations/rules/PathCallParam.java
+++ b/core/src/main/java/org/apache/commons/digester3/annotations/rules/PathCallParam.java
@@ -32,7 +32,7 @@
 
 /**
  * Methods arguments annotated with {@code PathCallParam} will be bound with {@code PathCallParamRule} digester rule.
- * 
+ *
  * @see org.apache.commons.digester3.Digester#addCallParamPath(String,int)
  * @since 2.1
  */
@@ -57,12 +57,12 @@
 
     /**
      * Defines several {@code @PathCallParam} annotations on the same element.
-     * 
+     *
      * @see PathCallParam
      */
     @Documented
     @Retention( RetentionPolicy.RUNTIME )
-    @Target( ElementType.TYPE )
+    @Target( ElementType.PARAMETER )
     @DigesterRuleList
     @interface List
     {
diff --git a/core/src/main/java/org/apache/commons/digester3/annotations/rules/SetProperty.java b/core/src/main/java/org/apache/commons/digester3/annotations/rules/SetProperty.java
index 8d11438b0..505fa5455 100644
--- a/core/src/main/java/org/apache/commons/digester3/annotations/rules/SetProperty.java
+++ b/core/src/main/java/org/apache/commons/digester3/annotations/rules/SetProperty.java
@@ -32,7 +32,7 @@
 
 /**
  * Fields annotated with {@code SetProperty} will be bound with {@code SetPropertiesRule} digester rule.
- * 
+ *
  * @see org.apache.commons.digester3.Digester#addSetProperties(String,String[],String[])
  * @since 2.1
  */
@@ -62,12 +62,12 @@
 
     /**
      * Defines several {@code @SetProperty} annotations on the same element.
-     * 
+     *
      * @see SetProperty
      */
     @Documented
     @Retention( RetentionPolicy.RUNTIME )
-    @Target( ElementType.TYPE )
+    @Target( ElementType.FIELD )
     @DigesterRuleList
     @interface List
     {
diff --git a/core/src/main/java/org/apache/commons/digester3/annotations/rules/SetTop.java b/core/src/main/java/org/apache/commons/digester3/annotations/rules/SetTop.java
index 2b7c30d86..37835a627 100644
--- a/core/src/main/java/org/apache/commons/digester3/annotations/rules/SetTop.java
+++ b/core/src/main/java/org/apache/commons/digester3/annotations/rules/SetTop.java
@@ -32,7 +32,7 @@
 
 /**
  * Methods annotated with {@code SetTop} will be bound with {@code SetTopRule} digester rule.
- * 
+ *
  * @see org.apache.commons.digester3.Digester#addSetTop(String,String,String)
  * @since 2.1
  */
@@ -62,12 +62,12 @@
 
     /**
      * Defines several {@code @SetTop} annotations on the same element
-     * 
+     *
      * @see SetTop
      */
     @Documented
     @Retention( RetentionPolicy.RUNTIME )
-    @Target( ElementType.TYPE )
+    @Target( ElementType.METHOD )
     @DigesterRuleList
     @interface List
     {
diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index a17909a85..4f2f95c71 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -23,6 +23,9 @@
   </properties>
   <body>
   <release version="3.3" date="201?-??-??" description="Maintenance release.">
+    <action dev="simonetripodi" type="fix" issue="DIGESTER-174" due-to="Andreas Sahlbach">
+      Inner List Annotation has wrong @Target for most of the predefined annotation rules
+    </action>
     <action dev="simonetripodi" type="fix" issue="DIGESTER-170" due-to="Dale Wijnand">
       Digester.pop(String) throws EmptyStackException where API doc says it returns null
     </action>
