From 1c2e62d6e2b3157baab95be2ba98347dfc615af6 Mon Sep 17 00:00:00 2001
From: Rahul Akolkar <rahul@apache.org>
Date: Fri, 1 Aug 2008 21:23:46 +0000
Subject: [PATCH] Port r681832 from trunk. Correct typo in <send> serialization
 and minor changes to corresponding test. SCXML-83

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/scxml/branches/J6@681835 13f79535-47bb-0310-9956-ffa450edef68
---
 .../java/org/apache/commons/scxml/io/SCXMLSerializer.java   | 2 +-
 .../org/apache/commons/scxml/io/SCXMLSerializerTest.java    | 6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/src/main/java/org/apache/commons/scxml/io/SCXMLSerializer.java b/src/main/java/org/apache/commons/scxml/io/SCXMLSerializer.java
index 4cdcf0b24..445f8cd15 100644
--- a/src/main/java/org/apache/commons/scxml/io/SCXMLSerializer.java
+++ b/src/main/java/org/apache/commons/scxml/io/SCXMLSerializer.java
@@ -490,7 +490,7 @@ public static void serializeSend(final StringBuffer b,
             .append(send.getTarget()).append("\" targetType=\"")
             .append(send.getTargettype()).append("\" namelist=\"")
             .append(send.getNamelist()).append("\" delay=\"")
-            .append(send.getDelay()).append("\" events=\"")
+            .append(send.getDelay()).append("\" event=\"")
             .append(send.getEvent()).append("\" hints=\"")
             .append(send.getHints()).append("\">\n")
             .append(getBodyContent(send))
diff --git a/src/test/java/org/apache/commons/scxml/io/SCXMLSerializerTest.java b/src/test/java/org/apache/commons/scxml/io/SCXMLSerializerTest.java
index 0990efe32..7ddae46b2 100644
--- a/src/test/java/org/apache/commons/scxml/io/SCXMLSerializerTest.java
+++ b/src/test/java/org/apache/commons/scxml/io/SCXMLSerializerTest.java
@@ -75,7 +75,7 @@ public void testSerializeSend() {
         send.setTarget("newTarget");
         send.setTargettype("newTargetType");
         send.setNamelist("names");
-        send.setDelay("4 secs");
+        send.setDelay("4s");
         send.setEvent("turnoff");
         send.setHints("guess");
         
@@ -83,8 +83,8 @@ public void testSerializeSend() {
                 "target=\"newTarget\" " +
                 "targetType=\"newTargetType\" " +
                 "namelist=\"names\" " +
-                "delay=\"4 secs\" " +
-                "events=\"turnoff\" " +
+                "delay=\"4s\" " +
+                "event=\"turnoff\" " +
                 "hints=\"guess\">\n </send>\n";
         
         StringBuffer returnValue = new StringBuffer(); 
