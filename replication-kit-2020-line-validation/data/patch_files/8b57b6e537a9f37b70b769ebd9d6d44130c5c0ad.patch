From 8b57b6e537a9f37b70b769ebd9d6d44130c5c0ad Mon Sep 17 00:00:00 2001
From: Maarten Coene <maartenc@apache.org>
Date: Tue, 29 Sep 2009 22:11:48 +0000
Subject: [PATCH] FIX: IbiblioResolver not always correctly configured when
 using JRE 1.5 (IVY-1124) (thanks to Flavio Coutinho da Costa)

git-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@820106 13f79535-47bb-0310-9956-ffa450edef68
---
 CHANGES.txt                                                   | 2 ++
 src/java/org/apache/ivy/plugins/resolver/IBiblioResolver.java | 2 ++
 2 files changed, 4 insertions(+)

diff --git a/CHANGES.txt b/CHANGES.txt
index f62f524d4..be92daedb 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -29,6 +29,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br
 	Kristian Cibulskis
 	Andrea Bernardo Ciddio
 	Archie Cobbs
+	Flavio Coutinho da Costa
 	Martin Eigenbrodt
 	Danno Ferrin
 	Benjamin Francisoud	
@@ -92,6 +93,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br
 	
    trunk
 =====================================
+- FIX: IbiblioResolver not always correctly configured when using JRE 1.5 (IVY-1124) (thanks to Flavio Coutinho da Costa)
 - FIX: VstfpRepository.readResponse uses bad compare logic (IVY-1119) (thanks to Dave Brosius)
 - FIX: URLResource does not properly support authentication (IVY-1106) (thanks to Heschi Kreinick)
 - FIX: Excessive hits to missing URLs uses up all ports on Windows (IVY-1105)
diff --git a/src/java/org/apache/ivy/plugins/resolver/IBiblioResolver.java b/src/java/org/apache/ivy/plugins/resolver/IBiblioResolver.java
index 455140bb1..61636f097 100644
--- a/src/java/org/apache/ivy/plugins/resolver/IBiblioResolver.java
+++ b/src/java/org/apache/ivy/plugins/resolver/IBiblioResolver.java
@@ -303,6 +303,8 @@ public void setRoot(String root) {
     private void updateWholePattern() {
         if (isM2compatible() && isUsepoms()) {
             setIvyPatterns(Collections.singletonList(getWholePattern()));
+        } else {
+            setIvyPatterns(Collections.EMPTY_LIST);
         }
         setArtifactPatterns(Collections.singletonList(getWholePattern()));
     }
