From 4ac1171d854bcf27ca29e5da57b90916db955b98 Mon Sep 17 00:00:00 2001
From: Henry Saputra <henry.saputra@gmail.com>
Date: Thu, 12 Jun 2014 09:57:50 -0700
Subject: [PATCH] GORA-332 fix record.vm template to generate
 deepCopyToReadOnlyBuffer methos | by Damien Raude-Morvan

---
 CHANGES.txt                                                  | 2 ++
 .../velocity/org/apache/gora/compiler/templates/record.vm    | 5 +++--
 2 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/CHANGES.txt b/CHANGES.txt
index 870e19bd3..111ff20e2 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -4,6 +4,8 @@
 
 Current Development 0.5-SNAPSHOT
 
+* GORA-332 fix record.vm template to generate deepCopyToReadOnlyBuffer method (drazzib aka Damien Raude-Morvan via hsaputra)
+
 * GORA-331 Gora 0.4 compiler crash with "enum" type (drazzib aka Damien Raude-Morvan via hsaputra)
 
 * GORA-336 MongoFilterUtil: missing ref link when creating new instance of factory (drazzib via lewismc)
diff --git a/gora-compiler/src/main/velocity/org/apache/gora/compiler/templates/record.vm b/gora-compiler/src/main/velocity/org/apache/gora/compiler/templates/record.vm
index 0a73b80ed..78f5d13e5 100644
--- a/gora-compiler/src/main/velocity/org/apache/gora/compiler/templates/record.vm
+++ b/gora-compiler/src/main/velocity/org/apache/gora/compiler/templates/record.vm
@@ -172,7 +172,7 @@ public class ${this.mangle($schema.getName())}#if ($schema.isError()) extends or
     return new #if ($schema.getNamespace())$schema.getNamespace().#end${this.mangle($schema.getName())}.Builder(other);
   }
   
-  private static java.nio.ByteBuffer deepCopyToWriteOnlyBuffer(
+  private static java.nio.ByteBuffer deepCopyToReadOnlyBuffer(
       java.nio.ByteBuffer input) {
     java.nio.ByteBuffer copy = java.nio.ByteBuffer.allocate(input.capacity());
     int position = input.position();
@@ -346,4 +346,5 @@ public class ${this.mangle($schema.getName())}#if ($schema.isError()) extends or
   
   }
   
-}
\ No newline at end of file
+}
+
