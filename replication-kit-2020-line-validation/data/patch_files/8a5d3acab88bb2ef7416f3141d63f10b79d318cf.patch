From 8a5d3acab88bb2ef7416f3141d63f10b79d318cf Mon Sep 17 00:00:00 2001
From: Henri Yandell <bayard@apache.org>
Date: Sun, 16 Mar 2008 01:39:13 +0000
Subject: [PATCH] Applying the patch from Alexander Borovsky for
 COLLECTIONS-271

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/collections/trunk@637503 13f79535-47bb-0310-9956-ffa450edef68
---
 .../commons/collections/ExtendedProperties.java       |  2 +-
 .../commons/collections/TestExtendedProperties.java   | 11 +++++++++++
 2 files changed, 12 insertions(+), 1 deletion(-)

diff --git a/src/java/org/apache/commons/collections/ExtendedProperties.java b/src/java/org/apache/commons/collections/ExtendedProperties.java
index 8c302f8e15..ddbaf508a0 100644
--- a/src/java/org/apache/commons/collections/ExtendedProperties.java
+++ b/src/java/org/apache/commons/collections/ExtendedProperties.java
@@ -813,7 +813,7 @@ public synchronized void save(OutputStream output, String header) throws IOExcep
     public void combine(ExtendedProperties props) {
         for (Iterator it = props.getKeys(); it.hasNext();) {
             String key = (String) it.next();
-            setProperty(key, props.get(key));
+            super.put(key, props.get(key));
         }
     }
     
diff --git a/src/test/org/apache/commons/collections/TestExtendedProperties.java b/src/test/org/apache/commons/collections/TestExtendedProperties.java
index 5db27cc49e..0c6388e87f 100644
--- a/src/test/org/apache/commons/collections/TestExtendedProperties.java
+++ b/src/test/org/apache/commons/collections/TestExtendedProperties.java
@@ -396,4 +396,15 @@ public void testKeySet4() {
         assertFalse(it.hasNext());
     }
 
+    public void testCollections271() {
+        ExtendedProperties props = new ExtendedProperties();
+        props.setProperty("test", "\\\\\\\\192.168.1.91\\\\test");
+        props.getProperty("test");
+        assertEquals( "\\\\192.168.1.91\\test", props.getProperty("test") );
+
+        ExtendedProperties props2 = new ExtendedProperties();
+        props2.combine(props);
+        assertEquals( "\\\\192.168.1.91\\test", props2.getProperty("test") );
+    }
+
 }
