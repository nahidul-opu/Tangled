From 8cba88fa1a5dbcf8986e2726b15eeb1d823d87ec Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Nicolas=20Lalev=C3=A9e?= <nicolas.lalevee@hibnet.org>
Date: Sun, 6 Sep 2015 20:21:21 +0200
Subject: [PATCH] revert part of the patch for IVY-1141, some unit tests are
 expecting the reverse

---
 .../apache/ivy/plugins/version/LatestVersionMatcher.java   | 6 ------
 .../ivy/plugins/version/LatestVersionMatcherTest.java      | 7 -------
 2 files changed, 13 deletions(-)

diff --git a/src/java/org/apache/ivy/plugins/version/LatestVersionMatcher.java b/src/java/org/apache/ivy/plugins/version/LatestVersionMatcher.java
index 5a30b24e8..2ab2b33f4 100644
--- a/src/java/org/apache/ivy/plugins/version/LatestVersionMatcher.java
+++ b/src/java/org/apache/ivy/plugins/version/LatestVersionMatcher.java
@@ -39,12 +39,6 @@ public boolean accept(ModuleRevisionId askedMrid, ModuleRevisionId foundMrid) {
     }
 
     public boolean needModuleDescriptor(ModuleRevisionId askedMrid, ModuleRevisionId foundMrid) {
-        // if asking for a branch, foundMrid will likely have an invalid value that doesn't
-        // come from the module descriptor itself. return true so accept is given the real
-        // module descriptor with the correct branch.
-        if (askedMrid.getBranch() != null) {
-            return true;
-        }
         List<Status> statuses = StatusManager.getCurrent().getStatuses();
         Status lowest = (Status) statuses.get(statuses.size() - 1);
         String latestLowest = "latest." + lowest.getName();
diff --git a/test/java/org/apache/ivy/plugins/version/LatestVersionMatcherTest.java b/test/java/org/apache/ivy/plugins/version/LatestVersionMatcherTest.java
index f72d8999d..5997e83d7 100644
--- a/test/java/org/apache/ivy/plugins/version/LatestVersionMatcherTest.java
+++ b/test/java/org/apache/ivy/plugins/version/LatestVersionMatcherTest.java
@@ -42,13 +42,6 @@ public void testNeedModuleDescriptorStandardStatus() throws Exception {
         assertNeed("latest.integration", false);
     }
 
-    public void testNeedModuleDescriptorForBranches() throws Exception {
-        assertNeed("latest.release", "trunk", true);
-        assertNeed("latest.milestone", "trunk", true);
-        // different branches will have different latest.integration artifacts
-        assertNeed("latest.integration", "trunk", true);
-    }
-
     public void testNeedModuleDescriptorCustomStatus() throws Exception {
         StatusManager.getCurrent().addStatus(new Status("release", false));
         StatusManager.getCurrent().addStatus(new Status("snapshot", true));
