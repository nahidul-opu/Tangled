From 9c85b590c1ad663b3316ad0f1926752cbda33742 Mon Sep 17 00:00:00 2001
From: Maarten Coene <maartenc@apache.org>
Date: Thu, 22 Feb 2007 21:34:46 +0000
Subject: [PATCH] Added junit test for IVY-390

git-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/core/trunk@510656 13f79535-47bb-0310-9956-ffa450edef68
---
 .../ivy/plugins/resolver/URLResolverTest.java | 21 +++++++++++++++++++
 1 file changed, 21 insertions(+)

diff --git a/test/java/org/apache/ivy/plugins/resolver/URLResolverTest.java b/test/java/org/apache/ivy/plugins/resolver/URLResolverTest.java
index 9014d5c48..52d85f8f8 100644
--- a/test/java/org/apache/ivy/plugins/resolver/URLResolverTest.java
+++ b/test/java/org/apache/ivy/plugins/resolver/URLResolverTest.java
@@ -41,6 +41,7 @@
 import org.apache.ivy.core.settings.IvySettings;
 import org.apache.ivy.core.sort.SortEngine;
 import org.apache.ivy.plugins.matcher.ExactPatternMatcher;
+import org.apache.ivy.plugins.version.LatestVersionMatcher;
 import org.apache.tools.ant.Project;
 import org.apache.tools.ant.taskdefs.Delete;
 
@@ -253,6 +254,26 @@ public void testLatestIBiblio() throws Exception {
         assertEquals("1.4.3", rmr.getId().getRevision());
     }
 
+    public void testVersionRangeIBiblio() throws Exception {
+        String ibiblioRoot = IBiblioHelper.getIBiblioMirror();
+        if (ibiblioRoot == null) {
+            return;
+        }
+        
+        URLResolver resolver = new URLResolver();
+        resolver.setSettings(_settings);
+        resolver.setAlwaysCheckExactRevision(true);
+        resolver.addIvyPattern(ibiblioRoot+"/[module]/poms/[module]-[revision].pom");
+        resolver.addArtifactPattern(ibiblioRoot+"/[module]/[type]s/[artifact]-[revision].[type]");
+        resolver.setName("test");
+        assertEquals("test", resolver.getName());
+        
+        ModuleRevisionId mrid = ModuleRevisionId.newInstance("asm", "asm", "[1.4,1.5]");
+        ResolvedModuleRevision rmr = resolver.getDependency(new DefaultDependencyDescriptor(mrid, false), _data);
+        assertNotNull(rmr);
+        assertEquals("1.4.4", rmr.getId().getRevision());
+    }
+
     public void testUnknown() throws Exception {
         String ibiblioRoot = IBiblioHelper.getIBiblioMirror();
         if (ibiblioRoot == null) {
