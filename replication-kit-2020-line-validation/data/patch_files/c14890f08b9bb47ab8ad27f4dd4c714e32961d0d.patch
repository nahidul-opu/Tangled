From c14890f08b9bb47ab8ad27f4dd4c714e32961d0d Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Francesco=20Chicchiricc=C3=B2?= <ilgrosso@apache.org>
Date: Wed, 16 Nov 2016 07:07:43 +0100
Subject: [PATCH] LANG-1285: NullPointerException in
 FastDateParser$TimeZoneStrategy (closes #212)

Replicate the fix for LANG-1186
---
 .../apache/commons/lang3/time/FastDateParser.java    | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

diff --git a/src/main/java/org/apache/commons/lang3/time/FastDateParser.java b/src/main/java/org/apache/commons/lang3/time/FastDateParser.java
index 2729c7a4e6d..a9470d30ed8 100644
--- a/src/main/java/org/apache/commons/lang3/time/FastDateParser.java
+++ b/src/main/java/org/apache/commons/lang3/time/FastDateParser.java
@@ -866,11 +866,13 @@ private static class TzInfo {
                         tzInfo = standard;
                         break;
                     }
-                    final String key = zoneNames[i].toLowerCase(locale);
-                    // ignore the data associated with duplicates supplied in
-                    // the additional names
-                    if (sorted.add(key)) {
-                        tzNames.put(key, tzInfo);
+                    if (zoneNames[i] != null) {
+                        final String key = zoneNames[i].toLowerCase(locale);
+                        // ignore the data associated with duplicates supplied in
+                        // the additional names
+                        if (sorted.add(key)) {
+                            tzNames.put(key, tzInfo);
+                        }
                     }
                 }
             }
