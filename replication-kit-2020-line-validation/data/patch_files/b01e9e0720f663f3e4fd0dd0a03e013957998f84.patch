From b01e9e0720f663f3e4fd0dd0a03e013957998f84 Mon Sep 17 00:00:00 2001
From: Benedikt Ritter <britter@apache.org>
Date: Thu, 18 Aug 2016 13:45:04 +0000
Subject: [PATCH] =?UTF-8?q?VALIDATOR-401:=20IBANValidator=20fails=20for=20?=
 =?UTF-8?q?Seychelles=20and=20Ukraine.=20Thanks=20to=20Bj=C3=B6rn=20Raupac?=
 =?UTF-8?q?h=20for=20reporting=20this=20issue.?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/validator/trunk@1756783 13f79535-47bb-0310-9956-ffa450edef68
---
 src/changes/changes.xml                                     | 6 ++++--
 .../apache/commons/validator/routines/IBANValidator.java    | 2 ++
 .../commons/validator/routines/IBANValidatorTest.java       | 4 +++-
 3 files changed, 9 insertions(+), 3 deletions(-)

diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index b545fba71..8372af287 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -64,8 +64,10 @@ The <action> type attribute can be add,update,fix,remove.
      -->
 
   <body>
-  <release version="1.5.2" date="TBA" description="
-  ">
+  <release version="1.5.2" date="TBA" description="">
+    <action issue="VALIDATOR-401" type="fix" dev="britter">
+    IBANValidator fails for Seychelles and Ukraine
+    </action>
     <action issue="VALIDATOR-391" type="fix" dev="sebb" due-to="Mark E. Scott, Jr. &amp; Jason Loomis">
     UrlValidator.isValid throws exception for FILEURLs
     Fixed code so it handles URLs with no authority field
diff --git a/src/main/java/org/apache/commons/validator/routines/IBANValidator.java b/src/main/java/org/apache/commons/validator/routines/IBANValidator.java
index c1060ff16..3f0ee0898 100644
--- a/src/main/java/org/apache/commons/validator/routines/IBANValidator.java
+++ b/src/main/java/org/apache/commons/validator/routines/IBANValidator.java
@@ -153,6 +153,7 @@ public Validator(String cc, int len, String format) {
             new Validator("ST", 25, "ST\\d{23}"                             ), // Sao Tome And Principe
             new Validator("SA", 24, "SA\\d{4}[A-Z0-9]{18}"                  ), // Saudi Arabia
             new Validator("RS", 22, "RS\\d{20}"                             ), // Serbia
+            new Validator("SC", 31, "SC\\d{2}[A-Z]{4}\\d{20}[A-Z]{3}"       ), // Seychelles
             new Validator("SK", 24, "SK\\d{22}"                             ), // Slovak Republic
             new Validator("SI", 19, "SI\\d{17}"                             ), // Slovenia
             new Validator("ES", 24, "ES\\d{22}"                             ), // Spain
@@ -161,6 +162,7 @@ public Validator(String cc, int len, String format) {
             new Validator("TL", 23, "TL\\d{21}"                             ), // Timor-Leste
             new Validator("TN", 24, "TN59\\d{20}"                           ), // Tunisia
             new Validator("TR", 26, "TR\\d{8}[A-Z0-9]{16}"                  ), // Turkey
+            new Validator("UA", 29, "UA\\d{8}[A-Z0-9]{19}"                  ), // Ukraine
             new Validator("AE", 23, "AE\\d{21}"                             ), // United Arab Emirates
             new Validator("GB", 22, "GB\\d{2}[A-Z]{4}\\d{14}"               ), // United Kingdom
             new Validator("VG", 24, "VG\\d{2}[A-Z]{4}\\d{16}"               ), // Virgin Islands, British
diff --git a/src/test/java/org/apache/commons/validator/routines/IBANValidatorTest.java b/src/test/java/org/apache/commons/validator/routines/IBANValidatorTest.java
index 49c49ef4a..74faf59e3 100644
--- a/src/test/java/org/apache/commons/validator/routines/IBANValidatorTest.java
+++ b/src/test/java/org/apache/commons/validator/routines/IBANValidatorTest.java
@@ -107,7 +107,9 @@ public class IBANValidatorTest {
             "AE070331234567890123456",
             "GB29NWBK60161331926819",
             "VG96VPVG0000012345678901",
-            };
+            "SC18SSCB11010000000000001497USD",
+            "UA213996220000026007233566001"
+    };
 
     private final String[] invalidIBANFormat = new String[] {
             "",                        // empty
