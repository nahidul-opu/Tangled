From 89e91c960f095966972aff619a48b75bf473d344 Mon Sep 17 00:00:00 2001
From: Sebastian Bazley <sebb@apache.org>
Date: Tue, 17 Mar 2009 15:54:04 +0000
Subject: [PATCH] VFS-191 - replace char by int as a work variable to allow
 compare with -1

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/vfs/trunk@755291 13f79535-47bb-0310-9956-ffa450edef68
---
 .../vfs/provider/bzip2/CBZip2InputStream.java | 20 ++++++++-----------
 1 file changed, 8 insertions(+), 12 deletions(-)

diff --git a/core/src/main/java/org/apache/commons/vfs/provider/bzip2/CBZip2InputStream.java b/core/src/main/java/org/apache/commons/vfs/provider/bzip2/CBZip2InputStream.java
index e634bd34e6..0d4130063c 100644
--- a/core/src/main/java/org/apache/commons/vfs/provider/bzip2/CBZip2InputStream.java
+++ b/core/src/main/java/org/apache/commons/vfs/provider/bzip2/CBZip2InputStream.java
@@ -454,21 +454,19 @@ private void getAndMoveToFrontDecode()
 
             while( m_bsLive < 1 )
             {
-                int zzi;
-                char thech = 0;
+                int zzi = 0;
                 try
                 {
-                    thech = (char)m_input.read();
+                    zzi = m_input.read();
                 }
                 catch( IOException e )
                 {
                     compressedStreamEOF();
                 }
-                if( thech == -1 )
+                if( zzi == -1 )
                 {
                     compressedStreamEOF();
                 }
-                zzi = thech;
                 m_bsBuff = ( m_bsBuff << 8 ) | ( zzi & 0xff );
                 m_bsLive += 8;
             }
@@ -519,21 +517,19 @@ private void getAndMoveToFrontDecode()
 
                         while( m_bsLive < 1 )
                         {
-                            int zzi;
-                            char thech = 0;
+                            int zzi = 0;
                             try
                             {
-                                thech = (char)m_input.read();
+                                zzi = m_input.read();
                             }
                             catch( IOException e )
                             {
                                 compressedStreamEOF();
                             }
-                            if( thech == -1 )
+                            if( zzi == -1 )
                             {
                                 compressedStreamEOF();
                             }
-                            zzi = thech;
                             m_bsBuff = ( m_bsBuff << 8 ) | ( zzi & 0xff );
                             m_bsLive += 8;
                         }
@@ -677,10 +673,10 @@ private int bsR( final int n )
     {
         while( m_bsLive < n )
         {
-            char ch = 0;
+            int ch = 0;
             try
             {
-                ch = (char)m_input.read();
+                ch = m_input.read();
             }
             catch( final IOException ioe )
             {
