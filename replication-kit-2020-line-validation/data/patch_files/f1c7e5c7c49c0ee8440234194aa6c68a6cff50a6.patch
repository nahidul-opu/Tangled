From f1c7e5c7c49c0ee8440234194aa6c68a6cff50a6 Mon Sep 17 00:00:00 2001
From: Maarten Coene <maartenc@apache.org>
Date: Tue, 16 Sep 2008 19:56:48 +0000
Subject: [PATCH] FIX: Cannot configure items with java.io.File attributes
 (IVY-905)

git-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@696031 13f79535-47bb-0310-9956-ffa450edef68
---
 .../org/apache/ivy/util/ConfiguratorTest.java | 25 +++++++++++++++++++
 1 file changed, 25 insertions(+)

diff --git a/test/java/org/apache/ivy/util/ConfiguratorTest.java b/test/java/org/apache/ivy/util/ConfiguratorTest.java
index c4f7936fa..c68d4faf7 100644
--- a/test/java/org/apache/ivy/util/ConfiguratorTest.java
+++ b/test/java/org/apache/ivy/util/ConfiguratorTest.java
@@ -17,6 +17,7 @@
  */
 package org.apache.ivy.util;
 
+import java.io.File;
 import java.util.ArrayList;
 import java.util.List;
 import java.util.Map;
@@ -27,6 +28,19 @@
  *
  */
 public class ConfiguratorTest extends TestCase {
+    
+    public static class FileTester {
+        private File file;
+        
+        public void setFile(File file) {
+            this.file = file;
+        }
+        
+        public File getFile() {
+            return file;
+        }
+    }
+    
     public static class City {
         private List _housings = new ArrayList();
 
@@ -357,4 +371,15 @@ public void testMacro() throws Exception {
         assertEquals(20, ((Room) ((Housing) city.getHousings().get(1)).getRooms().get(2))
                 .getSurface());
     }
+    
+    public void testFileAttribute() {
+        FileTester root = new FileTester();
+        _conf.setRoot(root);
+        _conf.setAttribute("file", "path/to/file.txt");
+        
+        String filePath = root.getFile().getPath();
+        filePath = filePath.replace('\\', '/');
+        
+        assertEquals("path/to/file.txt", filePath);
+    }
 }
