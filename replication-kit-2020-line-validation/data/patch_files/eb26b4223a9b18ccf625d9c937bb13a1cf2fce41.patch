From eb26b4223a9b18ccf625d9c937bb13a1cf2fce41 Mon Sep 17 00:00:00 2001
From: Aliaksandr Autayeu <autayeu@apache.org>
Date: Sun, 15 Jul 2012 15:17:27 +0000
Subject: [PATCH] OPENNLP-470: CLI for SimpleTokenizer is broken

git-svn-id: https://svn.apache.org/repos/asf/opennlp/trunk@1361713 13f79535-47bb-0310-9956-ffa450edef68
---
 .../tools/cmdline/AbstractCmdLineTool.java    |  4 +
 .../main/java/opennlp/tools/cmdline/CLI.java  |  2 +-
 .../opennlp/tools/cmdline/CmdLineTool.java    | 98 ++++++++++---------
 .../tokenizer/SimpleTokenizerTool.java        |  5 +
 4 files changed, 62 insertions(+), 47 deletions(-)

diff --git a/opennlp-tools/src/main/java/opennlp/tools/cmdline/AbstractCmdLineTool.java b/opennlp-tools/src/main/java/opennlp/tools/cmdline/AbstractCmdLineTool.java
index 04d207ee0..e8bbae28a 100644
--- a/opennlp-tools/src/main/java/opennlp/tools/cmdline/AbstractCmdLineTool.java
+++ b/opennlp-tools/src/main/java/opennlp/tools/cmdline/AbstractCmdLineTool.java
@@ -33,6 +33,10 @@ public String getName() {
     }
   }
 
+  public boolean hasParams() {
+    return true;
+  }
+
   @SuppressWarnings({"unchecked"})
   protected <T> String getBasicHelp(Class<T> argProxyInterface) {
     return getBasicHelp(new Class[]{argProxyInterface});
diff --git a/opennlp-tools/src/main/java/opennlp/tools/cmdline/CLI.java b/opennlp-tools/src/main/java/opennlp/tools/cmdline/CLI.java
index d2e2f1469..bb5aac7a2 100644
--- a/opennlp-tools/src/main/java/opennlp/tools/cmdline/CLI.java
+++ b/opennlp-tools/src/main/java/opennlp/tools/cmdline/CLI.java
@@ -207,7 +207,7 @@ public static void main(String[] args) {
         throw new TerminateToolException(1, "Tool " + toolName + " is not found.");
       }
 
-      if (0 == toolArguments.length ||
+      if ((0 == toolArguments.length && tool.hasParams()) ||
           0 < toolArguments.length && "help".equals(toolArguments[0])) {
           if (tool instanceof TypedCmdLineTool) {
             System.out.println(((TypedCmdLineTool) tool).getHelp(formatName));
diff --git a/opennlp-tools/src/main/java/opennlp/tools/cmdline/CmdLineTool.java b/opennlp-tools/src/main/java/opennlp/tools/cmdline/CmdLineTool.java
index 279a27a7f..360059410 100644
--- a/opennlp-tools/src/main/java/opennlp/tools/cmdline/CmdLineTool.java
+++ b/opennlp-tools/src/main/java/opennlp/tools/cmdline/CmdLineTool.java
@@ -1,46 +1,52 @@
-/*
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License. You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package opennlp.tools.cmdline;
-
-/**
- * Base interface for all command line tools.
- */
-public interface CmdLineTool {
-
-  /**
-   * Retrieves the name of the training data tool. The name (used as command)
-   * must not contain white spaces.
-   *
-   * @return the name of the command line tool
-   */
-  String getName();
-
-  /**
-   * Retrieves a short description of what the tool does.
-   *
-   * @return a short description of what the tool does
-   */
-  String getShortDescription();
-
-  /**
-   * Retrieves a description on how to use the tool.
-   *
-   * @return a description on how to use the tool
-   */
-  String getHelp();
-}
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License. You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package opennlp.tools.cmdline;
+
+/**
+ * Base interface for all command line tools.
+ */
+public interface CmdLineTool {
+
+  /**
+   * Retrieves the name of the training data tool. The name (used as command)
+   * must not contain white spaces.
+   *
+   * @return the name of the command line tool
+   */
+  String getName();
+
+  /**
+   * Retrieves a short description of what the tool does.
+   *
+   * @return a short description of what the tool does
+   */
+  String getShortDescription();
+
+  /**
+   * Retrieves a description on how to use the tool.
+   *
+   * @return a description on how to use the tool
+   */
+  String getHelp();
+
+  /**
+   * Returns whether the tool has any command line params.
+   * @return whether the tool has any command line params
+   */
+  boolean hasParams();
+}
diff --git a/opennlp-tools/src/main/java/opennlp/tools/cmdline/tokenizer/SimpleTokenizerTool.java b/opennlp-tools/src/main/java/opennlp/tools/cmdline/tokenizer/SimpleTokenizerTool.java
index 1fe7d9981..ea7a27cd5 100644
--- a/opennlp-tools/src/main/java/opennlp/tools/cmdline/tokenizer/SimpleTokenizerTool.java
+++ b/opennlp-tools/src/main/java/opennlp/tools/cmdline/tokenizer/SimpleTokenizerTool.java
@@ -30,6 +30,11 @@ public String getHelp() {
     return "Usage: " + CLI.CMD + " " + getName() + " < sentences";
   }
 
+  @Override
+  public boolean hasParams() {
+    return false;
+  }
+
   public void run(String[] args) {
     if (args.length != 0) {
       System.out.println(getHelp());
