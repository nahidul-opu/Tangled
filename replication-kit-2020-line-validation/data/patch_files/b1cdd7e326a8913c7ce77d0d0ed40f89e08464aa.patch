From b1cdd7e326a8913c7ce77d0d0ed40f89e08464aa Mon Sep 17 00:00:00 2001
From: Xavier Hanin <xavier@apache.org>
Date: Wed, 17 Aug 2005 18:11:09 +0000
Subject: [PATCH] FIX: Ivy complains about schema directive (IVY-64)

git-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/trunk@484020 13f79535-47bb-0310-9956-ffa450edef68
---
 CHANGES.txt                                  | 1 +
 src/java/fr/jayasoft/ivy/util/XMLHelper.java | 2 +-
 test/java/fr/jayasoft/ivy/xml/test.xml       | 2 +-
 test/java/fr/jayasoft/ivy/xml/updated.xml    | 2 +-
 4 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/CHANGES.txt b/CHANGES.txt
index b1aca2c04..bf2e59864 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -15,6 +15,7 @@
 - new cachefileset task: builds an ant fileset of artifacts in cache
 - publish task now uses srcivypattern for ivy files finding and for delivery
 - better debug and error messages (IVY-60 IVY-61)
+- FIX: Ivy complains about schema directive (IVY-64)
 - FIX: 'null' status attribute in module descriptor (IVY-62)
 - FIX: report header contains incorrect link after resolve for multiple, comma-separated configurations (IVY-57)
 - FIX: error retrieving dependencies with a '+' in their revision if the ivy file doesn't exist - fixed by maarten coene (IVY-59)
diff --git a/src/java/fr/jayasoft/ivy/util/XMLHelper.java b/src/java/fr/jayasoft/ivy/util/XMLHelper.java
index e9d110429..a5c92aefc 100644
--- a/src/java/fr/jayasoft/ivy/util/XMLHelper.java
+++ b/src/java/fr/jayasoft/ivy/util/XMLHelper.java
@@ -33,7 +33,7 @@ public abstract class XMLHelper {
     private static boolean _canUseSchemaValidation = true;
 
     static {
-        // _factory.setNamespaceAware(true);
+        _validatingFactory.setNamespaceAware(true);
         _validatingFactory.setValidating(true);
     }
 
diff --git a/test/java/fr/jayasoft/ivy/xml/test.xml b/test/java/fr/jayasoft/ivy/xml/test.xml
index 98b5a5b81..0aae565e2 100644
--- a/test/java/fr/jayasoft/ivy/xml/test.xml
+++ b/test/java/fr/jayasoft/ivy/xml/test.xml
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="ISO-8859-1"?>
 <?xml-stylesheet type="text/xsl" href="http://www.jayasoft.fr/org/ivyrep/ivy-doc.xsl"?>
-<ivy-module version="1.0">
+<ivy-module version="1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://jayasoft.org/ivy/ivy.xsd">
 	<info organisation="myorg"
 	       module="mymodule"
 	       revision="myrev"
diff --git a/test/java/fr/jayasoft/ivy/xml/updated.xml b/test/java/fr/jayasoft/ivy/xml/updated.xml
index 904da66af..aef389c0c 100644
--- a/test/java/fr/jayasoft/ivy/xml/updated.xml
+++ b/test/java/fr/jayasoft/ivy/xml/updated.xml
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="ISO-8859-1"?>
 <?xml-stylesheet type="text/xsl" href="http://www.jayasoft.fr/org/ivyrep/ivy-doc.xsl"?>
-<ivy-module version="1.0">
+<ivy-module version="1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://jayasoft.org/ivy/ivy.xsd">
 	<info organisation="myorg" module="mymodule" revision="mynewrev" status="release" publication="20050322143254" resolver="myresolver">
 	       
 		<license name="MyLicense" url="http://www.my.org/mymodule/mylicense.html"/>
