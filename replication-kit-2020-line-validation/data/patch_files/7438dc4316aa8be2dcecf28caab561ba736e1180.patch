From 7438dc4316aa8be2dcecf28caab561ba736e1180 Mon Sep 17 00:00:00 2001
From: Niall Pemberton <niallp@apache.org>
Date: Tue, 7 Nov 2006 08:31:59 +0000
Subject: [PATCH] BEANUTILS-64 - Add tests to new ArrayConverter to ensure
 leading/trailing spaces are not an issue

git-svn-id: https://svn.apache.org/repos/asf/jakarta/commons/proper/beanutils/trunk@472025 13f79535-47bb-0310-9956-ffa450edef68
---
 .../converters/ArrayConverterTestCase.java    | 54 +++++++++++++++++++
 1 file changed, 54 insertions(+)

diff --git a/src/test/org/apache/commons/beanutils/converters/ArrayConverterTestCase.java b/src/test/org/apache/commons/beanutils/converters/ArrayConverterTestCase.java
index d02630aa9..ef0a068d4 100644
--- a/src/test/org/apache/commons/beanutils/converters/ArrayConverterTestCase.java
+++ b/src/test/org/apache/commons/beanutils/converters/ArrayConverterTestCase.java
@@ -182,6 +182,60 @@ public void testComponentIntegerConverter() {
         }
     }
 
+    /**
+     * Test Converting a String[] to integer array (with leading/trailing whitespace)
+     */
+    public void testStringArrayToNumber() {
+
+        // Configure Converter
+        IntegerConverter intConverter = new IntegerConverter();
+        ArrayConverter arrayConverter = new ArrayConverter(int[].class, intConverter);
+
+        // Test Data
+        String[] array = new String[] {"10", "  11", "12  ", "  13  "};
+        ArrayList list = new ArrayList();
+        for (int i = 0; i < array.length; i++) {
+            list.add(array[i]);
+        }
+        
+        // Expected results
+        String msg = null;
+        int[]     expectedInt     = new int[] {10, 11, 12, 13};
+        Integer[] expectedInteger = new Integer[] {new Integer(expectedInt[0]), new Integer(expectedInt[1]), new Integer(expectedInt[2]), new Integer(expectedInt[3])};
+
+        // Test String[] --> int[]
+        try {
+            msg = "String[] --> int[]";
+            checkArray(msg, expectedInt, arrayConverter.convert(int[].class, array));
+        } catch (Exception e) {
+            fail(msg + " failed " + e);
+        }
+
+        // Test String[] --> Integer[]
+        try {
+            msg = "String[] --> Integer[]";
+            checkArray(msg, expectedInteger, arrayConverter.convert(Integer[].class, array));
+        } catch (Exception e) {
+            fail(msg + " failed " + e);
+        }
+
+        // Test List --> int[]
+        try {
+            msg = "List --> int[]";
+            checkArray(msg, expectedInt, arrayConverter.convert(int[].class, list));
+        } catch (Exception e) {
+            fail(msg + " failed " + e);
+        }
+
+        // Test List --> Integer[]
+        try {
+            msg = "List --> Integer[]";
+            checkArray(msg, expectedInteger, arrayConverter.convert(Integer[].class, list));
+        } catch (Exception e) {
+            fail(msg + " failed " + e);
+        }
+   }
+
     /**
      * Test the Matrix!!!! (parses a String into a 2 dimensional integer array or matrix)
      */
