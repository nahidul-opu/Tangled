From e6c4c4170aa675819dc17761470806eaec08bb33 Mon Sep 17 00:00:00 2001
From: Avery Ching <aching@fb.com>
Date: Mon, 27 Jan 2014 21:48:47 -0800
Subject: [PATCH] GIRAPH-830: directMemory used in netty message (pavanka via
 aching)

---
 CHANGELOG                                                       | 2 ++
 .../apache/giraph/comm/netty/handler/RequestServerHandler.java  | 2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/CHANGELOG b/CHANGELOG
index dc25b498f..45551fdfc 100644
--- a/CHANGELOG
+++ b/CHANGELOG
@@ -1,6 +1,8 @@
 Giraph Change Log
 
 Release 1.1.0 - unreleased
+  GIRAPH-830: directMemory used in netty message (pavanka via aching)
+
   GIRAPH-829: Compilation error due to wrong rexster jar file (armax00 via claudio)
 
   GIRAPH-803: Rexster I/O new complete API (armax00 via claudio)
diff --git a/giraph-core/src/main/java/org/apache/giraph/comm/netty/handler/RequestServerHandler.java b/giraph-core/src/main/java/org/apache/giraph/comm/netty/handler/RequestServerHandler.java
index 781e37c91..bfcfb8d57 100644
--- a/giraph-core/src/main/java/org/apache/giraph/comm/netty/handler/RequestServerHandler.java
+++ b/giraph-core/src/main/java/org/apache/giraph/comm/netty/handler/RequestServerHandler.java
@@ -121,7 +121,7 @@ public void messageReceived(
     }
 
     // Send the response with the request id
-    ChannelBuffer buffer = ChannelBuffers.directBuffer(RESPONSE_BYTES);
+    ChannelBuffer buffer = ChannelBuffers.buffer(RESPONSE_BYTES);
     buffer.writeInt(myTaskInfo.getTaskId());
     buffer.writeLong(writableRequest.getRequestId());
     buffer.writeByte(alreadyDone);
