From f2674c4ce113c632f7477dfd3deb814ec7ccc256 Mon Sep 17 00:00:00 2001
From: Christian Grobmeier <grobmeier@apache.org>
Date: Mon, 13 Apr 2009 12:04:06 +0000
Subject: [PATCH] improved testcase for COMPRESS-69: currently commented out
 since it doesn't work as expected

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/compress/trunk@764423 13f79535-47bb-0310-9956-ffa450edef68
---
 .../compress/compressors/BZip2TestCase.java   | 35 ++++++++++++++-----
 1 file changed, 26 insertions(+), 9 deletions(-)

diff --git a/src/test/java/org/apache/commons/compress/compressors/BZip2TestCase.java b/src/test/java/org/apache/commons/compress/compressors/BZip2TestCase.java
index 9d9aedaf0c6..083a954ae2d 100644
--- a/src/test/java/org/apache/commons/compress/compressors/BZip2TestCase.java
+++ b/src/test/java/org/apache/commons/compress/compressors/BZip2TestCase.java
@@ -29,15 +29,32 @@
 
 public final class BZip2TestCase extends AbstractTestCase {
 
-	public void testBzipCreation()  throws Exception {
-		final File input = getFile("test.txt");
-		final File output = new File(dir, "test.txt.bz2");
-		final OutputStream out = new FileOutputStream(output);
-		final CompressorOutputStream cos = new CompressorStreamFactory().createCompressorOutputStream("bzip2", out);
-		FileInputStream in = new FileInputStream(input);
-		IOUtils.copy(in, cos);
-		cos.close();
-		in.close();
+	public void xtestBzipCreation()  throws Exception {
+	    File output = null;
+	    final File input = getFile("test.txt");
+	    {
+    		output = new File(dir, "test.txt.bz2");
+    		final OutputStream out = new FileOutputStream(output);
+    		final CompressorOutputStream cos = new CompressorStreamFactory().createCompressorOutputStream("bzip2", out);
+    		FileInputStream in = new FileInputStream(input);
+    		IOUtils.copy(in, cos);
+    		cos.close();
+    		in.close();
+		}
+		
+	    final File decompressed = new File(dir, "decompressed.txt");
+		{
+		    final File toDecompress = output;
+	        final InputStream is = new FileInputStream(toDecompress);
+	        final CompressorInputStream in = 
+	            new CompressorStreamFactory().createCompressorInputStream("bzip2", is);
+	        FileOutputStream os = new FileOutputStream(decompressed);
+	        IOUtils.copy(in, os);
+	        is.close();
+	        os.close();
+		}
+		
+		assertEquals(input.length(),decompressed.length());
 	}
 	
 	public void testBzip2Unarchive() throws Exception {
