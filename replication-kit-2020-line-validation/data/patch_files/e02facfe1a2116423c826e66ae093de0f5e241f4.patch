From e02facfe1a2116423c826e66ae093de0f5e241f4 Mon Sep 17 00:00:00 2001
From: Maarten Coene <maartenc@apache.org>
Date: Thu, 3 Jun 2010 21:31:05 +0000
Subject: [PATCH] Don't check content length if content encoding was "gzip"
 (IVY-1194)

git-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@951171 13f79535-47bb-0310-9956-ffa450edef68
---
 src/java/org/apache/ivy/util/url/BasicURLHandler.java | 1 +
 1 file changed, 1 insertion(+)

diff --git a/src/java/org/apache/ivy/util/url/BasicURLHandler.java b/src/java/org/apache/ivy/util/url/BasicURLHandler.java
index 9f67e920b..58e0ec059 100644
--- a/src/java/org/apache/ivy/util/url/BasicURLHandler.java
+++ b/src/java/org/apache/ivy/util/url/BasicURLHandler.java
@@ -168,6 +168,7 @@ public void download(URL src, File dest, CopyProgressListener l) throws IOExcept
             InputStream inStream;
             if ("gzip".equals(srcConn.getContentEncoding())) {
                 inStream = new GZIPInputStream(srcConn.getInputStream());
+                contentLength = -1;
             } else {
                 inStream = srcConn.getInputStream();
             }
