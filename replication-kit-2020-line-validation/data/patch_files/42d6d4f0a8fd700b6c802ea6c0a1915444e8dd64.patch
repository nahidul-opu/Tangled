From 42d6d4f0a8fd700b6c802ea6c0a1915444e8dd64 Mon Sep 17 00:00:00 2001
From: Xavier Hanin <xavier@apache.org>
Date: Wed, 1 Oct 2008 14:50:18 +0000
Subject: [PATCH] FIX: NullPointerException in AbstractPatternsBasedResolver
 when organization is null (IVY-928)

git-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@700798 13f79535-47bb-0310-9956-ffa450edef68
---
 CHANGES.txt                                                     | 1 +
 .../ivy/plugins/resolver/AbstractPatternsBasedResolver.java     | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/CHANGES.txt b/CHANGES.txt
index 7e7bbb529..d6cb99355 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -84,6 +84,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br
 - IMPROVEMENT: Error messages on use of relative paths can be cyrptic (IVY-909)
 - IMPROVEMENT: Maven accepts illegal XML for its pom's, Ivy not (IVY-921)
 
+- FIX: NullPointerException in AbstractPatternsBasedResolver when organization is null (IVY-928)
 - FIX: NullPointerException when Ivy cannot locate pom parent (IVY-927)
 - FIX: Cannot configure items with java.io.File attributes (IVY-905)
 - FIX: Environment properties in ivy settings are no longer resolved (IVY-907)
diff --git a/src/java/org/apache/ivy/plugins/resolver/AbstractPatternsBasedResolver.java b/src/java/org/apache/ivy/plugins/resolver/AbstractPatternsBasedResolver.java
index 656dad147..d7dfa8bf5 100644
--- a/src/java/org/apache/ivy/plugins/resolver/AbstractPatternsBasedResolver.java
+++ b/src/java/org/apache/ivy/plugins/resolver/AbstractPatternsBasedResolver.java
@@ -438,7 +438,7 @@ public void setM2compatible(boolean compatible) {
     }
 
     protected ModuleRevisionId convertM2IdForResourceSearch(ModuleRevisionId mrid) {
-        if (mrid.getOrganisation().indexOf('.') == -1) {
+        if (mrid.getOrganisation() == null || mrid.getOrganisation().indexOf('.') == -1) {
             return mrid;
         }
         return ModuleRevisionId.newInstance(mrid.getOrganisation().replace('.', '/'), 
