From 31fd31d27c662f225c9d0045f4d34a90b4d9a3e3 Mon Sep 17 00:00:00 2001
From: Maarten Coene <maartenc@apache.org>
Date: Fri, 23 Oct 2009 22:22:04 +0000
Subject: [PATCH] FIX: IvyNodeEviction.cleanEvicted has bad comparison logic
 (IVY-1118)

git-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@829264 13f79535-47bb-0310-9956-ffa450edef68
---
 src/java/org/apache/ivy/core/resolve/IvyNodeEviction.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/java/org/apache/ivy/core/resolve/IvyNodeEviction.java b/src/java/org/apache/ivy/core/resolve/IvyNodeEviction.java
index 69708dcb9..b1f2243c8 100644
--- a/src/java/org/apache/ivy/core/resolve/IvyNodeEviction.java
+++ b/src/java/org/apache/ivy/core/resolve/IvyNodeEviction.java
@@ -307,7 +307,7 @@ private void cleanEvicted() {
             if (sel != null) {
                 for (Iterator iterator = sel.iterator(); iterator.hasNext();) {
                     IvyNode n = (IvyNode) iterator.next();
-                    if (n.getRealNode().equals(this)) {
+                    if (n.getRealNode().equals(node)) {
                         // yes, we are the real node for a selected one !
                         // we are no more evicted in this conf !
                         iter.remove();
