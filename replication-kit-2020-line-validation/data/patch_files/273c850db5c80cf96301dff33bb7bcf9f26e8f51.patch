From 273c850db5c80cf96301dff33bb7bcf9f26e8f51 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?J=C3=B6rn=20Kottmann?= <joern@apache.org>
Date: Thu, 15 Mar 2012 14:55:21 +0000
Subject: [PATCH] OPENNLP-474 Fixed broken cross validation.

git-svn-id: https://svn.apache.org/repos/asf/opennlp/trunk@1301021 13f79535-47bb-0310-9956-ffa450edef68
---
 .../tools/formats/NameSampleDataStreamFactory.java       | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

diff --git a/opennlp-tools/src/main/java/opennlp/tools/formats/NameSampleDataStreamFactory.java b/opennlp-tools/src/main/java/opennlp/tools/formats/NameSampleDataStreamFactory.java
index 7918b87ab..387d8ad77 100644
--- a/opennlp-tools/src/main/java/opennlp/tools/formats/NameSampleDataStreamFactory.java
+++ b/opennlp-tools/src/main/java/opennlp/tools/formats/NameSampleDataStreamFactory.java
@@ -17,7 +17,7 @@
 
 package opennlp.tools.formats;
 
-import java.io.InputStreamReader;
+import java.io.FileInputStream;
 
 import opennlp.tools.cmdline.ArgumentParser;
 import opennlp.tools.cmdline.CmdLineUtil;
@@ -50,10 +50,11 @@ public ObjectStream<NameSample> create(String[] args) {
     language = params.getLang();
 
     CmdLineUtil.checkInputFile("Data", params.getData());
+    
+    FileInputStream sampleDataIn = CmdLineUtil.openInFile(params.getData());
 
-    ObjectStream<String> lineStream;
-    lineStream = new PlainTextByLineStream(new InputStreamReader(
-        CmdLineUtil.openInFile(params.getData()), params.getEncoding()));
+    ObjectStream<String> lineStream = new PlainTextByLineStream(sampleDataIn.getChannel(),
+        params.getEncoding());
 
     return new NameSampleDataStream(lineStream);
   }
