From 2521f29eb6a72a20f339d3ae0c446bc617345eed Mon Sep 17 00:00:00 2001
From: Maarten Coene <maartenc@apache.org>
Date: Sun, 1 Aug 2010 22:33:59 +0000
Subject: [PATCH] FIX: artifactreport ant task doesn't honor log attribute
 (IVY-1212)

git-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@981333 13f79535-47bb-0310-9956-ffa450edef68
---
 CHANGES.txt                                        |  1 +
 src/java/org/apache/ivy/ant/IvyArtifactReport.java | 13 ++++++++++---
 2 files changed, 11 insertions(+), 3 deletions(-)

diff --git a/CHANGES.txt b/CHANGES.txt
index 7d1714794..4140ab48d 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -113,6 +113,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br
 - IMPROVEMENT: Use IvyAuthenticator only when it is really necessary (IVY-1211)
 - IMPROVEMENT: ivy:makepom now accepts a list of configurations to include (IVY-1005) (thanks to Jesper Pedersen)
 
+- FIX: artifactreport ant task doesn't honor log attribute (IVY-1212)
 - FIX: XmlModuleDescriptorWriter does not write the transitive attribute (IVY-1207) (thanks to Abel Muino)
 - FIX: Ivy info/extends/extendsType attribute is misspelled by XmlModuleDescriptorWriter (IVY-1203) (thanks to Jason Trump)
 
diff --git a/src/java/org/apache/ivy/ant/IvyArtifactReport.java b/src/java/org/apache/ivy/ant/IvyArtifactReport.java
index 905c230df..5dc05fb40 100644
--- a/src/java/org/apache/ivy/ant/IvyArtifactReport.java
+++ b/src/java/org/apache/ivy/ant/IvyArtifactReport.java
@@ -93,13 +93,20 @@ public void doExecute() throws BuildException {
             }
             IvyNode[] dependencies = getIvyInstance().getResolveEngine().getDependencies(
                 md,
-                new ResolveOptions().setConfs(confs).setResolveId(
-                    getResolveId()).setValidate(doValidate(getSettings())), null);
+                ((ResolveOptions) new ResolveOptions()
+                        .setLog(getLog()))
+                        .setConfs(confs)
+                        .setResolveId(getResolveId())
+                        .setValidate(doValidate(getSettings())),
+                null);
 
             Map artifactsToCopy = getIvyInstance().getRetrieveEngine().determineArtifactsToCopy(
                 ModuleRevisionId.newInstance(getOrganisation(), getModule(), getRevision()),
                 pattern,
-                new RetrieveOptions().setConfs(confs).setResolveId(getResolveId()));
+                ((RetrieveOptions) new RetrieveOptions()
+                        .setLog(getLog()))
+                        .setConfs(confs)
+                        .setResolveId(getResolveId()));
 
             Map moduleRevToArtifactsMap = new HashMap();
             for (Iterator iter = artifactsToCopy.keySet().iterator(); iter.hasNext();) {
