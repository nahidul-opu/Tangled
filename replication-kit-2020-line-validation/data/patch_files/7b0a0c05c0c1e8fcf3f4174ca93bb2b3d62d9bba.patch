From 7b0a0c05c0c1e8fcf3f4174ca93bb2b3d62d9bba Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?J=C3=B6rn=20Kottmann?= <joern@apache.org>
Date: Tue, 7 Apr 2015 12:00:57 +0000
Subject: [PATCH] OPENNLP-751 Corrected default beam size (copy and paste
 error) and beam size is now included in model

git-svn-id: https://svn.apache.org/repos/asf/opennlp/trunk@1671823 13f79535-47bb-0310-9956-ffa450edef68
---
 .../src/main/java/opennlp/tools/chunker/ChunkerME.java       | 5 ++---
 .../src/main/java/opennlp/tools/chunker/ChunkerModel.java    | 3 +--
 2 files changed, 3 insertions(+), 5 deletions(-)

diff --git a/opennlp-tools/src/main/java/opennlp/tools/chunker/ChunkerME.java b/opennlp-tools/src/main/java/opennlp/tools/chunker/ChunkerME.java
index 1df4a6090..d0534fc32 100644
--- a/opennlp-tools/src/main/java/opennlp/tools/chunker/ChunkerME.java
+++ b/opennlp-tools/src/main/java/opennlp/tools/chunker/ChunkerME.java
@@ -31,7 +31,6 @@
 import opennlp.tools.ml.model.MaxentModel;
 import opennlp.tools.ml.model.SequenceClassificationModel;
 import opennlp.tools.ml.model.TrainUtil;
-import opennlp.tools.namefind.NameFinderME;
 import opennlp.tools.postag.POSSampleSequenceStream;
 import opennlp.tools.util.ObjectStream;
 import opennlp.tools.util.Sequence;
@@ -199,7 +198,7 @@ public static ChunkerModel train(String lang, ObjectStream<ChunkSample> in,
 
     String beamSizeString = mlParams.getSettings().get(BeamSearch.BEAM_SIZE_PARAMETER);
 
-    int beamSize = NameFinderME.DEFAULT_BEAM_SIZE;
+    int beamSize = ChunkerME.DEFAULT_BEAM_SIZE;
     if (beamSizeString != null) {
       beamSize = Integer.parseInt(beamSizeString);
     }
@@ -232,7 +231,7 @@ else if (TrainerType.SEQUENCE_TRAINER.equals(trainerType)) {
     }
 
     if (chunkerModel != null) {
-      return new ChunkerModel(lang, chunkerModel, manifestInfoEntries, factory);
+      return new ChunkerModel(lang, chunkerModel, beamSize, manifestInfoEntries, factory);
     }
     else {
       return new ChunkerModel(lang, seqChunkerModel, manifestInfoEntries, factory);
diff --git a/opennlp-tools/src/main/java/opennlp/tools/chunker/ChunkerModel.java b/opennlp-tools/src/main/java/opennlp/tools/chunker/ChunkerModel.java
index e872230ac..c677cd50e 100644
--- a/opennlp-tools/src/main/java/opennlp/tools/chunker/ChunkerModel.java
+++ b/opennlp-tools/src/main/java/opennlp/tools/chunker/ChunkerModel.java
@@ -34,7 +34,6 @@
 import opennlp.tools.ml.model.GenericModelReader;
 import opennlp.tools.ml.model.MaxentModel;
 import opennlp.tools.ml.model.SequenceClassificationModel;
-import opennlp.tools.namefind.NameFinderME;
 import opennlp.tools.util.BaseToolFactory;
 import opennlp.tools.util.InvalidFormatException;
 import opennlp.tools.util.model.BaseModel;
@@ -136,7 +135,7 @@ public SequenceClassificationModel<String> getChunkerSequenceModel() {
     if (artifactMap.get(CHUNKER_MODEL_ENTRY_NAME) instanceof MaxentModel) {
       String beamSizeString = manifest.getProperty(BeamSearch.BEAM_SIZE_PARAMETER);
 
-      int beamSize = NameFinderME.DEFAULT_BEAM_SIZE;
+      int beamSize = ChunkerME.DEFAULT_BEAM_SIZE;
       if (beamSizeString != null) {
         beamSize = Integer.parseInt(beamSizeString);
       }
