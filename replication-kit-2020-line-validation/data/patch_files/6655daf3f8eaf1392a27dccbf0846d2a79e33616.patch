From 6655daf3f8eaf1392a27dccbf0846d2a79e33616 Mon Sep 17 00:00:00 2001
From: Rory Winston <rwinston@apache.org>
Date: Sat, 4 Apr 2009 18:29:29 +0000
Subject: [PATCH] NET-262: Throw an exception if netmask bits are not in (0,x]

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/net/branches/NET_2_0@761980 13f79535-47bb-0310-9956-ffa450edef68
---
 src/main/java/examples/SubnetUtilsExample.java             | 6 +++---
 src/main/java/org/apache/commons/net/util/SubnetUtils.java | 2 +-
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/src/main/java/examples/SubnetUtilsExample.java b/src/main/java/examples/SubnetUtilsExample.java
index e5d726347..53adb6ebc 100644
--- a/src/main/java/examples/SubnetUtilsExample.java
+++ b/src/main/java/examples/SubnetUtilsExample.java
@@ -30,7 +30,7 @@
 public class SubnetUtilsExample {
     
     public static void main(String[] args) {
-        String subnet = "192.168.0.1/29";
+        String subnet = "192.168.0.3/31";
         SubnetUtils utils = new SubnetUtils(subnet);
         SubnetInfo info = utils.getInfo();
         
@@ -48,9 +48,9 @@ public static void main(String[] args) {
                 Integer.toBinaryString(info.asInteger(info.getNetworkAddress())));
         System.out.printf("Broadcast Address:\t\t%s\t[%s]\n", info.getBroadcastAddress(), 
                 Integer.toBinaryString(info.asInteger(info.getBroadcastAddress())));
-        System.out.printf("First Usable Address:\t\t%s\t[%s]\n", info.getLowAddress(), 
+        System.out.printf("Low Address:\t\t\t%s\t[%s]\n", info.getLowAddress(), 
                 Integer.toBinaryString(info.asInteger(info.getLowAddress())));
-        System.out.printf("Last Usable Address:\t\t%s\t[%s]\n", info.getHighAddress(), 
+        System.out.printf("High Address:\t\t\t%s\t[%s]\n", info.getHighAddress(), 
                 Integer.toBinaryString(info.asInteger(info.getHighAddress())));
         
         System.out.printf("Total usable addresses: \t%d\n", info.getAddressCount());
diff --git a/src/main/java/org/apache/commons/net/util/SubnetUtils.java b/src/main/java/org/apache/commons/net/util/SubnetUtils.java
index d339015f2..bb7b61d84 100644
--- a/src/main/java/org/apache/commons/net/util/SubnetUtils.java
+++ b/src/main/java/org/apache/commons/net/util/SubnetUtils.java
@@ -199,7 +199,7 @@ private String format(int[] octets) {
      * Convenience function to check integer boundaries
      */
     private int rangeCheck(int value, int begin, int end) {
-        if (value >= begin && value <= end)
+        if (value > begin && value <= end) // (0,nbits]
             return value;
 
         throw new IllegalArgumentException("Value out of range: [" + value + "]");
