From 1a7a3fd2c9694d301b26f7ad3005b7454b6034ee Mon Sep 17 00:00:00 2001
From: Xavier Hanin <xavier@apache.org>
Date: Thu, 7 Sep 2006 13:49:19 +0000
Subject: [PATCH] FIX: StackOverflowException with complex circular
 dependencies (IVY-288)

git-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/trunk@484507 13f79535-47bb-0310-9956-ffa450edef68
---
 src/java/fr/jayasoft/ivy/IvyNode.java | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/src/java/fr/jayasoft/ivy/IvyNode.java b/src/java/fr/jayasoft/ivy/IvyNode.java
index e20250ffe..3673210ab 100644
--- a/src/java/fr/jayasoft/ivy/IvyNode.java
+++ b/src/java/fr/jayasoft/ivy/IvyNode.java
@@ -1028,6 +1028,11 @@ private Collection findPath(ModuleId from, IvyNode node, List path) {
     	if (parent == null) {
     		throw new IllegalArgumentException("no path from "+from+" to "+getId()+" found");
     	}
+    	if (path.contains(parent)) {
+        	path.add(0, parent);
+    		Message.verbose("circular dependency found while looking for the path for another one: was looking for "+from+" as a caller of "+path.get(path.size()-1));
+    		return path;
+    	}
     	path.add(0, parent);
     	if (parent.getId().getModuleId().equals(from)) {
     		return path;
