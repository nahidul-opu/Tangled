From 06d01a0834070c4c0939d3ebfdcd118a3ab38150 Mon Sep 17 00:00:00 2001
From: Xavier Hanin <xavier@apache.org>
Date: Fri, 30 Mar 2007 17:42:23 +0000
Subject: [PATCH] FIX: Ivy standalone is passing null args to main method when
 invoking with no args (IVY-457)

git-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/core/trunk@524201 13f79535-47bb-0310-9956-ffa450edef68
---
 CHANGES.txt                       | 1 +
 src/java/org/apache/ivy/Main.java | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/CHANGES.txt b/CHANGES.txt
index d92cbb385..0d90e421c 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -58,6 +58,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br
 - IMPROVE: New "modules in use" section in console report at the end of resolve (IVY-373) (thanks to John Wiliams)
 - IMPROVE: Generated XML reports now contains more information about the resolved module (IVY-446)
 
+- FIX: Ivy standalone is passing null args to main method when invoking with no args (IVY-457)
 - FIX: Invalid error report with m2compatible resolver (IVY-456)
 - FIX: IvyPostResolve Task doesn't use specified cache for the resolve (IVY-453)
 - FIX: XmlModuleDescriptorWriterTest not working with Java 6 (IVY-374)
diff --git a/src/java/org/apache/ivy/Main.java b/src/java/org/apache/ivy/Main.java
index 21863d6c1..fac30e04d 100644
--- a/src/java/org/apache/ivy/Main.java
+++ b/src/java/org/apache/ivy/Main.java
@@ -424,7 +424,7 @@ private static void invoke(Ivy ivy, File cache, ModuleDescriptor md, String[] co
         	Method mainMethod = c.getMethod("main", new Class[] { String[].class });
         	
         	// Split up arguments 
-        	mainMethod.invoke(null, new Object[] { args });
+        	mainMethod.invoke(null, new Object[] { (args == null ? new String[0] : args) });
         } catch (ClassNotFoundException cnfe) {
         	throw new RuntimeException("Could not find class: " + mainclass, cnfe);
         } catch (SecurityException e) {
