From 0a98144b0eb8f2fe1dcab07573f281c096a3d941 Mon Sep 17 00:00:00 2001
From: Oliver Heger <oheger@apache.org>
Date: Wed, 6 Apr 2011 19:13:31 +0000
Subject: [PATCH] [CONFIGURATION-444] Added a test case.

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/configuration/trunk@1089591 13f79535-47bb-0310-9956-ffa450edef68
---
 .../TestHierarchicalConfiguration.java             | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

diff --git a/src/test/org/apache/commons/configuration/TestHierarchicalConfiguration.java b/src/test/org/apache/commons/configuration/TestHierarchicalConfiguration.java
index f6043f03ed..61321c6b88 100644
--- a/src/test/org/apache/commons/configuration/TestHierarchicalConfiguration.java
+++ b/src/test/org/apache/commons/configuration/TestHierarchicalConfiguration.java
@@ -906,6 +906,20 @@ public void testInterpolationSubset()
         InterpolationTestHelper.testInterpolationSubset(config);
     }
 
+    /**
+     * Tests whether interpolation with a subset configuration works over
+     * multiple layers.
+     */
+    public void testInterpolationSubsetMultipleLayers()
+    {
+        config.clear();
+        config.addProperty("var", "value");
+        config.addProperty("prop2.prop[@attr]", "${var}");
+        Configuration sub1 = config.subset("prop2");
+        Configuration sub2 = sub1.subset("prop");
+        assertEquals("Wrong value", "value", sub2.getString("[@attr]"));
+    }
+
     /**
      * Tests interpolation of a variable, which cannot be resolved.
      */
