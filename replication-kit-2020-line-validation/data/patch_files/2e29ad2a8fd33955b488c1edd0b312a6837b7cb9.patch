From 2e29ad2a8fd33955b488c1edd0b312a6837b7cb9 Mon Sep 17 00:00:00 2001
From: Matthew Jason Benson <mbenson@apache.org>
Date: Wed, 14 Oct 2009 14:16:50 +0000
Subject: [PATCH] [COLLECTIONS-340]

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/collections/trunk@825148 13f79535-47bb-0310-9956-ffa450edef68
---
 .../commons/collections/functors/NOPClosure.java       | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

diff --git a/src/java/org/apache/commons/collections/functors/NOPClosure.java b/src/java/org/apache/commons/collections/functors/NOPClosure.java
index c8443198c6..789193e8b9 100644
--- a/src/java/org/apache/commons/collections/functors/NOPClosure.java
+++ b/src/java/org/apache/commons/collections/functors/NOPClosure.java
@@ -38,7 +38,7 @@ public class NOPClosure<E> implements Closure<E>, Serializable {
 
     /**
      * Factory returning the singleton instance.
-     * 
+     *
      * @return the singleton instance
      * @since Commons Collections 3.1
      */
@@ -56,7 +56,7 @@ private NOPClosure() {
 
     /**
      * Do nothing.
-     * 
+     *
      * @param input  the input object
      */
     public void execute(E input) {
@@ -68,6 +68,12 @@ public void execute(E input) {
      */
     @Override
     public boolean equals(Object arg0) {
+        if (arg0 == this) {
+            return true;
+        }
+        if (arg0 instanceof NOPClosure == false) {
+            return false;
+        }
         return arg0.hashCode() == this.hashCode();
     }
 
