From 7ab2d5be0b4abda6971f50d2002c3c615c770b29 Mon Sep 17 00:00:00 2001
From: Xavier Hanin <xavier@apache.org>
Date: Thu, 12 Jun 2008 10:31:27 +0000
Subject: [PATCH] FIX: Ivy unit tests fail because 'classifier' attribute of
 'artifacts' element is missing in ivy.xsd (IVY-837)

git-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@667034 13f79535-47bb-0310-9956-ffa450edef68
---
 CHANGES.txt                                                   | 1 +
 .../ivy/plugins/parser/m2/PomModuleDescriptorBuilder.java     | 4 ++--
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/CHANGES.txt b/CHANGES.txt
index 43ce9e762..73f4d2852 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -86,6 +86,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br
 - IMPROVEMENT: Change allownomd and skipbuildwithoutivy into a more semantically correct name (IVY-297)
 - IMPROVEMENT: Smarter determination if an expression is exact or not for RegexpPatternMatcher and GlobPatternMatcher
 
+- FIX: Ivy unit tests fail because 'classifier' attribute of 'artifacts' element is missing in ivy.xsd (IVY-837)
 - FIX: Ivy build system: fix build.xml to allow "ant coverage-report" behind a proxy (IVY-832)
 - FIX: NPE in AbstractResolver.exists() if a resource cannot be found (IVY-831)
 - FIX: Ivy distribution jars contains duplicate entries (IVY-828)
diff --git a/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorBuilder.java b/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorBuilder.java
index 75d324a27..12d5dea7d 100644
--- a/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorBuilder.java
+++ b/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorBuilder.java
@@ -483,13 +483,13 @@ public void addProperty(String propertyName, String value) {
     public Artifact getSourceArtifact() {
         return new MDArtifact(
             ivyModuleDescriptor, mrid.getName(), "source", "jar", 
-            null, Collections.singletonMap("classifier", "sources"));
+            null, Collections.singletonMap("m:classifier", "sources"));
     }
 
     public Artifact getJavadocArtifact() {
         return new MDArtifact(
             ivyModuleDescriptor, mrid.getName(), "javadoc", "jar", 
-            null, Collections.singletonMap("classifier", "javadoc"));
+            null, Collections.singletonMap("m:classifier", "javadoc"));
     }
 
     public void addSourceArtifact() {
