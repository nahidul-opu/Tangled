From 67dae23ac992d38dc0e86fcd0ff04cd9af9ec85e Mon Sep 17 00:00:00 2001
From: Niall Pemberton <niallp@apache.org>
Date: Tue, 4 Aug 2009 00:37:09 +0000
Subject: [PATCH] BEANUTILS-336 Fix NullPointerException and only catch
 ClassNotFoundException rather than throwable - thanks to Sebb

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/beanutils/trunk@800643 13f79535-47bb-0310-9956-ffa450edef68
---
 .../apache/commons/beanutils/MappedPropertyDescriptor.java   | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/java/org/apache/commons/beanutils/MappedPropertyDescriptor.java b/src/java/org/apache/commons/beanutils/MappedPropertyDescriptor.java
index b16102695..a8c65af49 100644
--- a/src/java/org/apache/commons/beanutils/MappedPropertyDescriptor.java
+++ b/src/java/org/apache/commons/beanutils/MappedPropertyDescriptor.java
@@ -491,15 +491,16 @@ private Class reLoadClass() {
             if (classLoader != null) {
                 try {
                     return classLoader.loadClass(className);
-                } catch (Throwable t) {
+                } catch (ClassNotFoundException e) {
                     // ignore
                 }
             }
 
             // Try this class's class loader
+            classLoader = MappedPropertyDescriptor.class.getClassLoader();
             try {
                 return classLoader.loadClass(className);
-            } catch (Throwable t) {
+            } catch (ClassNotFoundException e) {
                 return null;
             }
         }
