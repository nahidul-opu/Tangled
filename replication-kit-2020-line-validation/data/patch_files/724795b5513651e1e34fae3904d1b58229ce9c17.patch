From 724795b5513651e1e34fae3904d1b58229ce9c17 Mon Sep 17 00:00:00 2001
From: Luc Maisonobe <luc@apache.org>
Date: Fri, 22 Mar 2013 18:55:58 +0000
Subject: [PATCH] Fixed Complex.reciprocal() for zero argument.

JIRA: MATH-934

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/math/trunk@1459927 13f79535-47bb-0310-9956-ffa450edef68
---
 src/changes/changes.xml                                        | 3 +++
 src/main/java/org/apache/commons/math3/complex/Complex.java    | 2 +-
 .../java/org/apache/commons/math3/complex/ComplexTest.java     | 2 +-
 3 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index 28e5acc548..b1fe6ecfc5 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -55,6 +55,9 @@ This is a minor release: It combines bug fixes and new features.
   Changes to existing features were made in a backwards-compatible
   way such as to allow drop-in replacement of the v3.1[.1] JAR file.
 ">
+      <action dev="luc" type="fix" issue="MATH-934">
+        Fixed Complex.reciprocal() for zero argument.
+      </action>
       <action dev="luc" type="update" issue="MATH-951" due-to="Charles Cooper">
         Improved speed of FastMath copysign methods.
       </action>
diff --git a/src/main/java/org/apache/commons/math3/complex/Complex.java b/src/main/java/org/apache/commons/math3/complex/Complex.java
index 22b23f24e4..ac8185b174 100644
--- a/src/main/java/org/apache/commons/math3/complex/Complex.java
+++ b/src/main/java/org/apache/commons/math3/complex/Complex.java
@@ -302,7 +302,7 @@ public Complex reciprocal() {
         }
 
         if (real == 0.0 && imaginary == 0.0) {
-            return NaN;
+            return INF;
         }
 
         if (isInfinite) {
diff --git a/src/test/java/org/apache/commons/math3/complex/ComplexTest.java b/src/test/java/org/apache/commons/math3/complex/ComplexTest.java
index 25c1a92a6e..26465492be 100644
--- a/src/test/java/org/apache/commons/math3/complex/ComplexTest.java
+++ b/src/test/java/org/apache/commons/math3/complex/ComplexTest.java
@@ -331,7 +331,7 @@ public void testReciprocalInf() {
 
     @Test
     public void testReciprocalZero() {
-        Assert.assertEquals(Complex.ZERO.reciprocal(), Complex.NaN);
+        Assert.assertEquals(Complex.ZERO.reciprocal(), Complex.INF);
     }
 
     @Test
