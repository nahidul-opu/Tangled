From 8e5ca50b8b5f47f3fb41fab5db07b9d7805628b3 Mon Sep 17 00:00:00 2001
From: Maarten Coene <maartenc@apache.org>
Date: Tue, 23 Sep 2008 20:03:04 +0000
Subject: [PATCH] FIX: Ivy can't handle bare POM ${groupId} property (IVY-913)
 (thanks to Tom Widmer)

git-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@698324 13f79535-47bb-0310-9956-ffa450edef68
---
 CHANGES.txt                                                     | 2 ++
 .../apache/ivy/plugins/parser/m2/PomModuleDescriptorParser.java | 2 ++
 2 files changed, 4 insertions(+)

diff --git a/CHANGES.txt b/CHANGES.txt
index 03b557c9d..8bc7301c9 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -71,6 +71,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br
 	Jason Trump
 	Tjeerd Verhagen
 	James P. White
+	Tom Widmer
 	John Williams
 	Patrick Woodworth
 	Jaroslaw Wypychowski
@@ -84,6 +85,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br
 - FIX: Cannot configure items with java.io.File attributes (IVY-905)
 - FIX: Environment properties in ivy settings are no longer resolved (IVY-907)
 - FIX: Resolve failed on certain proxy environment (IVY-911)
+- FIX: Ivy can't handle bare POM ${groupId} property (IVY-913) (thanks to Tom Widmer)
 
    2.0.0-rc1
 =====================================
diff --git a/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorParser.java b/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorParser.java
index b2adc9b04..212d4997d 100644
--- a/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorParser.java
+++ b/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorParser.java
@@ -190,8 +190,10 @@ public ModuleDescriptor parseDescriptor(ParserSettings ivySettings, URL descript
             } else {                            
                 domReader.setProperty("project.groupId", groupId);
                 domReader.setProperty("pom.groupId", groupId);
+                domReader.setProperty("groupId", groupId);
                 domReader.setProperty("project.artifactId", artifactId);
                 domReader.setProperty("pom.artifactId", artifactId);
+                domReader.setProperty("artifactId", artifactId);
                 domReader.setProperty("project.version", version);
                 domReader.setProperty("pom.version", version);
                 domReader.setProperty("version", version);
