From ac37d8d64c3f5aeb0032f420ea976712947f2cc6 Mon Sep 17 00:00:00 2001
From: Sebastian Bazley <sebb@apache.org>
Date: Sat, 11 Mar 2017 12:33:03 +0000
Subject: [PATCH] NET-584: Forgot to write debug code to SVN ...

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/net/trunk@1786505 13f79535-47bb-0310-9956-ffa450edef68
---
 .../java/org/apache/commons/net/ftp/FTPClient.java    | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

diff --git a/src/main/java/org/apache/commons/net/ftp/FTPClient.java b/src/main/java/org/apache/commons/net/ftp/FTPClient.java
index bec47d156..9bf723ae1 100644
--- a/src/main/java/org/apache/commons/net/ftp/FTPClient.java
+++ b/src/main/java/org/apache/commons/net/ftp/FTPClient.java
@@ -643,7 +643,8 @@ private boolean __storeFile(FTPCmd command, String remote, InputStream local)
      * @since 3.1
      * @param command the command to send
      * @param remote the remote file name
-     * @param local the local file name
+     * @param local The local InputStream from which to read the data to
+     *                be written/appended to the remote file.
      * @return true if successful
      * @throws IOException on error
      */
@@ -1888,7 +1889,7 @@ public boolean retrieveFile(String remote, OutputStream local)
     /**
      * @param command the command to get
      * @param remote the remote file name
-     * @param local the local file name
+     * @param local The local OutputStream to which to write the file.
      * @return true if successful
      * @throws IOException on error
      * @since 3.1
@@ -3895,10 +3896,16 @@ public void bytesTransferred(long totalBytesTransferred,
         }
 
         void cleanUp() throws IOException {
+            if (notAcked > 0) { // TODO remove this before next release!
+                System.err.println("NET-584: notAcked=" + notAcked);
+            }
             try {
                 while(notAcked-- > 0) {
                     parent.__getReplyNoReport();
                 }
+            } catch (SocketTimeoutException e) { // NET-584
+                System.err.println("NET-584: ignoring " + e.getMessage()); // TODO remove print before release!
+                // ignored
             } finally {
                 parent.setSoTimeout(currentSoTimeout);
             }
