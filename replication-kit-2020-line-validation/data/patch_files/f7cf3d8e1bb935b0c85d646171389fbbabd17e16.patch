From f7cf3d8e1bb935b0c85d646171389fbbabd17e16 Mon Sep 17 00:00:00 2001
From: Maarten Coene <maartenc@apache.org>
Date: Mon, 16 Nov 2009 22:55:31 +0000
Subject: [PATCH] Added unit tests for IVY-956

git-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@881024 13f79535-47bb-0310-9956-ffa450edef68
---
 .../apache/ivy/core/resolve/ResolveTest.java  | 40 ++++++++++++++++-
 .../ivy-extra-att-multipledependencies.xml    | 40 +++++++++++++++++
 .../ivy-extra-att-multipledependencies2.xml   | 40 +++++++++++++++++
 .../CAE-VSK/VSK-FC/0.53.0.1/ivy-0.53.0.1.xml  | 44 +++++++++++++++++++
 .../CAE-VSK/VSK-FC/0.54.0.0/ivy-0.54.0.0.xml  | 44 +++++++++++++++++++
 .../CAE-VSK/VSK-FC/0.54.1.0/ivy-0.54.1.0.xml  | 44 +++++++++++++++++++
 .../CAE-VSK/VSK-FC/0.53.0.1/ivy-0.53.0.1.xml  | 44 +++++++++++++++++++
 .../CAE-VSK/VSK-FC/0.54.0.0/ivy-0.54.0.0.xml  | 44 +++++++++++++++++++
 .../CAE-VSK/VSK-FC/0.54.1.0/ivy-0.54.1.0.xml  | 44 +++++++++++++++++++
 .../ivysettings-filerepo-attribs.xml          | 34 ++++++++++++++
 .../ivysettings-filerepo-noattribs.xml        | 34 ++++++++++++++
 11 files changed, 451 insertions(+), 1 deletion(-)
 create mode 100644 test/java/org/apache/ivy/core/resolve/ivy-extra-att-multipledependencies.xml
 create mode 100644 test/java/org/apache/ivy/core/resolve/ivy-extra-att-multipledependencies2.xml
 create mode 100644 test/repositories/extra-attributes-multipledependencies/filerepo-attribs/CAE-VSK/VSK-FC/0.53.0.1/ivy-0.53.0.1.xml
 create mode 100644 test/repositories/extra-attributes-multipledependencies/filerepo-attribs/CAE-VSK/VSK-FC/0.54.0.0/ivy-0.54.0.0.xml
 create mode 100644 test/repositories/extra-attributes-multipledependencies/filerepo-attribs/CAE-VSK/VSK-FC/0.54.1.0/ivy-0.54.1.0.xml
 create mode 100644 test/repositories/extra-attributes-multipledependencies/filerepo-noattribs/CAE-VSK/VSK-FC/0.53.0.1/ivy-0.53.0.1.xml
 create mode 100644 test/repositories/extra-attributes-multipledependencies/filerepo-noattribs/CAE-VSK/VSK-FC/0.54.0.0/ivy-0.54.0.0.xml
 create mode 100644 test/repositories/extra-attributes-multipledependencies/filerepo-noattribs/CAE-VSK/VSK-FC/0.54.1.0/ivy-0.54.1.0.xml
 create mode 100644 test/repositories/extra-attributes-multipledependencies/ivysettings-filerepo-attribs.xml
 create mode 100644 test/repositories/extra-attributes-multipledependencies/ivysettings-filerepo-noattribs.xml

diff --git a/test/java/org/apache/ivy/core/resolve/ResolveTest.java b/test/java/org/apache/ivy/core/resolve/ResolveTest.java
index f93b10585..ff81f6ff6 100644
--- a/test/java/org/apache/ivy/core/resolve/ResolveTest.java
+++ b/test/java/org/apache/ivy/core/resolve/ResolveTest.java
@@ -4944,7 +4944,45 @@ public void testNoAttributesForcedDependencies() throws Exception {
         assertEquals(ModuleRevisionId.newInstance("CAE-Visualization-Components",
             "SGL", "MAIN", "6.2.34.7"), dds[1]
                 .getDependencyRevisionId());
-        
+    }
+
+    public void testExtraAttributesMultipleDependenciesHang() throws Exception {
+        Ivy ivy = new Ivy();
+        ivy.configure(new File("test/repositories/extra-attributes-multipledependencies/ivysettings-filerepo-attribs.xml"));
+        ivy.getSettings().setDefaultCache(cache);
+
+        ResolveReport report = ivy.resolve(ResolveTest.class.getResource("ivy-extra-att-multipledependencies.xml"),
+            getResolveOptions(ivy.getSettings(), new String[] {"*"}).setValidate(false));
+        assertFalse(report.hasError());
+    }
+    
+    public void testExtraAttributesMultipleDependenciesNoHang() throws Exception {
+        Ivy ivy = new Ivy();
+        ivy.configure(new File("test/repositories/extra-attributes-multipledependencies/ivysettings-filerepo-noattribs.xml"));
+        ivy.getSettings().setDefaultCache(cache);
+
+        ResolveReport report = ivy.resolve(ResolveTest.class.getResource("ivy-extra-att-multipledependencies.xml"),
+            getResolveOptions(ivy.getSettings(), new String[] {"*"}).setValidate(false));
+        assertFalse(report.hasError());
+    }
+
+    public void testExtraAttributesMultipleDependenciesHang2() throws Exception {
+        Ivy ivy = new Ivy();
+        ivy.configure(new File("test/repositories/extra-attributes-multipledependencies/ivysettings-filerepo-attribs.xml"));
+        ivy.getSettings().setDefaultCache(cache);
+
+        ResolveReport report = ivy.resolve(ResolveTest.class.getResource("ivy-extra-att-multipledependencies2.xml"),
+            getResolveOptions(ivy.getSettings(), new String[] {"*"}).setValidate(false));
+        assertFalse(report.hasError());
+    }
+    
+    public void testExtraAttributesMultipleDependenciesNoHang2() throws Exception {
+        Ivy ivy = new Ivy();
+        ivy.configure(new File("test/repositories/extra-attributes-multipledependencies/ivysettings-filerepo-noattribs.xml"));
+        ivy.getSettings().setDefaultCache(cache);
 
+        ResolveReport report = ivy.resolve(ResolveTest.class.getResource("ivy-extra-att-multipledependencies2.xml"),
+            getResolveOptions(ivy.getSettings(), new String[] {"*"}).setValidate(false));
+        assertFalse(report.hasError());
     }
 }
diff --git a/test/java/org/apache/ivy/core/resolve/ivy-extra-att-multipledependencies.xml b/test/java/org/apache/ivy/core/resolve/ivy-extra-att-multipledependencies.xml
new file mode 100644
index 000000000..3b547bc1a
--- /dev/null
+++ b/test/java/org/apache/ivy/core/resolve/ivy-extra-att-multipledependencies.xml
@@ -0,0 +1,40 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+<!--
+   Licensed to the Apache Software Foundation (ASF) under one
+   or more contributor license agreements.  See the NOTICE file
+   distributed with this work for additional information
+   regarding copyright ownership.  The ASF licenses this file
+   to you under the Apache License, Version 2.0 (the
+   "License"); you may not use this file except in compliance
+   with the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+   Unless required by applicable law or agreed to in writing,
+   software distributed under the License is distributed on an
+   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+   KIND, either express or implied.  See the License for the
+   specific language governing permissions and limitations
+   under the License.    
+-->
+<ivy-module version="2.0">
+ <info organisation="CAE" module="TESTA" publication="20041101110000" status="Integration">
+  <license name="CAE Proprietary"/>
+  <ivyauthor name="TESTA - TESTA" url="http://www.cae.com"/>
+  <repository name="packagerep-ivy" url="http://coretech.caecorp.cae.com/packagerep" pattern="[organisation]/[module]/[revision]/ivy-[revision].xml" ivys="true" artifacts="false"/>
+  <repository name="packagerep-artifacts" url="http://coretech.caecorp.cae.com/packagerep" pattern="[organisation]/[module]/[revision]/[artifact]-[revision].[type]" ivys="false" artifacts="true" homepage="http://www.cae.com"/>
+  <description>TESTA -- Hello World Library - &lt;a href='http://coretech.caecorp.cae.com/clearspace/tags/testa_releasenotes'&gt;Release Notes&lt;/a&gt;</description>
+ </info>
+ <publications/>
+ <configurations>
+  <conf name="BuildTimeDependencies"/>
+  <conf name="RunTimeDependencies"/>
+  <conf name="TestingDependencies"/>
+ </configurations>
+ <dependencies>
+  <dependency org="CAE-VSK" name="VSK-FC" rev="0.53.0.1" transitive="false" force="true" conf="BuildTimeDependencies-&gt;*" policydependency="true">
+  </dependency>
+  <dependency org="CAE-VSK" name="VSK-FC" rev="[0.50.0.0,0.55.0.0]" transitive="false" force="true" conf="BuildTimeDependencies-&gt;*">
+  </dependency>
+ </dependencies>
+</ivy-module>
diff --git a/test/java/org/apache/ivy/core/resolve/ivy-extra-att-multipledependencies2.xml b/test/java/org/apache/ivy/core/resolve/ivy-extra-att-multipledependencies2.xml
new file mode 100644
index 000000000..ee9a5ba0f
--- /dev/null
+++ b/test/java/org/apache/ivy/core/resolve/ivy-extra-att-multipledependencies2.xml
@@ -0,0 +1,40 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+<!--
+   Licensed to the Apache Software Foundation (ASF) under one
+   or more contributor license agreements.  See the NOTICE file
+   distributed with this work for additional information
+   regarding copyright ownership.  The ASF licenses this file
+   to you under the Apache License, Version 2.0 (the
+   "License"); you may not use this file except in compliance
+   with the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+   Unless required by applicable law or agreed to in writing,
+   software distributed under the License is distributed on an
+   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+   KIND, either express or implied.  See the License for the
+   specific language governing permissions and limitations
+   under the License.    
+-->
+<ivy-module version="2.0">
+ <info organisation="CAE" module="TESTA" publication="20041101110000" status="Integration">
+  <license name="CAE Proprietary"/>
+  <ivyauthor name="TESTA - TESTA" url="http://www.cae.com"/>
+  <repository name="packagerep-ivy" url="http://coretech.caecorp.cae.com/packagerep" pattern="[organisation]/[module]/[revision]/ivy-[revision].xml" ivys="true" artifacts="false"/>
+  <repository name="packagerep-artifacts" url="http://coretech.caecorp.cae.com/packagerep" pattern="[organisation]/[module]/[revision]/[artifact]-[revision].[type]" ivys="false" artifacts="true" homepage="http://www.cae.com"/>
+  <description>TESTA -- Hello World Library - &lt;a href='http://coretech.caecorp.cae.com/clearspace/tags/testa_releasenotes'&gt;Release Notes&lt;/a&gt;</description>
+ </info>
+ <publications/>
+ <configurations>
+  <conf name="BuildTimeDependencies"/>
+  <conf name="RunTimeDependencies"/>
+  <conf name="TestingDependencies"/>
+ </configurations>
+ <dependencies>
+  <dependency org="CAE-VSK" name="VSK-FC" rev="[0.50.0.0,0.55.0.0]" transitive="false" force="true" conf="BuildTimeDependencies-&gt;*">
+  </dependency>
+  <dependency org="CAE-VSK" name="VSK-FC" rev="0.53.0.1" transitive="false" force="true" conf="BuildTimeDependencies-&gt;*" policydependency="true">
+  </dependency>
+ </dependencies>
+</ivy-module>
diff --git a/test/repositories/extra-attributes-multipledependencies/filerepo-attribs/CAE-VSK/VSK-FC/0.53.0.1/ivy-0.53.0.1.xml b/test/repositories/extra-attributes-multipledependencies/filerepo-attribs/CAE-VSK/VSK-FC/0.53.0.1/ivy-0.53.0.1.xml
new file mode 100644
index 000000000..67aedfb46
--- /dev/null
+++ b/test/repositories/extra-attributes-multipledependencies/filerepo-attribs/CAE-VSK/VSK-FC/0.53.0.1/ivy-0.53.0.1.xml
@@ -0,0 +1,44 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+<!--
+   Licensed to the Apache Software Foundation (ASF) under one
+   or more contributor license agreements.  See the NOTICE file
+   distributed with this work for additional information
+   regarding copyright ownership.  The ASF licenses this file
+   to you under the Apache License, Version 2.0 (the
+   "License"); you may not use this file except in compliance
+   with the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+   Unless required by applicable law or agreed to in writing,
+   software distributed under the License is distributed on an
+   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+   KIND, either express or implied.  See the License for the
+   specific language governing permissions and limitations
+   under the License.    
+-->
+<ivy-module version="2.0">
+ <info organisation="CAE-VSK" module="VSK-FC" revision="0.53.0.1" status="Development" publication="20081008191838" buddies="" approver="Sebastien Bolduc">
+  <license name="CAE Proprietary"/>
+  <ivyauthor name="FC - Runway - FC" url="http://coretech.caecorp.cae.com/jira/browse/VSKFLIGHTCONTROLS"/>
+  <repository name="packagerep-ivy" url="http://coretech.caecorp.cae.com/packagerep" pattern="[organisation]/[module]/[revision]/ivy-[revision].xml" ivys="true" artifacts="false"/>
+  <repository name="packagerep-artifacts" url="http://coretech.caecorp.cae.com/packagerep" pattern="[organisation]/[module]/[revision]/[artifact]-[revision].[type]" ivys="false" artifacts="true" homepage="http://coretech.caecorp.cae.com/jira/browse/VSKFLIGHTCONTROLS"/>
+  <description>VSK-FC -- This is the Fc SDK Package. - 
+   <a href="http://coretech.caecorp.cae.com/clearspace/tags/vsk-fc_releasenotes">Release Notes</a>
+  </description>
+ </info>
+ <publications>
+ </publications>
+ <configurations>
+  <conf name="BuildTimeDependencies"/>
+  <conf name="RunTimeDependencies"/>
+  <conf name="TestingDependencies"/>
+ </configurations>
+ <dependencies>
+  <dependency org="CAE" name="ACS" rev="2.25.2" force="true" conf="BuildTimeDependencies-&gt;*" branch="MAIN">
+   <artifact name="ACS2Suite" type="msi"/>
+   <artifact name="ACS2Suite" type="xml" hidden="true"/>
+   <artifact name="scd" type="xml" hidden="true"/>
+  </dependency>
+ </dependencies>
+</ivy-module>
diff --git a/test/repositories/extra-attributes-multipledependencies/filerepo-attribs/CAE-VSK/VSK-FC/0.54.0.0/ivy-0.54.0.0.xml b/test/repositories/extra-attributes-multipledependencies/filerepo-attribs/CAE-VSK/VSK-FC/0.54.0.0/ivy-0.54.0.0.xml
new file mode 100644
index 000000000..4362a5153
--- /dev/null
+++ b/test/repositories/extra-attributes-multipledependencies/filerepo-attribs/CAE-VSK/VSK-FC/0.54.0.0/ivy-0.54.0.0.xml
@@ -0,0 +1,44 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+<!--
+   Licensed to the Apache Software Foundation (ASF) under one
+   or more contributor license agreements.  See the NOTICE file
+   distributed with this work for additional information
+   regarding copyright ownership.  The ASF licenses this file
+   to you under the Apache License, Version 2.0 (the
+   "License"); you may not use this file except in compliance
+   with the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+   Unless required by applicable law or agreed to in writing,
+   software distributed under the License is distributed on an
+   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+   KIND, either express or implied.  See the License for the
+   specific language governing permissions and limitations
+   under the License.    
+-->
+<ivy-module version="2.0">
+ <info organisation="CAE-VSK" module="VSK-FC" revision="0.54.0.0" status="Development" publication="20081016173017" buddies="" approver="Mathieu Boisvert">
+  <license name="CAE Proprietary"/>
+  <ivyauthor name="FC - Runway - FC" url="http://coretech.caecorp.cae.com/jira/browse/VSKFLIGHTCONTROLS"/>
+  <repository name="packagerep-ivy" url="http://coretech.caecorp.cae.com/packagerep" pattern="[organisation]/[module]/[revision]/ivy-[revision].xml" ivys="true" artifacts="false"/>
+  <repository name="packagerep-artifacts" url="http://coretech.caecorp.cae.com/packagerep" pattern="[organisation]/[module]/[revision]/[artifact]-[revision].[type]" ivys="false" artifacts="true" homepage="http://coretech.caecorp.cae.com/jira/browse/VSKFLIGHTCONTROLS"/>
+  <description>VSK-FC -- This is the Fc SDK Package. - 
+   <a href="http://coretech.caecorp.cae.com/clearspace/tags/vsk-fc_releasenotes">Release Notes</a>
+  </description>
+ </info>
+ <publications>
+ </publications>
+ <configurations>
+  <conf name="BuildTimeDependencies"/>
+  <conf name="RunTimeDependencies"/>
+  <conf name="TestingDependencies"/>
+ </configurations>
+ <dependencies>
+  <dependency org="CAE" name="ACS" rev="2.25.2" force="true" conf="BuildTimeDependencies-&gt;*" branch="MAIN">
+   <artifact name="ACS2Suite" type="msi"/>
+   <artifact name="ACS2Suite" type="xml" hidden="true"/>
+   <artifact name="scd" type="xml" hidden="true"/>
+  </dependency>
+ </dependencies>
+</ivy-module>
diff --git a/test/repositories/extra-attributes-multipledependencies/filerepo-attribs/CAE-VSK/VSK-FC/0.54.1.0/ivy-0.54.1.0.xml b/test/repositories/extra-attributes-multipledependencies/filerepo-attribs/CAE-VSK/VSK-FC/0.54.1.0/ivy-0.54.1.0.xml
new file mode 100644
index 000000000..f4f018345
--- /dev/null
+++ b/test/repositories/extra-attributes-multipledependencies/filerepo-attribs/CAE-VSK/VSK-FC/0.54.1.0/ivy-0.54.1.0.xml
@@ -0,0 +1,44 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+<!--
+   Licensed to the Apache Software Foundation (ASF) under one
+   or more contributor license agreements.  See the NOTICE file
+   distributed with this work for additional information
+   regarding copyright ownership.  The ASF licenses this file
+   to you under the Apache License, Version 2.0 (the
+   "License"); you may not use this file except in compliance
+   with the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+   Unless required by applicable law or agreed to in writing,
+   software distributed under the License is distributed on an
+   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+   KIND, either express or implied.  See the License for the
+   specific language governing permissions and limitations
+   under the License.    
+-->
+<ivy-module version="2.0">
+ <info organisation="CAE-VSK" module="VSK-FC" revision="0.54.1.0" status="Development" publication="20081022154820" buddies="" approver="Mathieu Boisvert">
+  <license name="CAE Proprietary"/>
+  <ivyauthor name="FC - Runway - FC" url="http://coretech.caecorp.cae.com/jira/browse/VSKFLIGHTCONTROLS"/>
+  <repository name="packagerep-ivy" url="http://coretech.caecorp.cae.com/packagerep" pattern="[organisation]/[module]/[revision]/ivy-[revision].xml" ivys="true" artifacts="false"/>
+  <repository name="packagerep-artifacts" url="http://coretech.caecorp.cae.com/packagerep" pattern="[organisation]/[module]/[revision]/[artifact]-[revision].[type]" ivys="false" artifacts="true" homepage="http://coretech.caecorp.cae.com/jira/browse/VSKFLIGHTCONTROLS"/>
+  <description>VSK-FC -- This is the Fc SDK Package. - 
+   <a href="http://coretech.caecorp.cae.com/clearspace/tags/vsk-fc_releasenotes">Release Notes</a>
+  </description>
+ </info>
+ <publications>
+ </publications>
+ <configurations>
+  <conf name="BuildTimeDependencies"/>
+  <conf name="RunTimeDependencies"/>
+  <conf name="TestingDependencies"/>
+ </configurations>
+ <dependencies>
+  <dependency org="CAE" name="ACS" rev="2.25.2" force="true" conf="BuildTimeDependencies-&gt;*" branch="MAIN">
+   <artifact name="ACS2Suite" type="msi"/>
+   <artifact name="ACS2Suite" type="xml" hidden="true"/>
+   <artifact name="scd" type="xml" hidden="true"/>
+  </dependency>
+ </dependencies>
+</ivy-module>
diff --git a/test/repositories/extra-attributes-multipledependencies/filerepo-noattribs/CAE-VSK/VSK-FC/0.53.0.1/ivy-0.53.0.1.xml b/test/repositories/extra-attributes-multipledependencies/filerepo-noattribs/CAE-VSK/VSK-FC/0.53.0.1/ivy-0.53.0.1.xml
new file mode 100644
index 000000000..a97def52e
--- /dev/null
+++ b/test/repositories/extra-attributes-multipledependencies/filerepo-noattribs/CAE-VSK/VSK-FC/0.53.0.1/ivy-0.53.0.1.xml
@@ -0,0 +1,44 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+<!--
+   Licensed to the Apache Software Foundation (ASF) under one
+   or more contributor license agreements.  See the NOTICE file
+   distributed with this work for additional information
+   regarding copyright ownership.  The ASF licenses this file
+   to you under the Apache License, Version 2.0 (the
+   "License"); you may not use this file except in compliance
+   with the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+   Unless required by applicable law or agreed to in writing,
+   software distributed under the License is distributed on an
+   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+   KIND, either express or implied.  See the License for the
+   specific language governing permissions and limitations
+   under the License.    
+-->
+<ivy-module version="2.0">
+ <info organisation="CAE-VSK" module="VSK-FC" revision="0.53.0.1" status="Development" publication="20081008191838">
+  <license name="CAE Proprietary"/>
+  <ivyauthor name="FC - Runway - FC" url="http://coretech.caecorp.cae.com/jira/browse/VSKFLIGHTCONTROLS"/>
+  <repository name="packagerep-ivy" url="http://coretech.caecorp.cae.com/packagerep" pattern="[organisation]/[module]/[revision]/ivy-[revision].xml" ivys="true" artifacts="false"/>
+  <repository name="packagerep-artifacts" url="http://coretech.caecorp.cae.com/packagerep" pattern="[organisation]/[module]/[revision]/[artifact]-[revision].[type]" ivys="false" artifacts="true" homepage="http://coretech.caecorp.cae.com/jira/browse/VSKFLIGHTCONTROLS"/>
+  <description>VSK-FC -- This is the Fc SDK Package. - 
+   <a href="http://coretech.caecorp.cae.com/clearspace/tags/vsk-fc_releasenotes">Release Notes</a>
+  </description>
+ </info>
+ <publications>
+ </publications>
+ <configurations>
+  <conf name="BuildTimeDependencies"/>
+  <conf name="RunTimeDependencies"/>
+  <conf name="TestingDependencies"/>
+ </configurations>
+ <dependencies>
+  <dependency org="CAE" name="ACS" rev="2.25.2" force="true" conf="BuildTimeDependencies-&gt;*" branch="MAIN">
+   <artifact name="ACS2Suite" type="msi"/>
+   <artifact name="ACS2Suite" type="xml" hidden="true"/>
+   <artifact name="scd" type="xml" hidden="true"/>
+  </dependency>
+ </dependencies>
+</ivy-module>
diff --git a/test/repositories/extra-attributes-multipledependencies/filerepo-noattribs/CAE-VSK/VSK-FC/0.54.0.0/ivy-0.54.0.0.xml b/test/repositories/extra-attributes-multipledependencies/filerepo-noattribs/CAE-VSK/VSK-FC/0.54.0.0/ivy-0.54.0.0.xml
new file mode 100644
index 000000000..13be5891a
--- /dev/null
+++ b/test/repositories/extra-attributes-multipledependencies/filerepo-noattribs/CAE-VSK/VSK-FC/0.54.0.0/ivy-0.54.0.0.xml
@@ -0,0 +1,44 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+<!--
+   Licensed to the Apache Software Foundation (ASF) under one
+   or more contributor license agreements.  See the NOTICE file
+   distributed with this work for additional information
+   regarding copyright ownership.  The ASF licenses this file
+   to you under the Apache License, Version 2.0 (the
+   "License"); you may not use this file except in compliance
+   with the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+   Unless required by applicable law or agreed to in writing,
+   software distributed under the License is distributed on an
+   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+   KIND, either express or implied.  See the License for the
+   specific language governing permissions and limitations
+   under the License.    
+-->
+<ivy-module version="2.0">
+ <info organisation="CAE-VSK" module="VSK-FC" revision="0.54.0.0" status="Development" publication="20081016173017">
+  <license name="CAE Proprietary"/>
+  <ivyauthor name="FC - Runway - FC" url="http://coretech.caecorp.cae.com/jira/browse/VSKFLIGHTCONTROLS"/>
+  <repository name="packagerep-ivy" url="http://coretech.caecorp.cae.com/packagerep" pattern="[organisation]/[module]/[revision]/ivy-[revision].xml" ivys="true" artifacts="false"/>
+  <repository name="packagerep-artifacts" url="http://coretech.caecorp.cae.com/packagerep" pattern="[organisation]/[module]/[revision]/[artifact]-[revision].[type]" ivys="false" artifacts="true" homepage="http://coretech.caecorp.cae.com/jira/browse/VSKFLIGHTCONTROLS"/>
+  <description>VSK-FC -- This is the Fc SDK Package. - 
+   <a href="http://coretech.caecorp.cae.com/clearspace/tags/vsk-fc_releasenotes">Release Notes</a>
+  </description>
+ </info>
+ <publications>
+ </publications>
+ <configurations>
+  <conf name="BuildTimeDependencies"/>
+  <conf name="RunTimeDependencies"/>
+  <conf name="TestingDependencies"/>
+ </configurations>
+ <dependencies>
+  <dependency org="CAE" name="ACS" rev="2.25.2" force="true" conf="BuildTimeDependencies-&gt;*" branch="MAIN">
+   <artifact name="ACS2Suite" type="msi"/>
+   <artifact name="ACS2Suite" type="xml" hidden="true"/>
+   <artifact name="scd" type="xml" hidden="true"/>
+  </dependency>
+ </dependencies>
+</ivy-module>
diff --git a/test/repositories/extra-attributes-multipledependencies/filerepo-noattribs/CAE-VSK/VSK-FC/0.54.1.0/ivy-0.54.1.0.xml b/test/repositories/extra-attributes-multipledependencies/filerepo-noattribs/CAE-VSK/VSK-FC/0.54.1.0/ivy-0.54.1.0.xml
new file mode 100644
index 000000000..bd407361d
--- /dev/null
+++ b/test/repositories/extra-attributes-multipledependencies/filerepo-noattribs/CAE-VSK/VSK-FC/0.54.1.0/ivy-0.54.1.0.xml
@@ -0,0 +1,44 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+<!--
+   Licensed to the Apache Software Foundation (ASF) under one
+   or more contributor license agreements.  See the NOTICE file
+   distributed with this work for additional information
+   regarding copyright ownership.  The ASF licenses this file
+   to you under the Apache License, Version 2.0 (the
+   "License"); you may not use this file except in compliance
+   with the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+   Unless required by applicable law or agreed to in writing,
+   software distributed under the License is distributed on an
+   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+   KIND, either express or implied.  See the License for the
+   specific language governing permissions and limitations
+   under the License.    
+-->
+<ivy-module version="2.0">
+ <info organisation="CAE-VSK" module="VSK-FC" revision="0.54.1.0" status="Development" publication="20081022154820">
+  <license name="CAE Proprietary"/>
+  <ivyauthor name="FC - Runway - FC" url="http://coretech.caecorp.cae.com/jira/browse/VSKFLIGHTCONTROLS"/>
+  <repository name="packagerep-ivy" url="http://coretech.caecorp.cae.com/packagerep" pattern="[organisation]/[module]/[revision]/ivy-[revision].xml" ivys="true" artifacts="false"/>
+  <repository name="packagerep-artifacts" url="http://coretech.caecorp.cae.com/packagerep" pattern="[organisation]/[module]/[revision]/[artifact]-[revision].[type]" ivys="false" artifacts="true" homepage="http://coretech.caecorp.cae.com/jira/browse/VSKFLIGHTCONTROLS"/>
+  <description>VSK-FC -- This is the Fc SDK Package. - 
+   <a href="http://coretech.caecorp.cae.com/clearspace/tags/vsk-fc_releasenotes">Release Notes</a>
+  </description>
+ </info>
+ <publications>
+ </publications>
+ <configurations>
+  <conf name="BuildTimeDependencies"/>
+  <conf name="RunTimeDependencies"/>
+  <conf name="TestingDependencies"/>
+ </configurations>
+ <dependencies>
+  <dependency org="CAE" name="ACS" rev="2.25.2" force="true" conf="BuildTimeDependencies-&gt;*" branch="MAIN">
+   <artifact name="ACS2Suite" type="msi"/>
+   <artifact name="ACS2Suite" type="xml" hidden="true"/>
+   <artifact name="scd" type="xml" hidden="true"/>
+  </dependency>
+ </dependencies>
+</ivy-module>
diff --git a/test/repositories/extra-attributes-multipledependencies/ivysettings-filerepo-attribs.xml b/test/repositories/extra-attributes-multipledependencies/ivysettings-filerepo-attribs.xml
new file mode 100644
index 000000000..9ff20780f
--- /dev/null
+++ b/test/repositories/extra-attributes-multipledependencies/ivysettings-filerepo-attribs.xml
@@ -0,0 +1,34 @@
+<!--
+   Licensed to the Apache Software Foundation (ASF) under one
+   or more contributor license agreements.  See the NOTICE file
+   distributed with this work for additional information
+   regarding copyright ownership.  The ASF licenses this file
+   to you under the Apache License, Version 2.0 (the
+   "License"); you may not use this file except in compliance
+   with the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+   Unless required by applicable law or agreed to in writing,
+   software distributed under the License is distributed on an
+   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+   KIND, either express or implied.  See the License for the
+   specific language governing permissions and limitations
+   under the License.    
+-->
+<ivysettings>
+    <settings defaultBranch="MAIN" defaultResolver="attribs" defaultConflictManager="latest-compatible" defaultResolveMode="default"/>
+  
+	<resolvers>
+		<filesystem name="attribs"  checkconsistency="false">
+			<ivy pattern="${ivy.settings.dir}/filerepo-attribs/[organisation]/[module]/[revision]/ivy-[revision].xml"/>
+			<artifact pattern="${ivy.settings.dir}/filerepo-attribs/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]"/>
+		</filesystem>	
+	</resolvers>
+	
+	<statuses default="Development">
+	  <status name="Development" integration="false"/>
+	  <status name="Integration" integration="true"/>
+	  <status name="integration" integration="true"/>
+	</statuses> 	
+</ivysettings>
\ No newline at end of file
diff --git a/test/repositories/extra-attributes-multipledependencies/ivysettings-filerepo-noattribs.xml b/test/repositories/extra-attributes-multipledependencies/ivysettings-filerepo-noattribs.xml
new file mode 100644
index 000000000..2065c9a5b
--- /dev/null
+++ b/test/repositories/extra-attributes-multipledependencies/ivysettings-filerepo-noattribs.xml
@@ -0,0 +1,34 @@
+<!--
+   Licensed to the Apache Software Foundation (ASF) under one
+   or more contributor license agreements.  See the NOTICE file
+   distributed with this work for additional information
+   regarding copyright ownership.  The ASF licenses this file
+   to you under the Apache License, Version 2.0 (the
+   "License"); you may not use this file except in compliance
+   with the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+   Unless required by applicable law or agreed to in writing,
+   software distributed under the License is distributed on an
+   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+   KIND, either express or implied.  See the License for the
+   specific language governing permissions and limitations
+   under the License.    
+-->
+<ivysettings>
+    <settings defaultBranch="MAIN" defaultResolver="attribs" defaultConflictManager="latest-compatible" defaultResolveMode="default"/>
+  
+	<resolvers>
+		<filesystem name="attribs"  checkconsistency="false">
+			<ivy pattern="${ivy.settings.dir}/filerepo-noattribs/[organisation]/[module]/[revision]/ivy-[revision].xml"/>
+			<artifact pattern="${ivy.settings.dir}/filerepo-noattribs/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]"/>
+		</filesystem>	
+	</resolvers>
+	
+	<statuses default="Development">
+	  <status name="Development" integration="false"/>
+	  <status name="Integration" integration="true"/>
+	  <status name="integration" integration="true"/>
+	</statuses> 	
+</ivysettings>
\ No newline at end of file
