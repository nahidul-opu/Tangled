From 116463ba4f988ad7dda289bf6e2ff53c6570f0ef Mon Sep 17 00:00:00 2001
From: Henri Yandell <bayard@apache.org>
Date: Tue, 19 Sep 2006 21:20:56 +0000
Subject: [PATCH] Applying requested fix from Neil Redway in #LANG-262

git-svn-id: https://svn.apache.org/repos/asf/jakarta/commons/proper/lang/trunk@447975 13f79535-47bb-0310-9956-ffa450edef68
---
 src/java/org/apache/commons/lang/enum/Enum.java  | 3 ++-
 src/java/org/apache/commons/lang/enums/Enum.java | 3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/src/java/org/apache/commons/lang/enum/Enum.java b/src/java/org/apache/commons/lang/enum/Enum.java
index 1e9a002f75c..ea8883196bd 100644
--- a/src/java/org/apache/commons/lang/enum/Enum.java
+++ b/src/java/org/apache/commons/lang/enum/Enum.java
@@ -22,6 +22,7 @@
 import java.util.ArrayList;
 import java.util.Collections;
 import java.util.HashMap;
+import java.util.WeakHashMap;
 import java.util.Iterator;
 import java.util.List;
 import java.util.Map;
@@ -255,7 +256,7 @@ public abstract class Enum implements Comparable, Serializable {
     /**
      * <code>Map</code>, key of class name, value of <code>Entry</code>.
      */
-    private static final Map cEnumClasses = new HashMap();
+    private static final Map cEnumClasses = new WeakHashMap();
     
     /**
      * The string representation of the Enum.
diff --git a/src/java/org/apache/commons/lang/enums/Enum.java b/src/java/org/apache/commons/lang/enums/Enum.java
index 84a28a6f555..cc095d46c9a 100644
--- a/src/java/org/apache/commons/lang/enums/Enum.java
+++ b/src/java/org/apache/commons/lang/enums/Enum.java
@@ -22,6 +22,7 @@
 import java.util.ArrayList;
 import java.util.Collections;
 import java.util.HashMap;
+import java.util.WeakHashMap;
 import java.util.Iterator;
 import java.util.List;
 import java.util.Map;
@@ -252,7 +253,7 @@ public abstract class Enum implements Comparable, Serializable {
     /**
      * <code>Map</code>, key of class name, value of <code>Entry</code>.
      */
-    private static final Map cEnumClasses = new HashMap();
+    private static final Map cEnumClasses = new WeakHashMap();
     
     /**
      * The string representation of the Enum.
