From baba8cc875f5b197c08123b2d9add4cec3772300 Mon Sep 17 00:00:00 2001
From: Sebastian Bazley <sebb@apache.org>
Date: Wed, 30 Jul 2014 23:18:55 +0000
Subject: [PATCH] IO-453 - Regression in FileUtils.readFileToString from 2.0.1

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/io/trunk@1614791 13f79535-47bb-0310-9956-ffa450edef68
---
 src/changes/changes.xml                            | 3 +++
 src/main/java/org/apache/commons/io/FileUtils.java | 2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index df110605a4d..faad0677ca4 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -47,6 +47,9 @@ The <action> type attribute can be add,update,fix,remove.
   <body>
     <!-- The release date is the date RC is cut -->
     <release version="2.5" date="2014-??-??" description="New features and bug fixes.">
+      <action issue="IO-453" dev="sebb" type="fix" due-to="Steven Christou">
+         Regression in FileUtils.readFileToString from 2.0.1
+      </action>
       <action issue="IO-451" dev="sebb" type="fix" due-to="David Standish">
          ant test fails - resources missing from test classpath
       </action>
diff --git a/src/main/java/org/apache/commons/io/FileUtils.java b/src/main/java/org/apache/commons/io/FileUtils.java
index f4d4bd85df7..6f748f19565 100644
--- a/src/main/java/org/apache/commons/io/FileUtils.java
+++ b/src/main/java/org/apache/commons/io/FileUtils.java
@@ -1799,7 +1799,7 @@ public static byte[] readFileToByteArray(final File file) throws IOException {
         InputStream in = null;
         try {
             in = openInputStream(file);
-            return IOUtils.toByteArray(in, file.length());
+            return IOUtils.toByteArray(in); // Do NOT use file.length() - see NET-453
         } finally {
             IOUtils.closeQuietly(in);
         }
