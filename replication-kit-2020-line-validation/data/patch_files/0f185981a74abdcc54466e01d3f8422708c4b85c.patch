From 0f185981a74abdcc54466e01d3f8422708c4b85c Mon Sep 17 00:00:00 2001
From: Ralph Goers <rgoers@apache.org>
Date: Sat, 24 Sep 2011 07:20:32 +0000
Subject: [PATCH] Fix for VFS-364

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/vfs/trunk@1175117 13f79535-47bb-0310-9956-ffa450edef68
---
 .../commons/vfs2/provider/webdav/WebdavFileObject.java     | 2 +-
 src/changes/changes.xml                                    | 7 ++++++-
 2 files changed, 7 insertions(+), 2 deletions(-)

diff --git a/core/src/main/java/org/apache/commons/vfs2/provider/webdav/WebdavFileObject.java b/core/src/main/java/org/apache/commons/vfs2/provider/webdav/WebdavFileObject.java
index 835bbd5f9f..5067f01faa 100644
--- a/core/src/main/java/org/apache/commons/vfs2/provider/webdav/WebdavFileObject.java
+++ b/core/src/main/java/org/apache/commons/vfs2/provider/webdav/WebdavFileObject.java
@@ -590,7 +590,7 @@ private boolean isCurrentFile(String href, URLFileName fileName)
         {
             name += "/";
         }
-        return href.equals(name);
+        return href.equals(name) || href.equals(fileName.getPath());
     }
 
     /**
diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index 7a0a45320e..1185bd222a 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -22,7 +22,12 @@
   </properties>
 
   <body>
-    <release version="2.0" date="" description="Backwards incompatible update of Commons VFS to Java 5">
+    <release version="2.1" date="TBD" description="">
+      <action issue="VFS-364" dev="rgoers" type="fix">
+        Check the href in the response for just a path in addition to a full uri.
+      </action>
+    </release>
+    <release version="2.0" date="2011-08-24" description="Backwards incompatible update of Commons VFS to Java 5">
       <action issue="VFS-348" dev="rgoers" type="fix" due-to="Stefan Bodewig">
         Update the version of commons-net.
       </action>
