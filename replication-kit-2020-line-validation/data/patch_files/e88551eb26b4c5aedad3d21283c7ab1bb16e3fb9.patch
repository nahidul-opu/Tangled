From e88551eb26b4c5aedad3d21283c7ab1bb16e3fb9 Mon Sep 17 00:00:00 2001
From: Avery Ching <aching@apache.org>
Date: Fri, 6 Apr 2012 08:20:36 +0000
Subject: [PATCH] GIRAPH-171: Total time in MasterThread.run() is calculated
 incorrectly (ekoontz via aching).

git-svn-id: https://svn.apache.org/repos/asf/incubator/giraph/trunk@1310224 13f79535-47bb-0310-9956-ffa450edef68
---
 CHANGELOG                                               | 3 +++
 src/main/java/org/apache/giraph/graph/MasterThread.java | 4 ++--
 2 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/CHANGELOG b/CHANGELOG
index 17afed4d8..5b5449072 100644
--- a/CHANGELOG
+++ b/CHANGELOG
@@ -2,6 +2,9 @@ Giraph Change Log
 
 Release 0.2.0 - unreleased
 
+  GIRAPH-171: Total time in MasterThread.run() is calculated
+  incorrectly (ekoontz via aching).
+
   GIRAPH-144: GiraphJob should not extend Job (users should not be
   able to call Job methods like waitForCompletion or setMapper..etc)
   (aching).
diff --git a/src/main/java/org/apache/giraph/graph/MasterThread.java b/src/main/java/org/apache/giraph/graph/MasterThread.java
index 3e5df2852..185f843c6 100644
--- a/src/main/java/org/apache/giraph/graph/MasterThread.java
+++ b/src/main/java/org/apache/giraph/graph/MasterThread.java
@@ -170,8 +170,8 @@ public void run() {
               (System.currentTimeMillis() - endMillis) /
               1000.0d + " seconds.");
           LOG.info("total: Took " +
-              ((System.currentTimeMillis() / 1000.0d) -
-                  setupSecs) + " seconds.");
+              ((System.currentTimeMillis() - startMillis) /
+              1000.0d) + " seconds.");
         }
         context.getCounter(
             GIRAPH_TIMERS_COUNTER_GROUP_NAME,
