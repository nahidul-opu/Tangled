From 91ff7311935be36db522dcf782c25f5815449ed2 Mon Sep 17 00:00:00 2001
From: Maarten Coene <maartenc@apache.org>
Date: Tue, 30 May 2006 12:05:23 +0000
Subject: [PATCH] FIX: report Ant-task doesn't call init() on the internal
 XSLTProcess (IVY-248)

git-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/trunk@484346 13f79535-47bb-0310-9956-ffa450edef68
---
 CHANGES.txt                                 | 1 +
 src/java/fr/jayasoft/ivy/ant/IvyReport.java | 4 ++++
 2 files changed, 5 insertions(+)

diff --git a/CHANGES.txt b/CHANGES.txt
index 7dd3f2a2f..e08eb0632 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -56,6 +56,7 @@ Changes:
   - IMPROVE: add sort of 'fallback'-mapping to the defaultconfmapping attribute (IVY-215)
   - IMPROVE: artifact origin is not included in the default report (IVY-251)
 
+  - FIX: report Ant-task doesn't call init() on the internal XSLTProcess (IVY-248)
   - FIX: value of confmappingoverride from imported configurations is lost when writing Ivy file (IVY-239)
   - FIX: including configurations doesn't import the confmappingoverride setting (IVY-238)
   - FIX: NullPointerException when the creation of Ivy file in cache fails (IVY-234)
diff --git a/src/java/fr/jayasoft/ivy/ant/IvyReport.java b/src/java/fr/jayasoft/ivy/ant/IvyReport.java
index e38b3ebf1..41a58e66d 100644
--- a/src/java/fr/jayasoft/ivy/ant/IvyReport.java
+++ b/src/java/fr/jayasoft/ivy/ant/IvyReport.java
@@ -162,6 +162,8 @@ private void genreport(Ivy ivy, File cache, String organisation, String module,
         XSLTProcess xslt = new XSLTProcess();
         xslt.setTaskName(getTaskName());
         xslt.setProject(getProject());
+        xslt.init();
+        
         xslt.setIn(new File(cache, XmlReportOutputter.getReportFileName(new ModuleId(organisation, module), conf)));
         File out;
         if (_todir != null) {
@@ -228,6 +230,8 @@ private void gengraph(Ivy ivy, File cache, String organisation, String module, S
         XSLTProcess xslt = new XSLTProcess();
         xslt.setTaskName(getTaskName());
         xslt.setProject(getProject());
+        xslt.init();
+        
         xslt.setDestdir(out);
         xslt.setBasedir(cache);
         xslt.setExtension(".graphml");
