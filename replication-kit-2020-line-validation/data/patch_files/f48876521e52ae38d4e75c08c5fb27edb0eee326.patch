From f48876521e52ae38d4e75c08c5fb27edb0eee326 Mon Sep 17 00:00:00 2001
From: Sebastian Bazley <sebb@apache.org>
Date: Sat, 14 Jul 2012 13:22:08 +0000
Subject: [PATCH] NET-449 listFiles bug with folder that begins with "-".
 Clarify Javadoc.

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/net/trunk@1361541 13f79535-47bb-0310-9956-ffa450edef68
---
 src/changes/changes.xml                                |  3 +++
 .../java/org/apache/commons/net/ftp/FTPClient.java     | 10 ++++++++++
 2 files changed, 13 insertions(+)

diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index dc411d2bf..7296b8359 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -65,6 +65,9 @@ The <action> type attribute can be add,update,fix,remove.
         <release version="3.2" date="TBA" description="
 TBA
         ">
+            <action issue="NET-449" dev="sebb" type="fix">
+            listFiles bug with folder that begins with "-". Clarify Javadoc.
+            </action>
             <action issue="NET-473" dev="sebb" type="fix">
             FTPClient setSoTimeout (int time) will result in NullPointerException. Clarify Javadoc.
             </action>
diff --git a/src/main/java/org/apache/commons/net/ftp/FTPClient.java b/src/main/java/org/apache/commons/net/ftp/FTPClient.java
index 7df76d77a..a35a6a0fa 100644
--- a/src/main/java/org/apache/commons/net/ftp/FTPClient.java
+++ b/src/main/java/org/apache/commons/net/ftp/FTPClient.java
@@ -2692,6 +2692,11 @@ public boolean sendNoOp() throws IOException
      * expand glob expressions.
      * <p>
      * @param pathname  The file or directory to list.
+     *                  Warning: the server may treat a leading '-' as an
+     *                  option introducer. If so, try using an absolute path,
+     *                  or prefix the path with ./ (unix style servers).
+     *                  Some servers may support "--" as meaning end of options,
+     *                  in which case "-- -xyz" should work.
      * @return The list of filenames contained in the given path.  null if
      *     the list could not be obtained.  If there are no filenames in
      *     the directory, a zero-length array is returned.
@@ -2774,6 +2779,11 @@ public String[] listNames() throws IOException
      *                  or may not expand glob expressions, using them here
      *                  is not recommended and may well cause this method to
      *                  fail.
+     *                  Also, some servers treat a leading '-' as being an option.
+     *                  To avoid this interpretation, use an absolute pathname
+     *                  or prefix the pathname with ./ (unix style servers).
+     *                  Some servers may support "--" as meaning end of options,
+     *                  in which case "-- -xyz" should work.
      *
      * @return The list of file information contained in the given path in
      *         the format determined by the autodetection mechanism
