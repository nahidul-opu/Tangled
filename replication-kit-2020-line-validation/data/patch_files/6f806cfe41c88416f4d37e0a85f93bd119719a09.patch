From 6f806cfe41c88416f4d37e0a85f93bd119719a09 Mon Sep 17 00:00:00 2001
From: Gilles Sadowski <erans@apache.org>
Date: Fri, 14 Dec 2012 14:59:44 +0000
Subject: [PATCH] MATH-916 Restore backwards-compatibility (for release 3.1).

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/math/trunk@1421911 13f79535-47bb-0310-9956-ffa450edef68
---
 .../commons/math3/random/RandomDataImpl.java      | 12 +++++++++++-
 .../apache/commons/math3/random/ValueServer.java  | 15 +++++++++++++--
 2 files changed, 24 insertions(+), 3 deletions(-)

diff --git a/src/main/java/org/apache/commons/math3/random/RandomDataImpl.java b/src/main/java/org/apache/commons/math3/random/RandomDataImpl.java
index b8f0392ab0..4e22f19aac 100644
--- a/src/main/java/org/apache/commons/math3/random/RandomDataImpl.java
+++ b/src/main/java/org/apache/commons/math3/random/RandomDataImpl.java
@@ -94,13 +94,14 @@
  * @deprecated to be removed in 4.0.  Use {@link RandomDataGenerator} instead
  * @version $Id$
  */
+@Deprecated
 public class RandomDataImpl implements RandomData, Serializable {
 
     /** Serializable version identifier */
     private static final long serialVersionUID = -626730818244969716L;
 
     /** RandomDataGenerator delegate */
-    private RandomDataGenerator delegate;
+    private final RandomDataGenerator delegate;
 
     /**
      * Construct a RandomDataImpl, using a default random generator as the source
@@ -126,6 +127,15 @@ public RandomDataImpl(RandomGenerator rand) {
         delegate = new RandomDataGenerator(rand);
     }
 
+    /**
+     * @param rand the source of (non-secure) random data
+     * @deprecated To be removed in 4.0.
+     */
+    @Deprecated
+    RandomDataGenerator getDelegate() {
+        return delegate;
+    }
+
     /**
      * {@inheritDoc}
      * <p>
diff --git a/src/main/java/org/apache/commons/math3/random/ValueServer.java b/src/main/java/org/apache/commons/math3/random/ValueServer.java
index 4bf4d69d1d..847e73f650 100644
--- a/src/main/java/org/apache/commons/math3/random/ValueServer.java
+++ b/src/main/java/org/apache/commons/math3/random/ValueServer.java
@@ -98,15 +98,26 @@ public ValueServer() {
     }
 
     /**
-     * Construct a ValueServer instance using a RandomDataImpl as its source
+     * Construct a ValueServer instance using a RandomDataGenerator as its source
      * of random data.
      *
-     * @param randomData the RandomDataImpl instance used to source random data
+     * @param randomData random data source
      * @since 3.0
      */
     public ValueServer(RandomDataGenerator randomData) {
         this.randomData = randomData;
     }
+    /**
+     * Construct a ValueServer instance using a RandomDataImpl as its source
+     * of random data.
+     *
+     * @param randomData random data source
+     * @deprecated As of 3.1. Use {@link #ValueServer(RandomDataGenerator)} instead.
+     */
+    @Deprecated
+    public ValueServer(RandomDataImpl randomData) {
+        this(randomData.getDelegate());
+    }
 
     /**
      * Returns the next generated value, generated according
