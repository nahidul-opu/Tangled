From b9ce6ba6d687c7a41a3304f4bc9a44fb4e88345d Mon Sep 17 00:00:00 2001
From: Oliver Heger <oheger@apache.org>
Date: Wed, 30 Sep 2009 19:57:42 +0000
Subject: [PATCH] [CONFIGURATION-398] Added a unit test for
 DatabaseConfiguration.setProperty() with a list of properties.

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/configuration/trunk@820424 13f79535-47bb-0310-9956-ffa450edef68
---
 .../configuration/TestDatabaseConfiguration.java    | 13 +++++++++++++
 1 file changed, 13 insertions(+)

diff --git a/src/test/org/apache/commons/configuration/TestDatabaseConfiguration.java b/src/test/org/apache/commons/configuration/TestDatabaseConfiguration.java
index 41307862c1..57e8397955 100644
--- a/src/test/org/apache/commons/configuration/TestDatabaseConfiguration.java
+++ b/src/test/org/apache/commons/configuration/TestDatabaseConfiguration.java
@@ -402,6 +402,19 @@ public void testAddWithDelimiter()
         assertEquals("Wrong value at index 1", "2", values[1]);
     }
 
+    /**
+     * Tests setProperty() if the property value contains the list delimiter.
+     */
+    public void testSetPropertyWithDelimiter()
+    {
+        DatabaseConfiguration config = setUpMultiConfig();
+        config.setListDelimiter(';');
+        config.setProperty("keyList", "1;2;3");
+        String[] values = config.getStringArray("keyList");
+        assertEquals("Wrong number of property values", 3, values.length);
+        assertEquals("Wrong value at index 1", "2", values[1]);
+    }
+
     /**
      * A specialized database configuration implementation that can be
      * configured to throw an exception when obtaining a connection. This way
