From 05897630ec504136fe11d08413cda628f499ddae Mon Sep 17 00:00:00 2001
From: Xavier Hanin <xavier@apache.org>
Date: Wed, 7 Mar 2007 09:31:22 +0000
Subject: [PATCH] FIX: timestamps lost in svn were causing IVY-407 test to fail

git-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/core/trunk@515506 13f79535-47bb-0310-9956-ffa450edef68
---
 .../ivy/plugins/conflict/LatestConflictManagerTest.java  | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/test/java/org/apache/ivy/plugins/conflict/LatestConflictManagerTest.java b/test/java/org/apache/ivy/plugins/conflict/LatestConflictManagerTest.java
index 379e1c412..37bfced09 100644
--- a/test/java/org/apache/ivy/plugins/conflict/LatestConflictManagerTest.java
+++ b/test/java/org/apache/ivy/plugins/conflict/LatestConflictManagerTest.java
@@ -17,6 +17,7 @@
  */
 package org.apache.ivy.plugins.conflict;
 
+import java.io.File;
 import java.util.Iterator;
 import java.util.List;
 
@@ -142,6 +143,14 @@ public void testLatestTimeTransitivity() throws Exception {
     	ivy.configure(LatestConflictManagerTest.class
     			.getResource("ivyconf-latest-time-transitivity.xml"));
     	ivy.getSettings().setVariable("ivy.log.conflict.resolution", "true", true);
+    	
+    	// set timestamps, because svn is not preserving this information, 
+    	// and the latest time strategy is relying on it
+    	long time = System.currentTimeMillis() - 10000;
+    	new File("test/repositories/IVY-407/MyCompany/C/ivy-1.0.0.xml").setLastModified(time);
+    	new File("test/repositories/IVY-407/MyCompany/C/ivy-1.0.1.xml").setLastModified(time+2000);
+    	new File("test/repositories/IVY-407/MyCompany/C/ivy-1.0.2.xml").setLastModified(time+4000);
+    	
     	ResolveReport report =
     		ivy.resolve( LatestConflictManagerTest.class.getResource( "ivy-latest-time-transitivity.xml" ), 
     				getResolveOptions() );
