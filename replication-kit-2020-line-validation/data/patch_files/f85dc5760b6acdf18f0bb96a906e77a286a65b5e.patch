From f85dc5760b6acdf18f0bb96a906e77a286a65b5e Mon Sep 17 00:00:00 2001
From: Phil Steitz <psteitz@apache.org>
Date: Mon, 13 Dec 2010 00:43:57 +0000
Subject: [PATCH] Added a getUniqueCount() method to Frequency to return the
 number of unique values included in the frequency table.

Reported and patched by Patrick Meyer
JIRA: MATH-414

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/math/trunk@1044981 13f79535-47bb-0310-9956-ffa450edef68
---
 .../java/org/apache/commons/math/stat/Frequency.java   | 10 +++++++++-
 src/site/xdoc/changes.xml                              |  4 ++++
 .../org/apache/commons/math/stat/FrequencyTest.java    | 10 ++++++++++
 3 files changed, 23 insertions(+), 1 deletion(-)

diff --git a/src/main/java/org/apache/commons/math/stat/Frequency.java b/src/main/java/org/apache/commons/math/stat/Frequency.java
index 4935e113d4..898ed14a4d 100644
--- a/src/main/java/org/apache/commons/math/stat/Frequency.java
+++ b/src/main/java/org/apache/commons/math/stat/Frequency.java
@@ -241,7 +241,15 @@ public long getCount(char v) {
         return getCount(Character.valueOf(v));
     }
 
-    //-------------------------------------------------------------
+    /**
+     * Returns the number of values in the frequency table.
+     * 
+     * @return the number of unique values that have been added to the frequency table.
+     * @see #valuesIterator() 
+     */
+    public int getUniqueCount(){
+    	return freqTable.keySet().size();
+    }
 
     /**
      * Returns the percentage of values that are equal to v
diff --git a/src/site/xdoc/changes.xml b/src/site/xdoc/changes.xml
index 43a7d9e25e..c5e14da502 100644
--- a/src/site/xdoc/changes.xml
+++ b/src/site/xdoc/changes.xml
@@ -134,6 +134,10 @@ The <action> type attribute can be add,update,fix,remove.
       </action>
     </release>
     <release version="2.2" date="TBD" description="TBD">
+      <action dev="psteitz" type="update" issue="MATH-448" due-to="Patrick Meyer">
+        Added a getUniqueCount() method to Frequency to return the number of unique
+        values included in the frequency table.
+      </action>
       <action dev="psteitz" type="fix" issue="MATH-414">
         Modified NormalDistributionImpl.cumulativeProbability to return 0 or 1,
         respectively for values more than 40 standard deviations from the mean.
diff --git a/src/test/java/org/apache/commons/math/stat/FrequencyTest.java b/src/test/java/org/apache/commons/math/stat/FrequencyTest.java
index 4251be14e0..0fa1ff8e0a 100644
--- a/src/test/java/org/apache/commons/math/stat/FrequencyTest.java
+++ b/src/test/java/org/apache/commons/math/stat/FrequencyTest.java
@@ -251,5 +251,15 @@ public void testSerial() {
         f.addValue(twoI);
         assertEquals(f, TestUtils.serializeAndRecover(f));
     }
+    
+    public void testGetUniqueCount() {
+        assertEquals(0, f.getUniqueCount());
+        f.addValue(oneL);
+        assertEquals(1, f.getUniqueCount());
+        f.addValue(oneL);
+        assertEquals(1, f.getUniqueCount());
+        f.addValue(twoI);
+        assertEquals(2, f.getUniqueCount());
+    }
 }
 
