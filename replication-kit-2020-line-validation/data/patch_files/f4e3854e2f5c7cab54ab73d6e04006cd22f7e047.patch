From f4e3854e2f5c7cab54ab73d6e04006cd22f7e047 Mon Sep 17 00:00:00 2001
From: Phil Steitz <psteitz@apache.org>
Date: Sun, 27 Nov 2011 06:00:27 +0000
Subject: [PATCH] Added test to verify that all statistics evaluate on array
 segments correctly.  JIRA: MATH-704.

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/math/trunk@1206668 13f79535-47bb-0310-9956-ffa450edef68
---
 .../descriptive/UnivariateStatisticAbstractTest.java | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/src/test/java/org/apache/commons/math/stat/descriptive/UnivariateStatisticAbstractTest.java b/src/test/java/org/apache/commons/math/stat/descriptive/UnivariateStatisticAbstractTest.java
index e53a2fc438..bfa7caeeab 100644
--- a/src/test/java/org/apache/commons/math/stat/descriptive/UnivariateStatisticAbstractTest.java
+++ b/src/test/java/org/apache/commons/math/stat/descriptive/UnivariateStatisticAbstractTest.java
@@ -17,6 +17,7 @@
 package org.apache.commons.math.stat.descriptive;
 
 import java.util.ArrayList;
+import java.util.Arrays;
 import java.util.List;
 
 
@@ -99,6 +100,17 @@ public void testEvaluation() throws Exception {
             getUnivariateStatistic().evaluate(testArray),
             getTolerance());
     }
+    
+    @Test
+    public void testEvaluateArraySegment() {
+        final UnivariateStatistic stat = getUnivariateStatistic();
+        final double[] arrayZero = Arrays.copyOfRange(testArray, 0, 5);
+        Assert.assertEquals(stat.evaluate(arrayZero), stat.evaluate(testArray, 0, 5), 0);
+        final double[] arrayOne = Arrays.copyOfRange(testArray, 5, 10);
+        Assert.assertEquals(stat.evaluate(arrayOne), stat.evaluate(testArray, 5, 5), 0);
+        final double[] arrayEnd = Arrays.copyOfRange(testArray, testArray.length - 5, testArray.length);
+        Assert.assertEquals(stat.evaluate(arrayEnd), stat.evaluate(testArray, testArray.length - 5, 5), 0);
+    }
 
     @Test
     public void testCopy() throws Exception {
