From e185dad52556591d61c8ddf88caafeff10e707fc Mon Sep 17 00:00:00 2001
From: Stefan Bodewig <bodewig@apache.org>
Date: Thu, 27 Dec 2012 20:50:17 +0000
Subject: [PATCH] COMPRESS-200 the test actually fails if encoding is specified
 explicitly

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/compress/trunk@1426312 13f79535-47bb-0310-9956-ffa450edef68
---
 .../compress/archivers/tar/TarArchiveOutputStreamTest.java    | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/test/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStreamTest.java b/src/test/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStreamTest.java
index c5383fad7e9..d24680da6e0 100644
--- a/src/test/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStreamTest.java
+++ b/src/test/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStreamTest.java
@@ -358,18 +358,18 @@ private void testRoundtripWith67CharFileName(int mode) throws Exception {
         TarArchiveEntry t = new TarArchiveEntry(n);
         t.setSize(10 * 1024);
         ByteArrayOutputStream bos = new ByteArrayOutputStream();
-        TarArchiveOutputStream tos = new TarArchiveOutputStream(bos);
+        TarArchiveOutputStream tos = new TarArchiveOutputStream(bos, "ASCII");
         tos.setLongFileMode(mode);
         tos.putArchiveEntry(t);
         tos.write(new byte[10 * 1024]);
         tos.closeArchiveEntry();
+        tos.close();
         byte[] data = bos.toByteArray();
         TarArchiveInputStream tin =
             new TarArchiveInputStream(new ByteArrayInputStream(data));
         TarArchiveEntry e = tin.getNextTarEntry();
         assertEquals(n, e.getName());
         tin.close();
-        tos.close();
     }
 
 }
