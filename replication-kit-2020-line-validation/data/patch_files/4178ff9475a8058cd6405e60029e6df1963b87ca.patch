From 4178ff9475a8058cd6405e60029e6df1963b87ca Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?J=C3=B6rn=20Kottmann?= <joern@apache.org>
Date: Wed, 21 Aug 2013 12:39:14 +0000
Subject: [PATCH] OPENNLP-593 Updated version check to work with 1.5.x and
 1.6.x models

git-svn-id: https://svn.apache.org/repos/asf/opennlp/trunk@1516147 13f79535-47bb-0310-9956-ffa450edef68
---
 .../src/main/java/opennlp/tools/util/model/BaseModel.java      | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/opennlp-tools/src/main/java/opennlp/tools/util/model/BaseModel.java b/opennlp-tools/src/main/java/opennlp/tools/util/model/BaseModel.java
index ea5839486..529f75657 100644
--- a/opennlp-tools/src/main/java/opennlp/tools/util/model/BaseModel.java
+++ b/opennlp-tools/src/main/java/opennlp/tools/util/model/BaseModel.java
@@ -406,8 +406,11 @@ protected void validateArtifactMap() throws InvalidFormatException {
         // Major and minor version must match, revision might be 
         if (Version.currentVersion().getMajor() != version.getMajor() ||
             Version.currentVersion().getMinor() != version.getMinor()) {
+          //this check allows for the use of models one minor release behind current minor release
+          if(Version.currentVersion().getMajor() == version.getMajor() && (Version.currentVersion().getMinor()-1) != version.getMinor()){
           throw new InvalidFormatException("Model version " + version + " is not supported by this (" 
               + Version.currentVersion() +") version of OpenNLP!");
+          }
         }
         
         // Reject loading a snapshot model with a non-snapshot version
