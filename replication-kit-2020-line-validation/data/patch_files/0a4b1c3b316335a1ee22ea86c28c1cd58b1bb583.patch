From 0a4b1c3b316335a1ee22ea86c28c1cd58b1bb583 Mon Sep 17 00:00:00 2001
From: Thomas Vandahl <tv@apache.org>
Date: Wed, 14 Jun 2017 16:57:34 +0000
Subject: [PATCH] Preliminary fix for JCS-178

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/jcs/trunk@1798716 13f79535-47bb-0310-9956-ffa450edef68
---
 .../remote/RemoteCacheNoWaitFacade.java       | 23 +------------------
 1 file changed, 1 insertion(+), 22 deletions(-)

diff --git a/commons-jcs-core/src/main/java/org/apache/commons/jcs/auxiliary/remote/RemoteCacheNoWaitFacade.java b/commons-jcs-core/src/main/java/org/apache/commons/jcs/auxiliary/remote/RemoteCacheNoWaitFacade.java
index 7276cc5a0..59608a172 100644
--- a/commons-jcs-core/src/main/java/org/apache/commons/jcs/auxiliary/remote/RemoteCacheNoWaitFacade.java
+++ b/commons-jcs-core/src/main/java/org/apache/commons/jcs/auxiliary/remote/RemoteCacheNoWaitFacade.java
@@ -1,25 +1,5 @@
 package org.apache.commons.jcs.auxiliary.remote;
 
-/*
- * Licensed to the Apache Software Foundation (ASF) under one
- * or more contributor license agreements.  See the NOTICE file
- * distributed with this work for additional information
- * regarding copyright ownership.  The ASF licenses this file
- * to you under the Apache License, Version 2.0 (the
- * "License"); you may not use this file except in compliance
- * with the License.  You may obtain a copy of the License at
- *
- *   http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing,
- * software distributed under the License is distributed on an
- * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
- * KIND, either express or implied.  See the License for the
- * specific language governing permissions and limitations
- * under the License.
- */
-
-import java.util.ArrayList;
 import java.util.List;
 
 import org.apache.commons.jcs.auxiliary.remote.server.behavior.RemoteType;
@@ -68,10 +48,9 @@ public RemoteCacheNoWaitFacade( List<ICache<K, V>> noWaits,
         super( noWaits, rca, cacheMgr, cacheEventLogger, elementSerializer );
         this.cacheFactory = cacheFactory;
 
-        for (RemoteCacheNoWait<K,V> rcnw : new ArrayList<RemoteCacheNoWait<K, V>>(this.noWaits))
+        for (RemoteCacheNoWait<K,V> rcnw : this.noWaits)
         {
             ((RemoteCache<K, V>)rcnw.getRemoteCache()).setFacade(this);
-            this.noWaits.add(rcnw);
         }
     }
 
