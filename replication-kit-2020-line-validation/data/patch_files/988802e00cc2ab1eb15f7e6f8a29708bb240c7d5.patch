From 988802e00cc2ab1eb15f7e6f8a29708bb240c7d5 Mon Sep 17 00:00:00 2001
From: Sebastian Bazley <sebb@apache.org>
Date: Tue, 25 Aug 2015 22:58:56 +0000
Subject: [PATCH] BCEL-221 Test case for BCELifier. Only runs interactively by
 default because it currently fails

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/bcel/trunk@1697784 13f79535-47bb-0310-9956-ffa450edef68
---
 .../commons/bcel6/util/BCELifierTestCase.java | 23 +++++++++++++++++++
 1 file changed, 23 insertions(+)
 create mode 100644 src/test/java/org/apache/commons/bcel6/util/BCELifierTestCase.java

diff --git a/src/test/java/org/apache/commons/bcel6/util/BCELifierTestCase.java b/src/test/java/org/apache/commons/bcel6/util/BCELifierTestCase.java
new file mode 100644
index 0000000000..c21f4153d8
--- /dev/null
+++ b/src/test/java/org/apache/commons/bcel6/util/BCELifierTestCase.java
@@ -0,0 +1,23 @@
+package org.apache.commons.bcel6.util;
+
+import static org.junit.Assert.*;
+
+import org.apache.commons.bcel6.classfile.JavaClass;
+import org.junit.Test;
+import static org.junit.Assume.assumeTrue;
+
+public class BCELifierTestCase {
+
+    // A bit of a hack - we use the same property as for the perf test for now
+    private static final boolean REPORT = Boolean.parseBoolean(System.getProperty("PerformanceTest.report", "true"));;
+
+    @Test
+    public void test() throws Exception {
+        assumeTrue(REPORT); // set to false by pom so this will only run on demand
+        JavaClass java_class = BCELifier.getJavaClass("Java8Example");
+        assertNotNull(java_class);
+        BCELifier bcelifier = new BCELifier(java_class, System.out);
+        bcelifier.start();
+    }
+
+}
