From 0ef44fcc258f2e928532ca3af50e6b7b4a50df28 Mon Sep 17 00:00:00 2001
From: Xavier Hanin <xavier@apache.org>
Date: Wed, 7 Mar 2007 22:40:38 +0000
Subject: [PATCH] FIX: FileSystemResolverTest failing due to IVY-420
 modification

git-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/core/trunk@515818 13f79535-47bb-0310-9956-ffa450edef68
---
 .../resolver/FileSystemResolverTest.java      | 20 +++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)

diff --git a/test/java/org/apache/ivy/plugins/resolver/FileSystemResolverTest.java b/test/java/org/apache/ivy/plugins/resolver/FileSystemResolverTest.java
index 3ce51474c..fd83427c6 100644
--- a/test/java/org/apache/ivy/plugins/resolver/FileSystemResolverTest.java
+++ b/test/java/org/apache/ivy/plugins/resolver/FileSystemResolverTest.java
@@ -215,7 +215,7 @@ public void testCheckModified() throws Exception {
         
         resolver.addIvyPattern("test"+FS+"repositories"+FS+"checkmodified"+FS+"ivy-[revision].xml");
         File modify = new File("test/repositories/checkmodified/ivy-1.0.xml");
-        FileUtil.copy(new File("test/repositories/checkmodified/ivy-1.0-before.xml"), modify, null);
+        FileUtil.copy(new File("test/repositories/checkmodified/ivy-1.0-before.xml"), modify, null, true);
         Date pubdate = new GregorianCalendar(2004, 10, 1, 11, 0, 0).getTime();
         modify.setLastModified(pubdate.getTime());
         
@@ -227,7 +227,7 @@ public void testCheckModified() throws Exception {
         assertEquals(pubdate, rmr.getPublicationDate());
                 
         // updates ivy file in repository
-        FileUtil.copy(new File("test/repositories/checkmodified/ivy-1.0-after.xml"), modify, null);
+        FileUtil.copy(new File("test/repositories/checkmodified/ivy-1.0-after.xml"), modify, null, true);
         pubdate = new GregorianCalendar(2005, 4, 1, 11, 0, 0).getTime();
         modify.setLastModified(pubdate.getTime());
         
@@ -261,8 +261,8 @@ public void testNoRevision() throws Exception {
         File artifact = new File("test/repositories/norevision/mod1.1.jar");
         
         // 'publish' 'before' version
-        FileUtil.copy(new File("test/repositories/norevision/ivy-mod1.1-before.xml"), modify, null);
-        FileUtil.copy(new File("test/repositories/norevision/mod1.1-before.jar"), artifact, null);
+        FileUtil.copy(new File("test/repositories/norevision/ivy-mod1.1-before.xml"), modify, null, true);
+        FileUtil.copy(new File("test/repositories/norevision/mod1.1-before.jar"), artifact, null, true);
         Date pubdate = new GregorianCalendar(2004, 10, 1, 11, 0, 0).getTime();
         modify.setLastModified(pubdate.getTime());
         
@@ -282,8 +282,8 @@ public void testNoRevision() throws Exception {
         r.close();
                 
         // updates ivy file and artifact in repository 
-        FileUtil.copy(new File("test/repositories/norevision/ivy-mod1.1-after.xml"), modify, null);
-        FileUtil.copy(new File("test/repositories/norevision/mod1.1-after.jar"), artifact, null);
+        FileUtil.copy(new File("test/repositories/norevision/ivy-mod1.1-after.xml"), modify, null, true);
+        FileUtil.copy(new File("test/repositories/norevision/mod1.1-after.jar"), artifact, null, true);
         pubdate = new GregorianCalendar(2005, 4, 1, 11, 0, 0).getTime();
         modify.setLastModified(pubdate.getTime());
         // no need to update new artifact timestamp cause it isn't used
@@ -323,8 +323,8 @@ public void testChanging() throws Exception {
         File artifact = new File("test/repositories/checkmodified/mod1.1-1.0.jar");
         
         // 'publish' 'before' version
-        FileUtil.copy(new File("test/repositories/checkmodified/ivy-1.0-before.xml"), modify, null);
-        FileUtil.copy(new File("test/repositories/checkmodified/mod1.1-1.0-before.jar"), artifact, null);
+        FileUtil.copy(new File("test/repositories/checkmodified/ivy-1.0-before.xml"), modify, null, true);
+        FileUtil.copy(new File("test/repositories/checkmodified/mod1.1-1.0-before.jar"), artifact, null, true);
         Date pubdate = new GregorianCalendar(2004, 10, 1, 11, 0, 0).getTime();
         modify.setLastModified(pubdate.getTime());
         
@@ -344,8 +344,8 @@ public void testChanging() throws Exception {
         r.close();
                 
         // updates ivy file and artifact in repository 
-        FileUtil.copy(new File("test/repositories/checkmodified/ivy-1.0-after.xml"), modify, null);
-        FileUtil.copy(new File("test/repositories/checkmodified/mod1.1-1.0-after.jar"), artifact, null);
+        FileUtil.copy(new File("test/repositories/checkmodified/ivy-1.0-after.xml"), modify, null, true);
+        FileUtil.copy(new File("test/repositories/checkmodified/mod1.1-1.0-after.jar"), artifact, null, true);
         pubdate = new GregorianCalendar(2005, 4, 1, 11, 0, 0).getTime();
         modify.setLastModified(pubdate.getTime());
         // no need to update new artifact timestamp cause it isn't used
