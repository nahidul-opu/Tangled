From fc82413086bb50cfbbee59c9dc8818a2dafa193e Mon Sep 17 00:00:00 2001
From: Colm O Heigeartaigh <coheigea@apache.org>
Date: Wed, 8 Oct 2014 08:19:19 +0000
Subject: [PATCH] [SANTUARIO-401] - XmlWriterToTree can write out xmlns:null
 for a null prefix

git-svn-id: https://svn.apache.org/repos/asf/santuario/xml-security-java/trunk@1630027 13f79535-47bb-0310-9956-ffa450edef68
---
 .../org/apache/jcp/xml/dsig/internal/dom/XmlWriterToTree.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/main/java/org/apache/jcp/xml/dsig/internal/dom/XmlWriterToTree.java b/src/main/java/org/apache/jcp/xml/dsig/internal/dom/XmlWriterToTree.java
index 2ea50ccc11..7d02044a12 100644
--- a/src/main/java/org/apache/jcp/xml/dsig/internal/dom/XmlWriterToTree.java
+++ b/src/main/java/org/apache/jcp/xml/dsig/internal/dom/XmlWriterToTree.java
@@ -107,7 +107,7 @@ public void writeTextElement(String prefix, String localName, String namespaceUR
 
     @Override
     public void writeNamespace(String prefix, String namespaceURI) {
-        if ("".equals(prefix)) {
+        if ("".equals(prefix) || prefix == null) {
             writeAttribute(null, XMLConstants.XMLNS_ATTRIBUTE_NS_URI, "xmlns", namespaceURI);
         }
         else {
