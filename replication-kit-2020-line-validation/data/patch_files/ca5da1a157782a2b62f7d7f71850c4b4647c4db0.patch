From ca5da1a157782a2b62f7d7f71850c4b4647c4db0 Mon Sep 17 00:00:00 2001
From: Sebastian Bazley <sebb@apache.org>
Date: Tue, 9 Nov 2010 01:37:33 +0000
Subject: [PATCH] Revert NET-276 changes that break the binary API Will be
 re-applied in 3.0

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/net/trunk@1032805 13f79535-47bb-0310-9956-ffa450edef68
---
 .../commons/net/nntp/ArticlePointer.java       |  2 +-
 .../apache/commons/net/nntp/NNTPClient.java    | 18 +++++++++---------
 .../apache/commons/net/nntp/NewsgroupInfo.java | 16 ++++++++--------
 3 files changed, 18 insertions(+), 18 deletions(-)

diff --git a/src/main/java/org/apache/commons/net/nntp/ArticlePointer.java b/src/main/java/org/apache/commons/net/nntp/ArticlePointer.java
index f4b89f7cd..113f6dc10 100644
--- a/src/main/java/org/apache/commons/net/nntp/ArticlePointer.java
+++ b/src/main/java/org/apache/commons/net/nntp/ArticlePointer.java
@@ -28,7 +28,7 @@
 public final class ArticlePointer
 {
     /** The number of the referenced article. */
-    public long articleNumber;
+    public int articleNumber;
     /**
      * The unique id of the referenced article, including the enclosing
      * &lt and &gt symbols which are technically not part of the
diff --git a/src/main/java/org/apache/commons/net/nntp/NNTPClient.java b/src/main/java/org/apache/commons/net/nntp/NNTPClient.java
index 2e7a81500..c6dd0e65b 100644
--- a/src/main/java/org/apache/commons/net/nntp/NNTPClient.java
+++ b/src/main/java/org/apache/commons/net/nntp/NNTPClient.java
@@ -108,7 +108,7 @@ private void __parseArticlePointer(String reply, ArticlePointer pointer)
             // Get article number
             try
             {
-                pointer.articleNumber = Long.parseLong(tokenizer.nextToken());
+                pointer.articleNumber = Integer.parseInt(tokenizer.nextToken());
             }
             catch (NumberFormatException e)
             {
@@ -153,9 +153,9 @@ private void __parseGroupReply(String reply, NewsgroupInfo info)
 
             try
             {
-                info._setArticleCount(Long.parseLong(count));
-                info._setFirstArticle(Long.parseLong(first));
-                info._setLastArticle(Long.parseLong(last));
+                info._setArticleCount(Integer.parseInt(count));
+                info._setFirstArticle(Integer.parseInt(first));
+                info._setLastArticle(Integer.parseInt(last));
             }
             catch (NumberFormatException e)
             {
@@ -176,7 +176,7 @@ private NewsgroupInfo __parseNewsgroupListEntry(String entry)
     {
         NewsgroupInfo result;
         StringTokenizer tokenizer;
-        long lastNum, firstNum;
+        int lastNum, firstNum;
         String last, first, permission;
 
         result = new NewsgroupInfo();
@@ -192,8 +192,8 @@ private NewsgroupInfo __parseNewsgroupListEntry(String entry)
 
         try
         {
-            lastNum = Long.parseLong(last);
-            firstNum = Long.parseLong(first);
+            lastNum = Integer.parseInt(last);
+            firstNum = Integer.parseInt(first);
             result._setFirstArticle(firstNum);
             result._setLastArticle(lastNum);
 
@@ -1212,8 +1212,8 @@ public Reader retrieveArticleInfo(int articleNumber) throws IOException
      * @return a DotTerminatedReader if successful, null otherwise
      * @throws IOException
      */
-    public Reader retrieveArticleInfo(long lowArticleNumber,
-                                      long highArticleNumber)
+    public Reader retrieveArticleInfo(int lowArticleNumber,
+                                      int highArticleNumber)
         throws IOException
     {
         return
diff --git a/src/main/java/org/apache/commons/net/nntp/NewsgroupInfo.java b/src/main/java/org/apache/commons/net/nntp/NewsgroupInfo.java
index 2d20015df..d7415deb6 100644
--- a/src/main/java/org/apache/commons/net/nntp/NewsgroupInfo.java
+++ b/src/main/java/org/apache/commons/net/nntp/NewsgroupInfo.java
@@ -54,8 +54,8 @@ public final class NewsgroupInfo
     public static final int PROHIBITED_POSTING_PERMISSION = 3;
 
     private String __newsgroup;
-    private long __estimatedArticleCount;
-    private long __firstArticle, __lastArticle;
+    private int __estimatedArticleCount;
+    private int __firstArticle, __lastArticle;
     private int __postingPermission;
 
     void _setNewsgroup(String newsgroup)
@@ -63,17 +63,17 @@ void _setNewsgroup(String newsgroup)
         __newsgroup = newsgroup;
     }
 
-    void _setArticleCount(long count)
+    void _setArticleCount(int count)
     {
         __estimatedArticleCount = count;
     }
 
-    void _setFirstArticle(long first)
+    void _setFirstArticle(int first)
     {
         __firstArticle = first;
     }
 
-    void _setLastArticle(long last)
+    void _setLastArticle(int last)
     {
         __lastArticle = last;
     }
@@ -99,7 +99,7 @@ public String getNewsgroup()
      * <p>
      * @return The estimated number of articles in the newsgroup.
      ***/
-    public long getArticleCount()
+    public int getArticleCount()
     {
         return __estimatedArticleCount;
     }
@@ -109,7 +109,7 @@ public long getArticleCount()
      * <p>
      * @return The number of the first article in the newsgroup.
      ***/
-    public long getFirstArticle()
+    public int getFirstArticle()
     {
         return __firstArticle;
     }
@@ -119,7 +119,7 @@ public long getFirstArticle()
      * <p>
      * @return The number of the last article in the newsgroup.
      ***/
-    public long getLastArticle()
+    public int getLastArticle()
     {
         return __lastArticle;
     }
