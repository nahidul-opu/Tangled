From e297cbdacda7926439a91c3a075986eb82e0f6e5 Mon Sep 17 00:00:00 2001
From: William Colen <colen@apache.org>
Date: Wed, 1 Aug 2012 14:21:35 +0000
Subject: [PATCH] OPENNLP-530: Changed AD NameFinder corpus to work with
 contractions with missing <-sam> tag (Amazonia corpus)

git-svn-id: https://svn.apache.org/repos/asf/opennlp/trunk@1368013 13f79535-47bb-0310-9956-ffa450edef68
---
 .../tools/formats/ad/ADNameSampleStream.java  | 24 +++++++------------
 1 file changed, 9 insertions(+), 15 deletions(-)

diff --git a/opennlp-tools/src/main/java/opennlp/tools/formats/ad/ADNameSampleStream.java b/opennlp-tools/src/main/java/opennlp/tools/formats/ad/ADNameSampleStream.java
index d52487f82..a6a7e2395 100644
--- a/opennlp-tools/src/main/java/opennlp/tools/formats/ad/ADNameSampleStream.java
+++ b/opennlp-tools/src/main/java/opennlp/tools/formats/ad/ADNameSampleStream.java
@@ -264,26 +264,20 @@ private void processLeaf(Leaf leaf, List<String> sentence,
 
     if (leftContractionPart != null) {
       // will handle the contraction
-      String tag = leaf.getSecondaryTag();
       String right = leaf.getLexeme();
-      if (tag != null && tag.contains("<-sam>")) {
-        right = leaf.getLexeme();
-        String c = PortugueseContractionUtility.toContraction(leftContractionPart, right);
-
-        if (c != null) {
-          String[] parts = whitespacePattern.split(c);
-          sentence.addAll(Arrays.asList(parts));
-        } else {
-          // contraction was missing!
-          sentence.add(leftContractionPart);
-          sentence.add(right);
-        }
 
+      String c = PortugueseContractionUtility.toContraction(
+          leftContractionPart, right);
+      if (c != null) {
+        String[] parts = whitespacePattern.split(c);
+        sentence.addAll(Arrays.asList(parts));
+        alreadyAdded = true;
       } else {
-        // could not match contraction !
+        // contraction was missing! why?
+        sentence.add(leftContractionPart);
+        // keep alreadyAdded false.
       }
       leftContractionPart = null;
-      alreadyAdded = true;
     }
 
       String namedEntityTag = null;
