From 19c8ec4ace96b17b62406836fef2dfa9c57592b0 Mon Sep 17 00:00:00 2001
From: William Colen <colen@apache.org>
Date: Wed, 14 Mar 2012 14:34:45 +0000
Subject: [PATCH] OPENNLP-466: Loading the resource file was failing in some
 OS. Will create the file from a URI.

git-svn-id: https://svn.apache.org/repos/asf/opennlp/trunk@1300563 13f79535-47bb-0310-9956-ffa450edef68
---
 .../namefind/TokenNameFinderCrossValidatorTest.java | 13 ++++++++-----
 1 file changed, 8 insertions(+), 5 deletions(-)

diff --git a/opennlp-tools/src/test/java/opennlp/tools/namefind/TokenNameFinderCrossValidatorTest.java b/opennlp-tools/src/test/java/opennlp/tools/namefind/TokenNameFinderCrossValidatorTest.java
index 718bc9707..457bb5894 100644
--- a/opennlp-tools/src/test/java/opennlp/tools/namefind/TokenNameFinderCrossValidatorTest.java
+++ b/opennlp-tools/src/test/java/opennlp/tools/namefind/TokenNameFinderCrossValidatorTest.java
@@ -20,6 +20,7 @@
 import static org.junit.Assert.*;
 
 import java.io.ByteArrayOutputStream;
+import java.io.File;
 import java.io.FileInputStream;
 import java.util.Collections;
 import java.util.Map;
@@ -35,7 +36,7 @@
 
 public class TokenNameFinderCrossValidatorTest {
 
-  private final String TYPE = "default";
+  private final String TYPE = null;
 
   @Test
   /**
@@ -43,9 +44,10 @@ public class TokenNameFinderCrossValidatorTest {
    */
   public void testWithNullResources() throws Exception {
 
-    FileInputStream sampleDataIn = new FileInputStream(getClass()
+    FileInputStream sampleDataIn = new FileInputStream(new File(getClass()
         .getClassLoader()
-        .getResource("opennlp/tools/namefind/AnnotatedSentences.txt").getFile());
+        .getResource("opennlp/tools/namefind/AnnotatedSentences.txt").toURI()));
+
     ObjectStream<NameSample> sampleStream = new NameSampleDataStream(
         new PlainTextByLineStream(sampleDataIn.getChannel(), "ISO-8859-1"));
 
@@ -67,9 +69,10 @@ public void testWithNullResources() throws Exception {
    */
   public void testWithNameEvaluationErrorListener() throws Exception {
 
-    FileInputStream sampleDataIn = new FileInputStream(getClass()
+    FileInputStream sampleDataIn = new FileInputStream(new File(getClass()
         .getClassLoader()
-        .getResource("opennlp/tools/namefind/AnnotatedSentences.txt").getFile());
+        .getResource("opennlp/tools/namefind/AnnotatedSentences.txt").toURI()));
+
     ObjectStream<NameSample> sampleStream = new NameSampleDataStream(
         new PlainTextByLineStream(sampleDataIn.getChannel(), "ISO-8859-1"));
 
