From 441ec8bef03644c9d629f871993c14ff5442409a Mon Sep 17 00:00:00 2001
From: Maja Kabiljo <majakabiljo@fb.com>
Date: Tue, 24 Jun 2014 09:55:28 -0700
Subject: [PATCH] GIRAPH-916: Wrong number of vertices stored reported to
 command line (majakabiljo)

---
 CHANGELOG                                                       | 2 ++
 .../main/java/org/apache/giraph/worker/BspServiceWorker.java    | 2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/CHANGELOG b/CHANGELOG
index 8da555da9..2929c6675 100644
--- a/CHANGELOG
+++ b/CHANGELOG
@@ -1,6 +1,8 @@
 Giraph Change Log
 
 Release 1.1.0 - unreleased
+  GIRAPH-916: Wrong number of vertices stored reported to command line (majakabiljo)
+
   GIRAPH-919: Add worker to worker communication (majakabiljo)
 
   GIRAPH-922: SimpleEdgeStore has a bug causing NPE (pavanka)
diff --git a/giraph-core/src/main/java/org/apache/giraph/worker/BspServiceWorker.java b/giraph-core/src/main/java/org/apache/giraph/worker/BspServiceWorker.java
index 8dcf19a60..dbe6a451a 100644
--- a/giraph-core/src/main/java/org/apache/giraph/worker/BspServiceWorker.java
+++ b/giraph-core/src/main/java/org/apache/giraph/worker/BspServiceWorker.java
@@ -1109,7 +1109,7 @@ public Void call() throws Exception {
             vertexWriter.setConf(getConfiguration());
             vertexWriter.initialize(getContext());
             long nextPrintVertices = 0;
-            long nextUpdateProgressVertices = 0;
+            long nextUpdateProgressVertices = VERTICES_TO_UPDATE_PROGRESS;
             long nextPrintMsecs = System.currentTimeMillis() + 15000;
             int partitionIndex = 0;
             int numPartitions = getPartitionStore().getNumPartitions();
