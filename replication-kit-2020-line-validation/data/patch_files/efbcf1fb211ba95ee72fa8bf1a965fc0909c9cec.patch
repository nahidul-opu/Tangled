From efbcf1fb211ba95ee72fa8bf1a965fc0909c9cec Mon Sep 17 00:00:00 2001
From: Niall Pemberton <niallp@apache.org>
Date: Sun, 21 Nov 2010 23:48:12 +0000
Subject: [PATCH] BEANUTILS-381 Fix test case broken by changes

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/beanutils/trunk@1037577 13f79535-47bb-0310-9956-ffa450edef68
---
 .../java/org/apache/commons/beanutils/MethodUtils.java     | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/src/main/java/org/apache/commons/beanutils/MethodUtils.java b/src/main/java/org/apache/commons/beanutils/MethodUtils.java
index d01191daa..75a6e4fbc 100644
--- a/src/main/java/org/apache/commons/beanutils/MethodUtils.java
+++ b/src/main/java/org/apache/commons/beanutils/MethodUtils.java
@@ -1119,6 +1119,13 @@ private static float getTotalTransformationCost(Class[] srcArgs, Class[] destArg
     private static float getObjectTransformationCost(Class srcClass, Class destClass) {
         float cost = 0.0f;
         while (srcClass != null && !destClass.equals(srcClass)) {
+            if (destClass.isPrimitive()) {
+                Class destClassWrapperClazz = getPrimitiveWrapper(destClass);
+                if (destClassWrapperClazz != null && destClassWrapperClazz.equals(srcClass)) {
+                    cost += 0.25f;
+                    break;
+                }
+            }
             if (destClass.isInterface() && isAssignmentCompatible(destClass,srcClass)) {
                 // slight penalty for interface match. 
                 // we still want an exact match to override an interface match, but  
