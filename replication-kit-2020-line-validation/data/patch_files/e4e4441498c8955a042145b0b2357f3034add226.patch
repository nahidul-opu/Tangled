From e4e4441498c8955a042145b0b2357f3034add226 Mon Sep 17 00:00:00 2001
From: Maarten Coene <maartenc@apache.org>
Date: Tue, 5 Aug 2008 22:45:50 +0000
Subject: [PATCH] Attempt to fix IVY-652

git-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@683017 13f79535-47bb-0310-9956-ffa450edef68
---
 .../apache/ivy/plugins/repository/url/URLRepository.java    | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/src/java/org/apache/ivy/plugins/repository/url/URLRepository.java b/src/java/org/apache/ivy/plugins/repository/url/URLRepository.java
index 9c8e4241b..bb22fcaef 100644
--- a/src/java/org/apache/ivy/plugins/repository/url/URLRepository.java
+++ b/src/java/org/apache/ivy/plugins/repository/url/URLRepository.java
@@ -40,6 +40,7 @@ public class URLRepository extends AbstractRepository {
     private Map resourcesCache = new HashMap();
 
     public Resource getResource(String source) throws IOException {
+        source = encode(source);
         Resource res = (Resource) resourcesCache.get(source);
         if (res == null) {
             res = new URLResource(new URL(source));
@@ -47,6 +48,11 @@ public Resource getResource(String source) throws IOException {
         }
         return res;
     }
+    
+    private static String encode(String source) {
+        // TODO: add some more URL encodings here
+        return source.trim().replaceAll(" ", "%20");
+    }
 
     public void get(String source, File destination) throws IOException {
         fireTransferInitiated(getResource(source), TransferEvent.REQUEST_GET);
