From 1afa3ff0ba0cc7b939d4b4edeaa8364186c30e78 Mon Sep 17 00:00:00 2001
From: Phil Steitz <psteitz@apache.org>
Date: Mon, 21 Aug 2006 00:35:13 +0000
Subject: [PATCH] Made userKeys an instance variable (i.e., not static) in
 SharedPoolDataSource. Jira: DBCP-100

git-svn-id: https://svn.apache.org/repos/asf/jakarta/commons/proper/dbcp/trunk@433104 13f79535-47bb-0310-9956-ffa450edef68
---
 .../apache/commons/dbcp/datasources/SharedPoolDataSource.java | 2 +-
 xdocs/changes.xml                                             | 4 ++++
 2 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/src/java/org/apache/commons/dbcp/datasources/SharedPoolDataSource.java b/src/java/org/apache/commons/dbcp/datasources/SharedPoolDataSource.java
index 510aa05ed5..c480d11a6f 100644
--- a/src/java/org/apache/commons/dbcp/datasources/SharedPoolDataSource.java
+++ b/src/java/org/apache/commons/dbcp/datasources/SharedPoolDataSource.java
@@ -45,7 +45,7 @@
 public class SharedPoolDataSource
     extends InstanceKeyDataSource {
 
-    private static final Map userKeys = new LRUMap(10);
+    private final Map userKeys = new LRUMap(10);
 
     private int maxActive = GenericObjectPool.DEFAULT_MAX_ACTIVE;
     private int maxIdle = GenericObjectPool.DEFAULT_MAX_IDLE;
diff --git a/xdocs/changes.xml b/xdocs/changes.xml
index 3d3ed0b7c6..4104bc2622 100644
--- a/xdocs/changes.xml
+++ b/xdocs/changes.xml
@@ -130,6 +130,10 @@ The <action> type attribute can be add,update,fix,remove.
         like a negative value, to be consistent with documentation
         and pool behavior.
       </action>
+      <action dev="psteitz" type="fix" issue="DBCP-100">
+        Made userKeys an instance variable (i.e., not static)
+        in SharedPoolDataSource.
+      </action>
     </release>   
 
     <release version="1.2.1" date="2004-06-12" description="Maintenance Release to restore JDK 1.3 compatibility">
