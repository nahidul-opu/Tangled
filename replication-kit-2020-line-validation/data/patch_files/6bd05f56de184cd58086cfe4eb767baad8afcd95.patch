From 6bd05f56de184cd58086cfe4eb767baad8afcd95 Mon Sep 17 00:00:00 2001
From: William Colen <colen@apache.org>
Date: Sun, 18 Mar 2012 15:44:38 +0000
Subject: [PATCH] OPENNLP-452: Modified to support reseting. Please review.

git-svn-id: https://svn.apache.org/repos/asf/opennlp/trunk@1302142 13f79535-47bb-0310-9956-ffa450edef68
---
 .../util/eval/CrossValidationPartitioner.java  | 18 +++++++++++++-----
 1 file changed, 13 insertions(+), 5 deletions(-)

diff --git a/opennlp-tools/src/main/java/opennlp/tools/util/eval/CrossValidationPartitioner.java b/opennlp-tools/src/main/java/opennlp/tools/util/eval/CrossValidationPartitioner.java
index 60d630094..b8aa87e7f 100644
--- a/opennlp-tools/src/main/java/opennlp/tools/util/eval/CrossValidationPartitioner.java
+++ b/opennlp-tools/src/main/java/opennlp/tools/util/eval/CrossValidationPartitioner.java
@@ -151,14 +151,22 @@ public E read() throws IOException {
       
       return sampleStream.read();
     }
-    
+
     /**
-     * Throws <code>UnsupportedOperationException</code>
+     * Resets the training sample. Use this if you need to collect things before
+     * training, for example, to collect induced abbreviations or create a POS
+     * Dictionary.
+     * 
+     * @throws IOException
      */
-    public void reset() {
-      throw new UnsupportedOperationException();
+    public void reset() throws IOException {
+      if (testSampleStream != null || isPoisened) {
+        throw new IllegalStateException();
+      }
+      this.index = 0;
+      this.sampleStream.reset();
     }
-    
+
     public void close() throws IOException {
       sampleStream.close();
       poison();
