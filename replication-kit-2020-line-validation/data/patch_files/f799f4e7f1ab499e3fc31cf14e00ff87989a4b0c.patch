From f799f4e7f1ab499e3fc31cf14e00ff87989a4b0c Mon Sep 17 00:00:00 2001
From: Xavier Hanin <xavier@apache.org>
Date: Mon, 20 Feb 2006 17:20:57 +0000
Subject: [PATCH] add junit test for IVY-177

git-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/trunk@484219 13f79535-47bb-0310-9956-ffa450edef68
---
 .../jayasoft/ivy/xml/XmlModuleDescriptorParserTest.java  | 9 +++++++++
 test/java/fr/jayasoft/ivy/xml/test-bad-org.xml           | 6 ++++++
 2 files changed, 15 insertions(+)
 create mode 100644 test/java/fr/jayasoft/ivy/xml/test-bad-org.xml

diff --git a/test/java/fr/jayasoft/ivy/xml/XmlModuleDescriptorParserTest.java b/test/java/fr/jayasoft/ivy/xml/XmlModuleDescriptorParserTest.java
index 8cea3e5bc..0aab108bc 100644
--- a/test/java/fr/jayasoft/ivy/xml/XmlModuleDescriptorParserTest.java
+++ b/test/java/fr/jayasoft/ivy/xml/XmlModuleDescriptorParserTest.java
@@ -61,6 +61,15 @@ public void testBad() throws IOException {
         }
     }
 
+    public void testBad2() throws IOException {
+        try {
+            XmlModuleDescriptorParser.getInstance().parseDescriptor(_ivy, getClass().getResource("test-bad-org.xml"), true);
+            fail("bad ivy file raised no error");
+        } catch (ParseException ex) {
+            // ok
+        }
+    }
+
     public void testNoValidate() throws IOException, ParseException {
         XmlModuleDescriptorParser.getInstance().parseDescriptor(_ivy, getClass().getResource("test-novalidate.xml"), false);
     }
diff --git a/test/java/fr/jayasoft/ivy/xml/test-bad-org.xml b/test/java/fr/jayasoft/ivy/xml/test-bad-org.xml
new file mode 100644
index 000000000..544218891
--- /dev/null
+++ b/test/java/fr/jayasoft/ivy/xml/test-bad-org.xml
@@ -0,0 +1,6 @@
+<ivy-module version="1.0">
+	<info organization="myorg"
+	       module="mymodule"
+	       status="integration"
+	/>
+</ivy-module>
