From cc8870db1014308fb6f426aa72ae697e25a6a199 Mon Sep 17 00:00:00 2001
From: Rory Winston <rwinston@apache.org>
Date: Mon, 8 Mar 2010 06:14:46 +0000
Subject: [PATCH] Fixed NET-300

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/net/branches/NET_2_0@920203 13f79535-47bb-0310-9956-ffa450edef68
---
 .../org/apache/commons/net/ftp/FTPClient.java     | 15 +++++++++++----
 1 file changed, 11 insertions(+), 4 deletions(-)

diff --git a/src/main/java/org/apache/commons/net/ftp/FTPClient.java b/src/main/java/org/apache/commons/net/ftp/FTPClient.java
index de81de8d0..035ccb467 100644
--- a/src/main/java/org/apache/commons/net/ftp/FTPClient.java
+++ b/src/main/java/org/apache/commons/net/ftp/FTPClient.java
@@ -2335,10 +2335,17 @@ private FTPListParseEngine initiateListParsing(
     protected String getListArguments(String pathname) {
         if (getListHiddenFiles())
         {
-            StringBuffer sb = new StringBuffer(pathname.length() + 3);
-            sb.append("-a ");
-            sb.append(pathname);
-            return sb.toString();
+            if (pathname != null)
+            {
+                StringBuffer sb = new StringBuffer(pathname.length() + 3);
+                sb.append("-a ");
+                sb.append(pathname);
+                return sb.toString();
+            }
+            else
+            {
+                return "-a";
+            }
         }
         
         return pathname;
