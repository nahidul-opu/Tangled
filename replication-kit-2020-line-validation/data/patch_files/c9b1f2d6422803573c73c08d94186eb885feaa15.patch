From c9b1f2d6422803573c73c08d94186eb885feaa15 Mon Sep 17 00:00:00 2001
From: Xavier Hanin <xavier@apache.org>
Date: Wed, 1 Jul 2009 05:55:38 +0000
Subject: [PATCH] FIX: NPE when a conf is unknown (related to IVY-983)

git-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@790046 13f79535-47bb-0310-9956-ffa450edef68
---
 .../org/apache/ivy/core/resolve/IvyNodeCallers.java    | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

diff --git a/src/java/org/apache/ivy/core/resolve/IvyNodeCallers.java b/src/java/org/apache/ivy/core/resolve/IvyNodeCallers.java
index d2555dce6..3902c0922 100644
--- a/src/java/org/apache/ivy/core/resolve/IvyNodeCallers.java
+++ b/src/java/org/apache/ivy/core/resolve/IvyNodeCallers.java
@@ -60,10 +60,12 @@ public Caller(ModuleDescriptor md, ModuleRevisionId mrid, DependencyDescriptor d
         public void addConfiguration(String callerConf, String[] dependencyConfs) {
             updateConfs(callerConf, dependencyConfs);
             Configuration conf = md.getConfiguration(callerConf);
-            String[] confExtends = conf.getExtends();
-            if (confExtends != null) {
-                for (int i = 0; i < confExtends.length; i++) {
-                    addConfiguration(confExtends[i], dependencyConfs);
+            if (conf != null) {
+                String[] confExtends = conf.getExtends();
+                if (confExtends != null) {
+                    for (int i = 0; i < confExtends.length; i++) {
+                        addConfiguration(confExtends[i], dependencyConfs);
+                    }
                 }
             }
         }
