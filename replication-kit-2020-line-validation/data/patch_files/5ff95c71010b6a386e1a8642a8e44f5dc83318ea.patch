From 5ff95c71010b6a386e1a8642a8e44f5dc83318ea Mon Sep 17 00:00:00 2001
From: Niall Pemberton <niallp@apache.org>
Date: Sun, 20 May 2007 06:47:00 +0000
Subject: [PATCH] Fix for BEANUTILS-249 - BeanUtilsBean does not convert
 objects using custom convertors properly - thanks to Brad

git-svn-id: https://svn.apache.org/repos/asf/jakarta/commons/proper/beanutils/trunk@539835 13f79535-47bb-0310-9956-ffa450edef68
---
 src/java/org/apache/commons/beanutils/BeanUtilsBean.java | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/src/java/org/apache/commons/beanutils/BeanUtilsBean.java b/src/java/org/apache/commons/beanutils/BeanUtilsBean.java
index c9aca2a03..c15779249 100644
--- a/src/java/org/apache/commons/beanutils/BeanUtilsBean.java
+++ b/src/java/org/apache/commons/beanutils/BeanUtilsBean.java
@@ -989,10 +989,8 @@ public void setProperty(Object bean, String name, Object value)
             } else if (value instanceof String[]) {
                 newValue = getConvertUtils().convert(((String[]) value)[0],
                                                 type);
-            } else if (getConvertUtils().lookup(value.getClass()) != null) {
-                newValue = getConvertUtils().convert(value.toString(), type);
             } else {
-                newValue = value;
+                newValue = getConvertUtils().convert(value, type);
             }
         }
 
