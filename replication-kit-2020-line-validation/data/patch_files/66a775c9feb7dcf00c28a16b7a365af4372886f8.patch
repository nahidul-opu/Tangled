From 66a775c9feb7dcf00c28a16b7a365af4372886f8 Mon Sep 17 00:00:00 2001
From: Gilles <erans@apache.org>
Date: Sat, 11 Jun 2016 20:08:32 +0200
Subject: [PATCH] MATH-1376

Fixed incorrect iteration number (variable was not updated).

Thanks to Thomas Weise for the report and fix.
---
 .../math4/optim/nonlinear/scalar/noderiv/SimplexOptimizer.java | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/main/java/org/apache/commons/math4/optim/nonlinear/scalar/noderiv/SimplexOptimizer.java b/src/main/java/org/apache/commons/math4/optim/nonlinear/scalar/noderiv/SimplexOptimizer.java
index c5bd08bb40..cd1ca1dd21 100644
--- a/src/main/java/org/apache/commons/math4/optim/nonlinear/scalar/noderiv/SimplexOptimizer.java
+++ b/src/main/java/org/apache/commons/math4/optim/nonlinear/scalar/noderiv/SimplexOptimizer.java
@@ -159,7 +159,8 @@ public int compare(final PointValuePair o1,
         int iteration = 0;
         final ConvergenceChecker<PointValuePair> checker = getConvergenceChecker();
         while (true) {
-            if (getIterations() > 0) {
+            iteration = getIterations();
+            if (iteration > 0) {
                 boolean converged = true;
                 for (int i = 0; i < simplex.getSize(); i++) {
                     PointValuePair prev = previous[i];
