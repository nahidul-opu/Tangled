From c9b273ce69ec731fa1d9c816e0fcb3e790fb7aec Mon Sep 17 00:00:00 2001
From: Scokart Gilles <gscokart@apache.org>
Date: Wed, 6 Aug 2008 09:10:07 +0000
Subject: [PATCH] fix unit test on IBM JVM (probably broken by IVY-868)

git-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@683187 13f79535-47bb-0310-9956-ffa450edef68
---
 test/java/org/apache/ivy/ant/IvyTaskTest.java | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/test/java/org/apache/ivy/ant/IvyTaskTest.java b/test/java/org/apache/ivy/ant/IvyTaskTest.java
index 709e06e25..63bf17748 100644
--- a/test/java/org/apache/ivy/ant/IvyTaskTest.java
+++ b/test/java/org/apache/ivy/ant/IvyTaskTest.java
@@ -50,7 +50,7 @@ public void doExecute() throws BuildException {
         assertEquals(new File("test/repositories/ivysettings.xml").getAbsolutePath().toUpperCase(),
             new File((String) settings.getVariables().getVariable("ivy.settings.file")).getAbsolutePath()
                     .toUpperCase());
-        assertEquals(new File("test/repositories/ivysettings.xml").toURL().toExternalForm()
+        assertEquals(new File("test/repositories/ivysettings.xml").toURI().toURL().toExternalForm()
                 .toUpperCase(), ((String) settings.getVariables().getVariable("ivy.settings.url"))
                 .toUpperCase());
         assertEquals(new File("test/repositories").getAbsolutePath().toUpperCase(),
@@ -82,7 +82,7 @@ public void doExecute() throws BuildException {
         assertEquals(new File("build/cache"), settings.getDefaultCache());
         assertEquals(new File("test/repositories/ivysettings.xml").getAbsolutePath(), settings
                 .getVariables().getVariable("ivy.settings.file"));
-        assertEquals(new File("test/repositories/ivysettings.xml").toURL().toExternalForm(),
+        assertEquals(new File("test/repositories/ivysettings.xml").toURI().toURL().toExternalForm(),
             settings.getVariables().getVariable("ivy.settings.url"));
         assertEquals(new File("test/repositories").getAbsolutePath(), settings.getVariables().getVariable(
             "ivy.settings.dir"));
