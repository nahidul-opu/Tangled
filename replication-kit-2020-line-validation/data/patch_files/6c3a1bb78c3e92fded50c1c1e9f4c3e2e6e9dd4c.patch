From 6c3a1bb78c3e92fded50c1c1e9f4c3e2e6e9dd4c Mon Sep 17 00:00:00 2001
From: "Gary D. Gregory" <ggregory@apache.org>
Date: Tue, 26 Apr 2016 23:59:45 +0000
Subject: [PATCH] [IO-502] Exceptions are suppressed incorrectly when copying
 files.

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/io/trunk@1741124 13f79535-47bb-0310-9956-ffa450edef68
---
 src/main/java/org/apache/commons/io/FileUtils.java | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/src/main/java/org/apache/commons/io/FileUtils.java b/src/main/java/org/apache/commons/io/FileUtils.java
index d2efb6f39b6..380d8659fca 100644
--- a/src/main/java/org/apache/commons/io/FileUtils.java
+++ b/src/main/java/org/apache/commons/io/FileUtils.java
@@ -1154,6 +1154,18 @@ private static void doCopyFile(final File srcFile, final File destFile, final bo
                 }
                 pos += bytesCopied;
             }
+
+            output.close();
+            output = null;
+
+            fos.close();
+            fos = null;
+
+            input.close();
+            input = null;
+
+            fis.close();
+            fis = null;
         } finally {
             IOUtils.closeQuietly(output, fos, input, fis);
         }
