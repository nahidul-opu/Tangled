From 5556026ed1dc17e70946a4a030842ade3a33baeb Mon Sep 17 00:00:00 2001
From: Nick Manley <nm3n8@mail.umkc.edu>
Date: Thu, 19 Nov 2015 23:24:05 -0600
Subject: [PATCH] Fix NullPointerException in FastDateParser$TimeZoneStrategy

---
 .../java/org/apache/commons/lang3/time/FastDateParser.java    | 3 +++
 .../lang3/time/FastDateParser_TimeZoneStrategyTest.java       | 4 +++-
 2 files changed, 6 insertions(+), 1 deletion(-)

diff --git a/src/main/java/org/apache/commons/lang3/time/FastDateParser.java b/src/main/java/org/apache/commons/lang3/time/FastDateParser.java
index 26538d738c9..6abcd035214 100644
--- a/src/main/java/org/apache/commons/lang3/time/FastDateParser.java
+++ b/src/main/java/org/apache/commons/lang3/time/FastDateParser.java
@@ -853,6 +853,9 @@ static class TimeZoneStrategy extends PatternStrategy {
                 final TimeZone tz = TimeZone.getTimeZone(tzId);
                 for(int i= 1; i<zoneNames.length; ++i) {
                     String zoneName = zoneNames[i];
+                    if (zoneName == null) {
+                        break;
+                    }
                     if (tzNames.put(zoneName.toLowerCase(locale), tz) == null) {
                         simpleQuote(sb.append('|'), zoneName);
                     }
diff --git a/src/test/java/org/apache/commons/lang3/time/FastDateParser_TimeZoneStrategyTest.java b/src/test/java/org/apache/commons/lang3/time/FastDateParser_TimeZoneStrategyTest.java
index 34a67c01240..be08454b5ba 100644
--- a/src/test/java/org/apache/commons/lang3/time/FastDateParser_TimeZoneStrategyTest.java
+++ b/src/test/java/org/apache/commons/lang3/time/FastDateParser_TimeZoneStrategyTest.java
@@ -33,7 +33,9 @@ public void testTimeZoneStrategyPattern() {
             for(final String[] zone :  zones) {
                 for(int t = 1; t<zone.length; ++t) {
                     final String tzDisplay = zone[t];
-
+                    if (tzDisplay == null) {
+                        break;
+                    }
                     try {
                         parser.parse(tzDisplay);
                     }
