From 33deae33c51d391f9fa1ca0a19fad921d16e93d1 Mon Sep 17 00:00:00 2001
From: Maarten Coene <maartenc@apache.org>
Date: Wed, 3 Feb 2010 21:02:28 +0000
Subject: [PATCH] Delete the invalid symlink instead of trying to overwrite it
 later (IVY-1165)

git-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@906240 13f79535-47bb-0310-9956-ffa450edef68
---
 src/java/org/apache/ivy/util/FileUtil.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/java/org/apache/ivy/util/FileUtil.java b/src/java/org/apache/ivy/util/FileUtil.java
index 522b42848..1c03e8b61 100644
--- a/src/java/org/apache/ivy/util/FileUtil.java
+++ b/src/java/org/apache/ivy/util/FileUtil.java
@@ -94,7 +94,7 @@ public static void symlink(File src, File dest, CopyProgressListener l, boolean
             
             // check if the result is a true symbolic link
             if (dest.getAbsolutePath().equals(dest.getCanonicalPath())) {
-                overwrite = true; // just make sure we do overwrite the invalid symlink!
+                dest.delete(); // just make sure we do delete the invalid symlink!
                 throw new IOException("error symlinking: " + dest + " isn't a symlink"); 
             }
         } catch (IOException x) {
