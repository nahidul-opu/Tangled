From 56c87a17189ea320ff5799f7d10789ca8d9ce958 Mon Sep 17 00:00:00 2001
From: "Gary D. Gregory" <ggregory@apache.org>
Date: Fri, 17 Feb 2012 23:04:03 +0000
Subject: [PATCH] [IO-303] TeeOutputStream fails executing branch.close() when
 main.close() raised an exception. Use a different impl with < LOCs.

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/io/trunk@1245797 13f79535-47bb-0310-9956-ffa450edef68
---
 .../java/org/apache/commons/io/output/TeeOutputStream.java  | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

diff --git a/src/main/java/org/apache/commons/io/output/TeeOutputStream.java b/src/main/java/org/apache/commons/io/output/TeeOutputStream.java
index 14400639d02..7e5e6be7f2b 100644
--- a/src/main/java/org/apache/commons/io/output/TeeOutputStream.java
+++ b/src/main/java/org/apache/commons/io/output/TeeOutputStream.java
@@ -98,14 +98,12 @@ public void flush() throws IOException {
      *             if an I/O error occurs
      */
     @Override
-    public void close() throws IOException {        
+    public void close() throws IOException {
         try {
             super.close();
-        } catch (IOException e) {
+        } finally {
             this.branch.close();
-            throw e;
         }
-        this.branch.close();
     }
 
 }
