From c6c86aa6520cbad5ce1c19782a92dc97bd910c1e Mon Sep 17 00:00:00 2001
From: Avery Ching <aching@fb.com>
Date: Mon, 30 Sep 2013 13:39:28 -0700
Subject: [PATCH] GIRAPH-761: GiraphFileInputFormat ignores hidden file filter
 in folders (Manuel Lagang via aching)

---
 CHANGELOG                                                      | 3 +++
 .../org/apache/giraph/io/formats/GiraphFileInputFormat.java    | 3 ++-
 2 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/CHANGELOG b/CHANGELOG
index bb2033bff..f960d0904 100644
--- a/CHANGELOG
+++ b/CHANGELOG
@@ -1,6 +1,9 @@
 Giraph Change Log
 
 Release 1.1.0 - unreleased
+  GIRAPH-761: GiraphFileInputFormat ignores hidden file filter in
+  folders (Manuel Lagang via aching)
+
   GIRAPH-771: Upgrade hive-io to 0.17 (majakabiljo)
 
   GIRAPH-756: Provide a way to halt running application (majakabiljo)
diff --git a/giraph-core/src/main/java/org/apache/giraph/io/formats/GiraphFileInputFormat.java b/giraph-core/src/main/java/org/apache/giraph/io/formats/GiraphFileInputFormat.java
index 7474aa36a..157a0c8cb 100644
--- a/giraph-core/src/main/java/org/apache/giraph/io/formats/GiraphFileInputFormat.java
+++ b/giraph-core/src/main/java/org/apache/giraph/io/formats/GiraphFileInputFormat.java
@@ -252,7 +252,8 @@ private List<FileStatus> listStatus(JobContext job, Path[] dirs)
       } else {
         for (FileStatus globStat: matches) {
           if (globStat.isDir()) {
-            Collections.addAll(result, fs.listStatus(globStat.getPath()));
+            Collections.addAll(result, fs.listStatus(globStat.getPath(),
+                inputFilter));
           } else {
             result.add(globStat);
           }
