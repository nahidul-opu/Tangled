From 7d3dd9e3aedbb664c4cbf76c1a09c963798fee6f Mon Sep 17 00:00:00 2001
From: Xavier Hanin <xavier@apache.org>
Date: Fri, 23 Feb 2007 10:09:13 +0000
Subject: [PATCH] add check against null and review line returns to help
 isolate IVY-379 if still possible

git-svn-id: https://svn.apache.org/repos/asf/incubator/ivy/core/trunk@510895 13f79535-47bb-0310-9956-ffa450edef68
---
 .../org/apache/ivy/core/resolve/IvyNodeEviction.java     | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/src/java/org/apache/ivy/core/resolve/IvyNodeEviction.java b/src/java/org/apache/ivy/core/resolve/IvyNodeEviction.java
index 5994abf4e..8256b0b27 100644
--- a/src/java/org/apache/ivy/core/resolve/IvyNodeEviction.java
+++ b/src/java/org/apache/ivy/core/resolve/IvyNodeEviction.java
@@ -121,6 +121,9 @@ public int hashCode() {
     private Map _evicted = new HashMap(); // Map (root module conf -> EvictionData) // indicates if the node is evicted in each root module conf
     
     public IvyNodeEviction(IvyNode node) {
+    	if (node == null) {
+    		throw new NullPointerException("node must not be null");
+    	}
 		_node = node;
 	}
     
@@ -191,7 +194,11 @@ public void setEvictedNodes(ModuleId moduleId, String rootModuleConf, Collection
     public boolean isEvicted(String rootModuleConf) {
         cleanEvicted();
         IvyNode root = _node.getRoot();
-        return root != _node && !root.getResolvedRevisions(_node.getId().getModuleId(), rootModuleConf).contains(_node.getResolvedId());
+        return  root != _node 
+        	&& !root.getResolvedRevisions(
+        			_node.getId().getModuleId(), 
+        			rootModuleConf)
+        				.contains(_node.getResolvedId());
     }
 
     public boolean isCompletelyEvicted() {
