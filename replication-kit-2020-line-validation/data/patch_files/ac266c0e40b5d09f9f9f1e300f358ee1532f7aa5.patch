From ac266c0e40b5d09f9f9f1e300f358ee1532f7aa5 Mon Sep 17 00:00:00 2001
From: Maarten Coene <maartenc@apache.org>
Date: Thu, 1 Dec 2016 00:13:23 +0100
Subject: [PATCH] Made the maven 'test' configuration public so we can use the
 test-jar as dependency (IVY-1444)

---
 doc/release-notes.html                        |  1 +
 .../parser/m2/PomModuleDescriptorBuilder.java | 31 +++----------------
 2 files changed, 6 insertions(+), 26 deletions(-)

diff --git a/doc/release-notes.html b/doc/release-notes.html
index bb8d3e8bd..085e49463 100644
--- a/doc/release-notes.html
+++ b/doc/release-notes.html
@@ -58,6 +58,7 @@ <h2>List of Changes in this Release</h2>
  
 List of changes since Ivy 2.4.0:
 
+- FIX: Made the maven 'test' configuration public so we can use the test-jar as dependency (IVY-1444)
 - FIX: NullPointerException in dependencytree with no dependencies (IVY-1539)
 - FIX: checkIfChanged is not settable attribute for checkdepsupdate ant task (IVY-1549)
 - FIX: ArrayIndexOutOfBoundsException when using a p2 repository for dependencies (IVY-1504)
diff --git a/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorBuilder.java b/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorBuilder.java
index 4d13efcad..b1463d9a2 100644
--- a/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorBuilder.java
+++ b/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorBuilder.java
@@ -17,34 +17,10 @@
  */
 package org.apache.ivy.plugins.parser.m2;
 
-import java.util.ArrayList;
-import java.util.Arrays;
-import java.util.Collection;
-import java.util.Collections;
-import java.util.Date;
-import java.util.HashMap;
-import java.util.LinkedHashMap;
-import java.util.LinkedList;
-import java.util.List;
-import java.util.Map;
-import java.util.Map.Entry;
-
 import org.apache.ivy.Ivy;
 import org.apache.ivy.core.cache.ArtifactOrigin;
-import org.apache.ivy.core.module.descriptor.Artifact;
-import org.apache.ivy.core.module.descriptor.Configuration;
+import org.apache.ivy.core.module.descriptor.*;
 import org.apache.ivy.core.module.descriptor.Configuration.Visibility;
-import org.apache.ivy.core.module.descriptor.DefaultArtifact;
-import org.apache.ivy.core.module.descriptor.DefaultDependencyArtifactDescriptor;
-import org.apache.ivy.core.module.descriptor.DefaultDependencyDescriptor;
-import org.apache.ivy.core.module.descriptor.DefaultExcludeRule;
-import org.apache.ivy.core.module.descriptor.DefaultModuleDescriptor;
-import org.apache.ivy.core.module.descriptor.DependencyDescriptor;
-import org.apache.ivy.core.module.descriptor.ExtraInfoHolder;
-import org.apache.ivy.core.module.descriptor.License;
-import org.apache.ivy.core.module.descriptor.MDArtifact;
-import org.apache.ivy.core.module.descriptor.ModuleDescriptor;
-import org.apache.ivy.core.module.descriptor.OverrideDependencyDescriptorMediator;
 import org.apache.ivy.core.module.id.ArtifactId;
 import org.apache.ivy.core.module.id.ModuleId;
 import org.apache.ivy.core.module.id.ModuleRevisionId;
@@ -57,6 +33,9 @@
 import org.apache.ivy.plugins.resolver.DependencyResolver;
 import org.apache.ivy.util.Message;
 
+import java.util.*;
+import java.util.Map.Entry;
+
 /**
  * Build a module descriptor. This class handle the complexity of the structure of an ivy
  * ModuleDescriptor and isolate the PomModuleDescriptorParser from it.
@@ -90,7 +69,7 @@ public class PomModuleDescriptorBuilder {
                     null),
             new Configuration(
                     "test",
-                    Visibility.PRIVATE,
+                    Visibility.PUBLIC,
                     "this scope indicates that the dependency is not required for normal use of "
                             + "the application, and is only available for the test compilation and "
                             + "execution phases.", new String[] {"runtime"}, true, null),
