From 22dd74e245b5ec3a5346b8bd20f73a36f9572bb3 Mon Sep 17 00:00:00 2001
From: Maarten Coene <maartenc@apache.org>
Date: Tue, 6 Mar 2012 22:20:32 +0000
Subject: [PATCH] FIX: The showprogress=false attribute of ivy:resolve doesn't
 do what it should (IVY-1052) (thanks to Joseph Boyd)

git-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@1297759 13f79535-47bb-0310-9956-ffa450edef68
---
 CHANGES.txt                                 | 2 ++
 src/java/org/apache/ivy/ant/IvyResolve.java | 9 ++++++++-
 2 files changed, 10 insertions(+), 1 deletion(-)

diff --git a/CHANGES.txt b/CHANGES.txt
index 3b221d81a..6f190337d 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -26,6 +26,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br
 	Jasper Blues
 	Jim Bonanno
 	Jean-Louis Boudart
+	Joseph Boyd
 	Dave Brosius
 	Matthieu Brouillard
 	Carlton Brown
@@ -139,6 +140,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br
 - IMPROVEMENT: ivy:retrieve can now convert 'dotted'-organisation names into a directory tree.
 - IMPROVEMENT: ivy:retrieve now accepts a nested mapper type.
 
+- FIX: The showprogress=false attribute of ivy:resolve doesn't do what it should (IVY-1052) (thanks to Joseph Boyd)
 - FIX: extends ignores defaultconfmapping/defaultconf/confmappingoverride attributes from parent's configurations and dependencies tags (IVY-1213)
 - FIX: NullPointerException when providing empty password to <credentials> (IVY-1335)
 - FIX: [originalname] not expanded for source and javadoc types during publish in ivy:install (IVY-1324)
diff --git a/src/java/org/apache/ivy/ant/IvyResolve.java b/src/java/org/apache/ivy/ant/IvyResolve.java
index d100ee915..f4f397c1c 100644
--- a/src/java/org/apache/ivy/ant/IvyResolve.java
+++ b/src/java/org/apache/ivy/ant/IvyResolve.java
@@ -64,6 +64,8 @@ public class IvyResolve extends IvyTask {
 
     private boolean haltOnFailure = true;
 
+    private boolean showProgress = true;
+
     private boolean useCacheOnly = false;
 
     private String type = null;
@@ -155,7 +157,7 @@ public void setHaltonfailure(boolean haltOnFailure) {
     }
 
     public void setShowprogress(boolean show) {
-        Message.setShowProgress(show);
+        this.showProgress = show;
     }
 
     public boolean isUseCacheOnly() {
@@ -225,6 +227,11 @@ public IvyConflict createConflict() {
         return c;
     }
 
+    protected void prepareTask() {
+        super.prepareTask();
+        Message.setShowProgress(showProgress);
+    }
+
     public void doExecute() throws BuildException {
         Ivy ivy = getIvyInstance();
         IvySettings settings = ivy.getSettings();
