From 6cfa5daebc99c4b6c9a025675ea6b94cf2024b1e Mon Sep 17 00:00:00 2001
From: Sebastian Bazley <sebb@apache.org>
Date: Sun, 17 Oct 2010 11:02:15 +0000
Subject: [PATCH] Add (disabled) test for Collections-363

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/collections/trunk@1023454 13f79535-47bb-0310-9956-ffa450edef68
---
 .../splitmap/TestTransformedMap.java          | 20 +++++++++++++++++++
 1 file changed, 20 insertions(+)

diff --git a/src/test/org/apache/commons/collections/splitmap/TestTransformedMap.java b/src/test/org/apache/commons/collections/splitmap/TestTransformedMap.java
index b04cb94442..64e1880eae 100644
--- a/src/test/org/apache/commons/collections/splitmap/TestTransformedMap.java
+++ b/src/test/org/apache/commons/collections/splitmap/TestTransformedMap.java
@@ -16,6 +16,10 @@
  */
 package org.apache.commons.collections.splitmap;
 
+import java.io.ByteArrayInputStream;
+import java.io.ByteArrayOutputStream;
+import java.io.ObjectInputStream;
+import java.io.ObjectOutputStream;
 import java.math.BigInteger;
 import java.util.HashMap;
 
@@ -130,4 +134,20 @@ public void testMapIterator() {
         }
     }
 
+    public void TODOtestCollections363() throws Exception {
+        TransformedMap<String, String, String, String> map = TransformedMap.decorate(
+                new HashMap<String, String>(), 
+                NOPTransformer.<String> getInstance(), 
+                NOPTransformer.<String> getInstance());
+        
+        ByteArrayOutputStream bytes = new ByteArrayOutputStream();
+        ObjectOutputStream out = new ObjectOutputStream(bytes);
+        out.writeObject(map);
+        out.close();
+        ObjectInputStream in = new ObjectInputStream(new ByteArrayInputStream(bytes.toByteArray()));
+        Object readObject = in.readObject();
+        in.close();
+        assertEquals("deserializing class: " + map.getClass().getName(), map.getClass(), readObject
+                .getClass());
+    }
 }
