From 7ddf77b60a9f65925d166a5e8b6fa2a7aeff6156 Mon Sep 17 00:00:00 2001
From: Rory Winston <rwinston@apache.org>
Date: Tue, 5 May 2009 12:02:04 +0000
Subject: [PATCH] NET-276: Use long instead of int for newsgroup article counts

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/net/branches/NET_2_0@771683 13f79535-47bb-0310-9956-ffa450edef68
---
 .../java/examples/nntp/ExtendedNNTPOps.java    |  4 ++--
 .../java/examples/nntp/MessageThreading.java   |  4 ++--
 src/main/java/examples/nntp/NNTPUtils.java     |  2 +-
 .../commons/net/nntp/ArticlePointer.java       |  2 +-
 .../apache/commons/net/nntp/NNTPClient.java    | 18 +++++++++---------
 .../apache/commons/net/nntp/NewsgroupInfo.java | 16 ++++++++--------
 6 files changed, 23 insertions(+), 23 deletions(-)

diff --git a/src/main/java/examples/nntp/ExtendedNNTPOps.java b/src/main/java/examples/nntp/ExtendedNNTPOps.java
index 353c8a7bd..4f4035b2b 100644
--- a/src/main/java/examples/nntp/ExtendedNNTPOps.java
+++ b/src/main/java/examples/nntp/ExtendedNNTPOps.java
@@ -58,8 +58,8 @@ public void demo(String host, String user, String password) {
             // XOVER
             NewsgroupInfo testGroup = new NewsgroupInfo();
             client.selectNewsgroup("alt.test", testGroup);
-            int lowArticleNumber = testGroup.getFirstArticle();
-            int highArticleNumber = lowArticleNumber + 100;
+            long lowArticleNumber = testGroup.getFirstArticle();
+            long  highArticleNumber = lowArticleNumber + 100;
             List<Article> articles = NNTPUtils.getArticleInfo(client, lowArticleNumber, highArticleNumber);
 
             for (Article article : articles) {
diff --git a/src/main/java/examples/nntp/MessageThreading.java b/src/main/java/examples/nntp/MessageThreading.java
index dfe35d3df..286a17c80 100644
--- a/src/main/java/examples/nntp/MessageThreading.java
+++ b/src/main/java/examples/nntp/MessageThreading.java
@@ -56,8 +56,8 @@ public static void main(String[] args) throws SocketException, IOException {
         NewsgroupInfo group = new NewsgroupInfo();
         client.selectNewsgroup("alt.test", group);
         
-        int lowArticleNumber = group.getFirstArticle();
-        int highArticleNumber = lowArticleNumber + 5000;
+        long lowArticleNumber = group.getFirstArticle();
+        long highArticleNumber = lowArticleNumber + 5000;
         
         System.out.println("Retrieving articles between [" + lowArticleNumber + "] and [" + highArticleNumber + "]");
         List<Article> articles = NNTPUtils.getArticleInfo(client, lowArticleNumber, highArticleNumber);
diff --git a/src/main/java/examples/nntp/NNTPUtils.java b/src/main/java/examples/nntp/NNTPUtils.java
index b73d60e8d..efc071562 100644
--- a/src/main/java/examples/nntp/NNTPUtils.java
+++ b/src/main/java/examples/nntp/NNTPUtils.java
@@ -45,7 +45,7 @@ public class NNTPUtils {
 	 * @return Article[] An array of Article
 	 * @throws IOException
 	 */
-	public  static List<Article> getArticleInfo(NNTPClient client, int lowArticleNumber, int highArticleNumber)
+	public  static List<Article> getArticleInfo(NNTPClient client, long lowArticleNumber, long highArticleNumber)
 	throws IOException {
 		Reader reader = null;
 		List<Article> articles = new ArrayList<Article>();
diff --git a/src/main/java/org/apache/commons/net/nntp/ArticlePointer.java b/src/main/java/org/apache/commons/net/nntp/ArticlePointer.java
index 113f6dc10..f4b89f7cd 100644
--- a/src/main/java/org/apache/commons/net/nntp/ArticlePointer.java
+++ b/src/main/java/org/apache/commons/net/nntp/ArticlePointer.java
@@ -28,7 +28,7 @@
 public final class ArticlePointer
 {
     /** The number of the referenced article. */
-    public int articleNumber;
+    public long articleNumber;
     /**
      * The unique id of the referenced article, including the enclosing
      * &lt and &gt symbols which are technically not part of the
diff --git a/src/main/java/org/apache/commons/net/nntp/NNTPClient.java b/src/main/java/org/apache/commons/net/nntp/NNTPClient.java
index c6dd0e65b..2e7a81500 100644
--- a/src/main/java/org/apache/commons/net/nntp/NNTPClient.java
+++ b/src/main/java/org/apache/commons/net/nntp/NNTPClient.java
@@ -108,7 +108,7 @@ private void __parseArticlePointer(String reply, ArticlePointer pointer)
             // Get article number
             try
             {
-                pointer.articleNumber = Integer.parseInt(tokenizer.nextToken());
+                pointer.articleNumber = Long.parseLong(tokenizer.nextToken());
             }
             catch (NumberFormatException e)
             {
@@ -153,9 +153,9 @@ private void __parseGroupReply(String reply, NewsgroupInfo info)
 
             try
             {
-                info._setArticleCount(Integer.parseInt(count));
-                info._setFirstArticle(Integer.parseInt(first));
-                info._setLastArticle(Integer.parseInt(last));
+                info._setArticleCount(Long.parseLong(count));
+                info._setFirstArticle(Long.parseLong(first));
+                info._setLastArticle(Long.parseLong(last));
             }
             catch (NumberFormatException e)
             {
@@ -176,7 +176,7 @@ private NewsgroupInfo __parseNewsgroupListEntry(String entry)
     {
         NewsgroupInfo result;
         StringTokenizer tokenizer;
-        int lastNum, firstNum;
+        long lastNum, firstNum;
         String last, first, permission;
 
         result = new NewsgroupInfo();
@@ -192,8 +192,8 @@ private NewsgroupInfo __parseNewsgroupListEntry(String entry)
 
         try
         {
-            lastNum = Integer.parseInt(last);
-            firstNum = Integer.parseInt(first);
+            lastNum = Long.parseLong(last);
+            firstNum = Long.parseLong(first);
             result._setFirstArticle(firstNum);
             result._setLastArticle(lastNum);
 
@@ -1212,8 +1212,8 @@ public Reader retrieveArticleInfo(int articleNumber) throws IOException
      * @return a DotTerminatedReader if successful, null otherwise
      * @throws IOException
      */
-    public Reader retrieveArticleInfo(int lowArticleNumber,
-                                      int highArticleNumber)
+    public Reader retrieveArticleInfo(long lowArticleNumber,
+                                      long highArticleNumber)
         throws IOException
     {
         return
diff --git a/src/main/java/org/apache/commons/net/nntp/NewsgroupInfo.java b/src/main/java/org/apache/commons/net/nntp/NewsgroupInfo.java
index dea53287e..d945a2251 100644
--- a/src/main/java/org/apache/commons/net/nntp/NewsgroupInfo.java
+++ b/src/main/java/org/apache/commons/net/nntp/NewsgroupInfo.java
@@ -54,8 +54,8 @@ public final class NewsgroupInfo
     public static final int PROHIBITED_POSTING_PERMISSION = 3;
 
     private String __newsgroup;
-    private int __estimatedArticleCount;
-    private int __firstArticle, __lastArticle;
+    private long __estimatedArticleCount;
+    private long __firstArticle, __lastArticle;
     private int __postingPermission;
 
     void _setNewsgroup(String newsgroup)
@@ -63,17 +63,17 @@ void _setNewsgroup(String newsgroup)
         __newsgroup = newsgroup;
     }
 
-    void _setArticleCount(int count)
+    void _setArticleCount(long count)
     {
         __estimatedArticleCount = count;
     }
 
-    void _setFirstArticle(int first)
+    void _setFirstArticle(long first)
     {
         __firstArticle = first;
     }
 
-    void _setLastArticle(int last)
+    void _setLastArticle(long last)
     {
         __lastArticle = last;
     }
@@ -99,7 +99,7 @@ public String getNewsgroup()
      * <p>
      * @return The estimated number of articles in the newsgroup.
      ***/
-    public int getArticleCount()
+    public long getArticleCount()
     {
         return __estimatedArticleCount;
     }
@@ -109,7 +109,7 @@ public int getArticleCount()
      * <p>
      * @return The number of the first article in the newsgroup.
      ***/
-    public int getFirstArticle()
+    public long getFirstArticle()
     {
         return __firstArticle;
     }
@@ -119,7 +119,7 @@ public int getFirstArticle()
      * <p>
      * @return The number of the last article in the newsgroup.
      ***/
-    public int getLastArticle()
+    public long getLastArticle()
     {
         return __lastArticle;
     }
