From 12f7e823997bbc9c13fee3942cbee3efbbd34c96 Mon Sep 17 00:00:00 2001
From: Maarten Coene <maartenc@apache.org>
Date: Mon, 22 Mar 2010 22:14:04 +0000
Subject: [PATCH] fixed problem finding dynamic revisions (introduced by fixing
 IVY-1177)

git-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@926374 13f79535-47bb-0310-9956-ffa450edef68
---
 src/java/org/apache/ivy/core/module/id/ModuleRevisionId.java | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/src/java/org/apache/ivy/core/module/id/ModuleRevisionId.java b/src/java/org/apache/ivy/core/module/id/ModuleRevisionId.java
index d94bf883a..a38a9b399 100644
--- a/src/java/org/apache/ivy/core/module/id/ModuleRevisionId.java
+++ b/src/java/org/apache/ivy/core/module/id/ModuleRevisionId.java
@@ -344,6 +344,11 @@ public String getBranch() {
      */
     private static String normalizeRevision(String revision) {
         if (revision.startsWith("[") && revision.endsWith("]") && revision.indexOf(',') == -1 ) {
+            if (IvyPatternHelper.getTokenString(IvyPatternHelper.REVISION_KEY).equals(revision)) {
+                // this is the case when listing dynamic revions
+                return revision;
+            }
+            
             return revision.substring(1, revision.length() - 1);
         } else {
             return revision;
