From 635ba2bf6cfe09594cd8a72b65eaea9321ab62f4 Mon Sep 17 00:00:00 2001
From: Benjamin Speakmon <bspeakmon@apache.org>
Date: Thu, 1 Nov 2007 06:59:51 +0000
Subject: [PATCH] - VALIDATOR-218: allow parentheses in URLs

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/validator/trunk@590915 13f79535-47bb-0310-9956-ffa450edef68
---
 .../org/apache/commons/validator/routines/UrlValidator.java | 2 +-
 .../apache/commons/validator/routines/UrlValidatorTest.java | 6 ++++++
 2 files changed, 7 insertions(+), 1 deletion(-)

diff --git a/src/main/java/org/apache/commons/validator/routines/UrlValidator.java b/src/main/java/org/apache/commons/validator/routines/UrlValidator.java
index 087728455..3e4173ed7 100644
--- a/src/main/java/org/apache/commons/validator/routines/UrlValidator.java
+++ b/src/main/java/org/apache/commons/validator/routines/UrlValidator.java
@@ -138,7 +138,7 @@ public class UrlValidator implements Serializable {
      */
     private static final int PARSE_AUTHORITY_EXTRA = 3;
 
-    private static final String PATH_PATTERN = "^(/[-\\w:@&?=+,.!/~*'%$_;]*)?$";
+    private static final String PATH_PATTERN = "^(/[-\\w:@&?=+,.!/~*'%$_;\\(\\)]*)?$";
 
     private static final String QUERY_PATTERN = "^(.*)$";
 
diff --git a/src/test/java/org/apache/commons/validator/routines/UrlValidatorTest.java b/src/test/java/org/apache/commons/validator/routines/UrlValidatorTest.java
index c0a91fc19..8dc3f1c05 100644
--- a/src/test/java/org/apache/commons/validator/routines/UrlValidatorTest.java
+++ b/src/test/java/org/apache/commons/validator/routines/UrlValidatorTest.java
@@ -146,6 +146,12 @@ public void testValidator204() {
        assertTrue(urlValidator.isValid("http://tech.yahoo.com/rc/desktops/102;_ylt=Ao8yevQHlZ4On0O3ZJGXLEQFLZA5"));
    }
 
+   public void testValidator218() {
+       UrlValidator validator = new UrlValidator(UrlValidator.ALLOW_2_SLASHES);
+       assertTrue("parentheses should be valid in URLs",
+               validator.isValid("http://somewhere.com/pathxyz/file(1).html"));
+   }
+
    static boolean incrementTestPartsIndex(int[] testPartsIndex, Object[] testParts) {
       boolean carry = true;  //add 1 to lowest order part.
       boolean maxIndex = true;
