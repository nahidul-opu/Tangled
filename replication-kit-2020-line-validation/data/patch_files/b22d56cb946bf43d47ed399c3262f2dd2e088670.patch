From b22d56cb946bf43d47ed399c3262f2dd2e088670 Mon Sep 17 00:00:00 2001
From: Claudio Martella <claudio@apache.org>
Date: Tue, 27 Aug 2013 17:16:04 +0200
Subject: [PATCH] GIRAPH-751

---
 CHANGELOG                                                | 3 +++
 .../io/formats/SrcIdDstIdEdgeValueTextOutputFormat.java  | 5 +++--
 .../apache/giraph/io/formats/TextEdgeOutputFormat.java   | 9 ++++++---
 3 files changed, 12 insertions(+), 5 deletions(-)

diff --git a/CHANGELOG b/CHANGELOG
index deca52b85..e43f50ced 100644
--- a/CHANGELOG
+++ b/CHANGELOG
@@ -1,6 +1,9 @@
 Giraph Change Log
 
 Release 1.1.0 - unreleased
+  GIRAPH-751: Build error: convertEdgeToLine in two different classes have the 
+  same erasure, yet neither overrides the other (aarmax0 via claudio)
+
   GIRAPH-732: EdgeOutputFormat (aarmax00 via claudio)
 
   GIRAPH-512: JavaDoc warnings (tdn120 via nitay)
diff --git a/giraph-core/src/main/java/org/apache/giraph/io/formats/SrcIdDstIdEdgeValueTextOutputFormat.java b/giraph-core/src/main/java/org/apache/giraph/io/formats/SrcIdDstIdEdgeValueTextOutputFormat.java
index 1d7478f1e..a0d099605 100644
--- a/giraph-core/src/main/java/org/apache/giraph/io/formats/SrcIdDstIdEdgeValueTextOutputFormat.java
+++ b/giraph-core/src/main/java/org/apache/giraph/io/formats/SrcIdDstIdEdgeValueTextOutputFormat.java
@@ -52,8 +52,9 @@ public TextEdgeWriter createEdgeWriter(TaskAttemptContext context) {
   /**
    * Edge writer used with {@link SrcIdDstIdEdgeValueTextOutputFormat}.
    */
-  protected class SrcIdDstIdEdgeValueEdgeWriter
-    extends TextEdgeWriterToEachLine {
+  protected class SrcIdDstIdEdgeValueEdgeWriter<I extends WritableComparable,
+    V extends Writable, E extends Writable>
+    extends TextEdgeWriterToEachLine<I, V, E> {
 
     /** Saved delimiter */
     private String delimiter;
diff --git a/giraph-core/src/main/java/org/apache/giraph/io/formats/TextEdgeOutputFormat.java b/giraph-core/src/main/java/org/apache/giraph/io/formats/TextEdgeOutputFormat.java
index 1b20c573d..8f1a4f305 100644
--- a/giraph-core/src/main/java/org/apache/giraph/io/formats/TextEdgeOutputFormat.java
+++ b/giraph-core/src/main/java/org/apache/giraph/io/formats/TextEdgeOutputFormat.java
@@ -82,7 +82,8 @@ public abstract TextEdgeWriter createEdgeWriter(TaskAttemptContext
    * edge output.  Easiest to ignore the key value separator and only use
    * key instead.
    */
-  protected abstract class TextEdgeWriter
+  protected abstract class TextEdgeWriter<I extends WritableComparable,
+    V extends Writable, E extends Writable>
       extends EdgeWriter<I, V, E> {
     /** Internal line record writer */
     private RecordWriter<Text, Text> lineRecordWriter;
@@ -139,7 +140,9 @@ public TaskAttemptContext getContext() {
    * Abstract class to be implemented by the user to write a line for each
    * edge.
    */
-  protected abstract class TextEdgeWriterToEachLine extends TextEdgeWriter {
+  protected abstract class TextEdgeWriterToEachLine<
+    I extends WritableComparable, V extends Writable, E extends Writable>
+    extends TextEdgeWriter<I, V, E> {
 
     @Override
     public final void writeEdge(I sourceId, V sourceValue, Edge<I, E> edge)
@@ -147,7 +150,7 @@ public final void writeEdge(I sourceId, V sourceValue, Edge<I, E> edge)
 
       // Note we are writing line as key with null value
       getRecordWriter().write(
-          convertEdgeToLine(sourceId, sourceValue, edge), null);
+        convertEdgeToLine(sourceId, sourceValue, edge), null);
     }
 
     /**
