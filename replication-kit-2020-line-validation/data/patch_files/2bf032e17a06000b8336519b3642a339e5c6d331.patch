From 2bf032e17a06000b8336519b3642a339e5c6d331 Mon Sep 17 00:00:00 2001
From: Sebastian Bazley <sebb@apache.org>
Date: Sun, 9 Oct 2016 11:42:01 +0000
Subject: [PATCH] IMAGING-189 - parseXpmValuesSection uses && instead of ||

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/imaging/trunk@1763961 13f79535-47bb-0310-9956-ffa450edef68
---
 src/changes/changes.xml                                        | 3 +++
 .../org/apache/commons/imaging/formats/xpm/XpmImageParser.java | 2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index aa30b2da4..147c65a39 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -46,6 +46,9 @@ The <action> type attribute can be add,update,fix,remove.
   <body>
 
     <release version="1.0" date="TBA" description="First major release">
+      <action issue="IMAGING-189" dev="sebb" type="fix">
+        parseXpmValuesSection uses &amp;&amp; instead of ||
+      </action>
       <action issue="IMAGING-181" dev="damjan" type="fix">
         EXIF lens metadata tags missing in Commons Imaging but recognized in exiftool
       </action>
diff --git a/src/main/java/org/apache/commons/imaging/formats/xpm/XpmImageParser.java b/src/main/java/org/apache/commons/imaging/formats/xpm/XpmImageParser.java
index 6353784f7..dd0122cea 100644
--- a/src/main/java/org/apache/commons/imaging/formats/xpm/XpmImageParser.java
+++ b/src/main/java/org/apache/commons/imaging/formats/xpm/XpmImageParser.java
@@ -287,7 +287,7 @@ private boolean parseNextString(final BasicCParser cParser,
     private XpmHeader parseXpmValuesSection(final String row)
             throws ImageReadException {
         final String[] tokens = BasicCParser.tokenizeRow(row);
-        if (tokens.length < 4 && tokens.length > 7) {
+        if (tokens.length < 4 || tokens.length > 7) {
             throw new ImageReadException("Parsing XPM file failed, "
                     + "<Values> section has incorrect tokens");
         }
