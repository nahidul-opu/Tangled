From 6ed4fc14c37fe2c58603676705d3bbde0e961219 Mon Sep 17 00:00:00 2001
From: Olivier Lamy <olamy@apache.org>
Date: Tue, 16 Oct 2012 22:04:46 +0000
Subject: [PATCH] [MRM-1698] proxy connector update are not saved.

git-svn-id: https://svn.apache.org/repos/asf/archiva/trunk@1399017 13f79535-47bb-0310-9956-ffa450edef68
---
 .../repository/proxyconnector/DefaultProxyConnectorAdmin.java    | 1 +
 1 file changed, 1 insertion(+)

diff --git a/archiva-modules/archiva-base/archiva-repository-admin/archiva-repository-admin-default/src/main/java/org/apache/archiva/admin/repository/proxyconnector/DefaultProxyConnectorAdmin.java b/archiva-modules/archiva-base/archiva-repository-admin/archiva-repository-admin-default/src/main/java/org/apache/archiva/admin/repository/proxyconnector/DefaultProxyConnectorAdmin.java
index f7ff3f9d60..05fa0c4655 100644
--- a/archiva-modules/archiva-base/archiva-repository-admin/archiva-repository-admin-default/src/main/java/org/apache/archiva/admin/repository/proxyconnector/DefaultProxyConnectorAdmin.java
+++ b/archiva-modules/archiva-base/archiva-repository-admin/archiva-repository-admin-default/src/main/java/org/apache/archiva/admin/repository/proxyconnector/DefaultProxyConnectorAdmin.java
@@ -143,6 +143,7 @@ public Boolean updateProxyConnector( ProxyConnector proxyConnector, AuditInforma
             findProxyConnector( proxyConnector.getSourceRepoId(), proxyConnector.getTargetRepoId(), configuration );
         configuration.removeProxyConnector( proxyConnectorConfiguration );
         configuration.addProxyConnector( getProxyConnectorConfiguration( proxyConnector ) );
+        saveConfiguration( configuration );
         triggerAuditEvent( proxyConnector.getSourceRepoId() + "-" + proxyConnector.getTargetRepoId(), null,
                            AuditEvent.MODIFY_PROXY_CONNECTOR, auditInformation );
         return Boolean.TRUE;
