From fc643c597933e3b9f9df0892a9f33874f22f60de Mon Sep 17 00:00:00 2001
From: Avery Ching <aching@apache.org>
Date: Sat, 29 Sep 2012 16:49:23 +0000
Subject: [PATCH] GIRAPH-352: Loaded vertices don't have their configuration
 set

git-svn-id: https://svn.apache.org/repos/asf/giraph/trunk@1391838 13f79535-47bb-0310-9956-ffa450edef68
---
 CHANGELOG                                                   | 3 +++
 src/main/java/org/apache/giraph/graph/BspServiceWorker.java | 1 +
 2 files changed, 4 insertions(+)

diff --git a/CHANGELOG b/CHANGELOG
index c9e4d49b1..255956ad6 100644
--- a/CHANGELOG
+++ b/CHANGELOG
@@ -5,6 +5,9 @@ Release 0.2.0 - unreleased
   GIRAPH-341: Improved log messages (timing) and upgraded junit to 4.8
   for better tests. (aching)
   
+  GIRAPH-352: Loaded vertices don't have their configuration set.
+  (aching)
+  
   GIRAPH-343: Use published hcatalog jars. (nitayj via aching)
 
   GIRAPH-338: More Rat Ignores (Nitay Joffe via ereisman)
diff --git a/src/main/java/org/apache/giraph/graph/BspServiceWorker.java b/src/main/java/org/apache/giraph/graph/BspServiceWorker.java
index e676b88bf..e29851ebf 100644
--- a/src/main/java/org/apache/giraph/graph/BspServiceWorker.java
+++ b/src/main/java/org/apache/giraph/graph/BspServiceWorker.java
@@ -464,6 +464,7 @@ private VertexEdgeCount readVerticesFromInputSplit(
       if (readerVertex.getValue() == null) {
         readerVertex.setValue(getConfiguration().createVertexValue());
       }
+      readerVertex.setConf(getConfiguration());
       readerVertex.setGraphState(getGraphMapper().getGraphState());
       PartitionOwner partitionOwner =
           workerGraphPartitioner.getPartitionOwner(
