From a20839bbeffc365bb3b9eb74325a6732fe700b2c Mon Sep 17 00:00:00 2001
From: Thomas Vandahl <tv@apache.org>
Date: Fri, 25 Jan 2008 21:57:15 +0000
Subject: [PATCH] Added event creation on request. Fixes JCS-33

git-svn-id: https://svn.apache.org/repos/asf/jakarta/jcs/trunk@615365 13f79535-47bb-0310-9956-ffa450edef68
---
 src/java/org/apache/jcs/engine/control/CompositeCache.java | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/src/java/org/apache/jcs/engine/control/CompositeCache.java b/src/java/org/apache/jcs/engine/control/CompositeCache.java
index fff5db043..9f327c8cf 100644
--- a/src/java/org/apache/jcs/engine/control/CompositeCache.java
+++ b/src/java/org/apache/jcs/engine/control/CompositeCache.java
@@ -629,6 +629,8 @@ private boolean isExpired( ICacheElement element )
                     {
                         log.debug( "Exceeded maxLife: " + element.getKey() );
                     }
+                    
+                    handleElementEvent( element, IElementEventConstants.ELEMENT_EVENT_EXCEEDED_MAXLIFE_ONREQUEST );
 
                     return true;
                 }
@@ -647,6 +649,8 @@ private boolean isExpired( ICacheElement element )
                         log.info( "Exceeded maxIdle: " + element.getKey() );
                     }
 
+                    handleElementEvent( element, IElementEventConstants.ELEMENT_EVENT_EXCEEDED_IDLETIME_ONREQUEST );
+
                     return true;
                 }
             }
