From f272a6e96f0fe80b0c2b4643836006d840d5aa8a Mon Sep 17 00:00:00 2001
From: Ryan Blue <blue@apache.org>
Date: Tue, 7 Apr 2015 13:12:55 -0700
Subject: [PATCH] PARQUET-234: Add ParquetInputSplit methods for compatibility.

Author: Ryan Blue <blue@apache.org>

Closes #159 from rdblue/PARQUET-234 and squashes the following commits:

b09d34d [Ryan Blue] PARQUET-234: Add ParquetInputSplit methods for compatibility.
---
 .../parquet/hadoop/ParquetInputSplit.java     | 50 +++++++++++++++++++
 1 file changed, 50 insertions(+)

diff --git a/parquet-hadoop/src/main/java/parquet/hadoop/ParquetInputSplit.java b/parquet-hadoop/src/main/java/parquet/hadoop/ParquetInputSplit.java
index be09a3c35f..9bb422c535 100644
--- a/parquet-hadoop/src/main/java/parquet/hadoop/ParquetInputSplit.java
+++ b/parquet-hadoop/src/main/java/parquet/hadoop/ParquetInputSplit.java
@@ -26,6 +26,7 @@
 import java.io.DataOutputStream;
 import java.io.IOException;
 import java.util.Arrays;
+import java.util.Collections;
 import java.util.List;
 import java.util.Map;
 import java.util.zip.GZIPInputStream;
@@ -114,6 +115,16 @@ private static long[] offsets(List<BlockMetaData> blocks) {
     return offsets;
   }
 
+  /**
+   * @return the block meta data
+   * @deprecated the file footer is no longer read before creating input splits
+   */
+  @Deprecated
+  public List<BlockMetaData> getBlocks() {
+    throw new UnsupportedOperationException(
+        "Splits no longer have row group metadata, see PARQUET-234");
+  }
+
   /**
    * Builds a {@code ParquetInputSplit} from a mapreduce {@link FileSplit}.
    *
@@ -157,6 +168,26 @@ public ParquetInputSplit(
     this.rowGroupOffsets = rowGroupOffsets;
   }
 
+  /**
+   * @return the requested schema
+   * @deprecated the file footer is no longer read before creating input splits
+   */
+  @Deprecated
+  String getRequestedSchema() {
+    throw new UnsupportedOperationException(
+        "Splits no longer have the requested schema, see PARQUET-234");
+  }
+
+  /**
+   * @return the file schema
+   * @deprecated the file footer is no longer read before creating input splits
+   */
+  @Deprecated
+  public String getFileSchema() {
+    throw new UnsupportedOperationException(
+        "Splits no longer have the file schema, see PARQUET-234");
+  }
+
   /**
    * @return the end offset of that split
    */
@@ -164,6 +195,25 @@ public long getEnd() {
     return end;
   }
 
+  /**
+   * @return app specific metadata from the file
+   * @deprecated the file footer is no longer read before creating input splits
+   */
+  @Deprecated
+  public Map<String, String> getExtraMetadata() {
+    throw new UnsupportedOperationException(
+        "Splits no longer have file metadata, see PARQUET-234");
+  }
+
+  /**
+   * @return app specific metadata provided by the read support in the init phase
+   */
+  @Deprecated
+  Map<String, String> getReadSupportMetadata() {
+    throw new UnsupportedOperationException(
+        "Splits no longer have read-support metadata, see PARQUET-234");
+  }
+
   /**
    * @return the offsets of the row group selected if this has been determined on the client side
    */
