From 0b3497b7d2dd22f8402bca82dd56b49f0724f367 Mon Sep 17 00:00:00 2001
From: Nick Burch <nick@apache.org>
Date: Mon, 28 Nov 2011 12:42:01 +0000
Subject: [PATCH] Unit tests for VALIDATOR-296 - / and ! in domain part of
 emails

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/validator/trunk@1207110 13f79535-47bb-0310-9956-ffa450edef68
---
 .../routines/EmailValidatorTest.java          | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)

diff --git a/src/test/java/org/apache/commons/validator/routines/EmailValidatorTest.java b/src/test/java/org/apache/commons/validator/routines/EmailValidatorTest.java
index c30247da1..391070cc3 100644
--- a/src/test/java/org/apache/commons/validator/routines/EmailValidatorTest.java
+++ b/src/test/java/org/apache/commons/validator/routines/EmailValidatorTest.java
@@ -206,6 +206,25 @@ public void testEmailLocalhost() {
              noLocal.isValid("joe@localhost")
        );
     }
+    
+    /**
+     * VALIDATOR-296 - A / or a ! is valid in the user part,
+     *  but not in the domain part 
+     */
+    public void testEmailWithSlashes() {
+       assertTrue(
+             "/ and ! valid in username",
+             validator.isValid("joe!/blow@apache.org")
+       );
+       assertFalse(
+             "/ not valid in domain",
+             validator.isValid("joe@ap/ache.org")
+       );
+       assertFalse(
+             "! not valid in domain",
+             validator.isValid("joe@apac!he.org")
+       );
+    }
 
     /**
      * Write this test according to parts of RFC, as opposed to the type of character
