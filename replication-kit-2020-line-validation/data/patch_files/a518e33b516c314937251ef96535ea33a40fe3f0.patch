From a518e33b516c314937251ef96535ea33a40fe3f0 Mon Sep 17 00:00:00 2001
From: Oliver Heger <oheger@apache.org>
Date: Wed, 6 Apr 2011 19:12:54 +0000
Subject: [PATCH] [CONFIGURATION-444] Added a test case.

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/configuration/branches/configuration2_experimental@1089590 13f79535-47bb-0310-9956-ffa450edef68
---
 .../configuration2/TestInMemoryConfiguration.java  | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

diff --git a/src/test/java/org/apache/commons/configuration2/TestInMemoryConfiguration.java b/src/test/java/org/apache/commons/configuration2/TestInMemoryConfiguration.java
index 257835c5c0..17b331f3c8 100644
--- a/src/test/java/org/apache/commons/configuration2/TestInMemoryConfiguration.java
+++ b/src/test/java/org/apache/commons/configuration2/TestInMemoryConfiguration.java
@@ -913,6 +913,20 @@ public void testInterpolationSubset()
         InterpolationTestHelper.testInterpolationSubset(config);
     }
 
+    /**
+     * Tests whether interpolation with a subset configuration works over
+     * multiple layers.
+     */
+    public void testInterpolationSubsetMultipleLayers()
+    {
+        config.clear();
+        config.addProperty("var", "value");
+        config.addProperty("prop2.prop[@attr]", "${var}");
+        Configuration sub1 = config.subset("prop2");
+        Configuration sub2 = sub1.subset("prop");
+        assertEquals("Wrong value", "value", sub2.getString("[@attr]"));
+    }
+
     /**
      * Tests interpolation of a variable, which cannot be resolved.
      */
