From 6140c873a6b4938550a99f58b12bde4de8a6678e Mon Sep 17 00:00:00 2001
From: Maja Kabiljo <majakabiljo@fb.com>
Date: Wed, 26 Feb 2014 11:58:38 -0800
Subject: [PATCH] GIRAPH-865: Job client shouldn't crash when
 JobProgressTracker gets exception (majakabiljo)

---
 CHANGELOG                                                    | 3 +++
 .../main/java/org/apache/giraph/job/JobProgressTracker.java  | 5 ++---
 2 files changed, 5 insertions(+), 3 deletions(-)

diff --git a/CHANGELOG b/CHANGELOG
index 8707dd4b3..74ab30577 100644
--- a/CHANGELOG
+++ b/CHANGELOG
@@ -1,6 +1,9 @@
 Giraph Change Log
 
 Release 1.1.0 - unreleased
+  GIRAPH-865: Job client shouldn't crash when JobProgressTracker gets 
+  exception (majakabiljo)
+
   GIRAPH-856: Log amount of free memory on the command line (majakabiljo)
 
   GIRAPH-860: Giraph jobs can hang forever if HDFS filestamps aren't 
diff --git a/giraph-core/src/main/java/org/apache/giraph/job/JobProgressTracker.java b/giraph-core/src/main/java/org/apache/giraph/job/JobProgressTracker.java
index a364dc48e..b8d376928 100644
--- a/giraph-core/src/main/java/org/apache/giraph/job/JobProgressTracker.java
+++ b/giraph-core/src/main/java/org/apache/giraph/job/JobProgressTracker.java
@@ -29,7 +29,6 @@
 import org.apache.hadoop.util.Progressable;
 import org.apache.log4j.Logger;
 import org.apache.zookeeper.CreateMode;
-import org.apache.zookeeper.KeeperException;
 import org.apache.zookeeper.WatchedEvent;
 import org.apache.zookeeper.Watcher;
 import org.apache.zookeeper.ZooDefs;
@@ -111,7 +110,7 @@ public void run() {
               }
               Thread.sleep(UPDATE_MILLISECONDS);
             }
-          } catch (InterruptedException | KeeperException e) {
+          } catch (Exception e) {
             if (LOG.isInfoEnabled()) {
               LOG.info("run: Exception occurred", e);
             }
@@ -126,7 +125,7 @@ public void run() {
                 CreateMode.PERSISTENT,
                 true);
               zk.close();
-            } catch (InterruptedException | KeeperException e) {
+            } catch (Exception e) {
               if (LOG.isInfoEnabled()) {
                 LOG.info("run: Exception occurred", e);
               }
