From 00c1cc0cc0b16daaf8b284ac0e7e9328caba5022 Mon Sep 17 00:00:00 2001
From: Romain Manni-Bucau <rmannibucau@apache.org>
Date: Sat, 31 Dec 2016 13:34:09 +0000
Subject: [PATCH] JCS-170 replacing at least commas for jmx registration

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/jcs/trunk@1776739 13f79535-47bb-0310-9956-ffa450edef68
---
 .../main/java/org/apache/commons/jcs/jcache/JCSCache.java    | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/commons-jcs-jcache/src/main/java/org/apache/commons/jcs/jcache/JCSCache.java b/commons-jcs-jcache/src/main/java/org/apache/commons/jcs/jcache/JCSCache.java
index 82fd3ea5e..f5e13d645 100644
--- a/commons-jcs-jcache/src/main/java/org/apache/commons/jcs/jcache/JCSCache.java
+++ b/commons-jcs-jcache/src/main/java/org/apache/commons/jcs/jcache/JCSCache.java
@@ -157,12 +157,13 @@ public JCSCache(final ClassLoader classLoader, final JCSCachingManager mgr,
         statistics.setActive(config.isStatisticsEnabled());
 
         final String mgrStr = manager.getURI().toString().replaceAll(",|:|=|\n", ".");
+        final String cacheStr = name.replaceAll(",|:|=|\n", ".");
         try
         {
             cacheConfigObjectName = new ObjectName("javax.cache:type=CacheConfiguration,"
-                    + "CacheManager=" + mgrStr + "," + "Cache=" + name);
+                    + "CacheManager=" + mgrStr + "," + "Cache=" + cacheStr);
             cacheStatsObjectName = new ObjectName("javax.cache:type=CacheStatistics,"
-                    + "CacheManager=" + mgrStr + "," + "Cache=" + name);
+                    + "CacheManager=" + mgrStr + "," + "Cache=" + cacheStr);
         }
         catch (final Exception e)
         {
