From ef0aacf3e7703d45bddbbfa26233acbe2f11dc25 Mon Sep 17 00:00:00 2001
From: Benedikt Ritter <britter@apache.org>
Date: Sun, 3 Mar 2013 11:33:42 +0000
Subject: [PATCH] [BEANUTILS-422] - getPropertyType return null on second
 descendant class; Add test case provided by Alex Crown

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/beanutils/trunk@1452029 13f79535-47bb-0310-9956-ffa450edef68
---
 pom.xml                                       |  4 ++
 .../beanutils/bugs/Jira422TestCase.java       | 51 +++++++++++++++++++
 2 files changed, 55 insertions(+)
 create mode 100644 src/test/java/org/apache/commons/beanutils/bugs/Jira422TestCase.java

diff --git a/pom.xml b/pom.xml
index 77cc421bb..cf43f6117 100644
--- a/pom.xml
+++ b/pom.xml
@@ -140,6 +140,10 @@
       <name>Berin Loritsch</name>
       <email></email>
     </contributor>    
+    <contributor>
+      <name>Alex Crown</name>
+      <email></email>
+    </contributor>    
   </contributors>
 
   <dependencies>
diff --git a/src/test/java/org/apache/commons/beanutils/bugs/Jira422TestCase.java b/src/test/java/org/apache/commons/beanutils/bugs/Jira422TestCase.java
new file mode 100644
index 000000000..4b96494c7
--- /dev/null
+++ b/src/test/java/org/apache/commons/beanutils/bugs/Jira422TestCase.java
@@ -0,0 +1,51 @@
+package org.apache.commons.beanutils.bugs;
+
+import org.apache.commons.beanutils.PropertyUtils;
+
+import java.util.ArrayList;
+
+import junit.framework.TestCase;
+
+public class Jira422TestCase extends TestCase {
+
+    public void testRootBean() throws Exception {
+        RootBean bean = new FirstChildBean();
+        Class propertyType = PropertyUtils.getPropertyType(bean, "file[0]");
+        assertEquals(String.class.getName(), propertyType.getName());
+    }
+
+    public void testSecondChildBean() throws Exception {
+        RootBean bean = new SecondChildBean();
+        Class propertyType = PropertyUtils.getPropertyType(bean, "file[0]");
+        assertEquals(String.class.getName(), propertyType.getName());
+    }
+
+}
+
+class RootBean {
+
+    private ArrayList file;
+
+    public ArrayList getFile() {
+        return file;
+    }
+
+    public void setFile(ArrayList file) {
+        this.file = file;
+    }
+
+    public String getFile(int i) {
+        return (String) file.get(i);
+    }
+
+    public void setFile(int i, String file) {
+        this.file.set(i, file);
+    }
+
+}
+
+class FirstChildBean extends RootBean {
+}
+
+class SecondChildBean extends RootBean {
+}
