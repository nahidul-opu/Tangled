From 4705df354608830db5d53e6dfb476b2b032e886c Mon Sep 17 00:00:00 2001
From: Rory Winston <rwinston@apache.org>
Date: Thu, 5 Feb 2009 18:18:21 +0000
Subject: [PATCH] NET-232 Add null check before disconnect

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/net/trunk@741217 13f79535-47bb-0310-9956-ffa450edef68
---
 src/java/org/apache/commons/net/SocketClient.java        | 6 +++---
 src/java/org/apache/commons/net/telnet/TelnetClient.java | 8 ++++----
 2 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/src/java/org/apache/commons/net/SocketClient.java b/src/java/org/apache/commons/net/SocketClient.java
index fc98573a5..aebd32ba0 100644
--- a/src/java/org/apache/commons/net/SocketClient.java
+++ b/src/java/org/apache/commons/net/SocketClient.java
@@ -264,9 +264,9 @@ public void connect(String hostname) throws SocketException, IOException
      */
     public void disconnect() throws IOException
     {
-        _socket_.close();
-        _input_.close();
-        _output_.close();
+        if(_socket_ != null) _socket_.close();
+        if(_input_ != null) _input_.close();
+        if(_output_ != null) _output_.close();
         _socket_ = null;
         _input_ = null;
         _output_ = null;
diff --git a/src/java/org/apache/commons/net/telnet/TelnetClient.java b/src/java/org/apache/commons/net/telnet/TelnetClient.java
index e0015df34..69c9e8bca 100644
--- a/src/java/org/apache/commons/net/telnet/TelnetClient.java
+++ b/src/java/org/apache/commons/net/telnet/TelnetClient.java
@@ -75,11 +75,11 @@ public TelnetClient(String termtype)
 
     void _flushOutputStream() throws IOException
     {
-        _output_.flush();
+        if(_output_ != null) _output_.flush();
     }
     void _closeOutputStream() throws IOException
     {
-        _output_.close();
+    	if(_output_ != null) _output_.close();
     }
 
     /***
@@ -123,8 +123,8 @@ protected void _connectAction_() throws IOException
      ***/
     public void disconnect() throws IOException
     {
-        __input.close();
-        __output.close();
+        if(__input != null) __input.close();
+        if(__output != null) __output.close();
         super.disconnect();
     }
 
