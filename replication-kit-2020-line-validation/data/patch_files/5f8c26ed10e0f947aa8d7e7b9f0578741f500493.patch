From 5f8c26ed10e0f947aa8d7e7b9f0578741f500493 Mon Sep 17 00:00:00 2001
From: Sebastian Bazley <sebb@apache.org>
Date: Wed, 23 Mar 2011 13:41:26 +0000
Subject: [PATCH] COMPRESS-117 Add some test cases COMPRESS-117.tar created
 from bla.tar with the first lot of magic bytes nulled out

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/compress/trunk@1084587 13f79535-47bb-0310-9956-ffa450edef68
---
 .../compress/DetectArchiverTestCase.java        |  15 +++++++++++++++
 src/test/resources/COMPRESS-117.tar             | Bin 0 -> 10240 bytes
 2 files changed, 15 insertions(+)
 create mode 100644 src/test/resources/COMPRESS-117.tar

diff --git a/src/test/java/org/apache/commons/compress/DetectArchiverTestCase.java b/src/test/java/org/apache/commons/compress/DetectArchiverTestCase.java
index 003fddf3fe6..14bc27175bf 100644
--- a/src/test/java/org/apache/commons/compress/DetectArchiverTestCase.java
+++ b/src/test/java/org/apache/commons/compress/DetectArchiverTestCase.java
@@ -38,6 +38,21 @@ public DetectArchiverTestCase(String name) {
 
     final ClassLoader classLoader = getClass().getClassLoader();
 
+    public void testDetectionNotArchive() throws FileNotFoundException {
+        try {
+            getStreamFor("test.txt");
+            fail("Expected ArchiveException");
+        } catch (ArchiveException e) {
+            // expected
+        }
+    }
+
+    public void testCOMPRESS117() throws Exception {
+        final ArchiveInputStream tar = getStreamFor("COMPRESS-117.tar");
+        assertNotNull(tar);
+        assertTrue(tar instanceof TarArchiveInputStream);
+    }
+
     public void testDetection() throws Exception {
 
         final ArchiveInputStream ar = getStreamFor("bla.ar"); 
diff --git a/src/test/resources/COMPRESS-117.tar b/src/test/resources/COMPRESS-117.tar
new file mode 100644
index 0000000000000000000000000000000000000000..d42ebeb8e2c9bbd726b4088952d5d0b663c8c2da
GIT binary patch
literal 10240
zcmeH{QE!_t5XX64q<#nQsZRqNjA4`ODh-j^Y70@DmpxSkOq+>7gh{%7``Ki3vUJt7
zhi=hy_X797^I?8IUnf;Z+^@^Zc|F707^RMRMlAg4sU<?F?+_dj7SfRU%)!L>8FmnU
zy)8lI?*#a{K6|v0ty(lSIzy+##i!@uWWe7h>1g(OI!1X@*D~*PTp9hq<-MWH@i6(&
z>1HajF7wQbX{y25)&@vhrcMT8YbXlyISa}%!Z-{l4deIoFe*qC1o52FC=SZFqyf%<
zQBqgh+k@Vbsjao^<YII;O>bs`gg)Wk&bKL->FsPX{4^E>yFQIwid{l<s?}}g$o})}
zX(ffJ#k~X3CMR-LHBZw_smG=*M444ea_>O3*=r?Rk*!v$-EgmWY-sm^Nw$<Ck(+nP
z#r}7D*{0uKB_bvG{%WHC!8kT@UCi^OUFc&KO`GMFbiZiDEqcjKdubcjoOZc(eR?w-
zeH`EQ2u%-&?qN}L@0r{$;NGq!OoQyXreWZ!9Ww!QQ~iHC|IN66HvdERm*)Rkby<s$
z)8*^7=w3dm-^E{EdDM|VpZ`m_sP$;qH~S5*q->GbU-}<1-1nnCZ`d3V00KY&2mk>f
s00e*l5C8%|00;m9AOHk_01yBIKmZ5;0U!VbfB+Bx0zd!={GSBA0WLA@(*OVf

literal 0
HcmV?d00001

