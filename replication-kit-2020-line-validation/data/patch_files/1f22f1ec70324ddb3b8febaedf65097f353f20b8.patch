From 1f22f1ec70324ddb3b8febaedf65097f353f20b8 Mon Sep 17 00:00:00 2001
From: Niall Pemberton <niallp@apache.org>
Date: Tue, 4 Aug 2009 01:38:16 +0000
Subject: [PATCH] Add test for BEANUTILS-331 (duplicates BEANUTILS-339

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/beanutils/trunk@800650 13f79535-47bb-0310-9956-ffa450edef68
---
 .../beanutils/bugs/Jira339TestCase.java       | 21 ++++++++++++++++++-
 1 file changed, 20 insertions(+), 1 deletion(-)

diff --git a/src/test/org/apache/commons/beanutils/bugs/Jira339TestCase.java b/src/test/org/apache/commons/beanutils/bugs/Jira339TestCase.java
index af2909106..c2f94d344 100644
--- a/src/test/org/apache/commons/beanutils/bugs/Jira339TestCase.java
+++ b/src/test/org/apache/commons/beanutils/bugs/Jira339TestCase.java
@@ -17,6 +17,8 @@
 package org.apache.commons.beanutils.bugs;
 
 import java.util.Comparator;
+import java.util.HashMap;
+import java.util.Map;
 
 import junit.framework.Test;
 import junit.framework.TestCase;
@@ -83,7 +85,7 @@ protected void tearDown() throws Exception {
     }
 
     /**
-     * Test {@link PropertyUtils#getProperty(Object, String)}
+     * Test {@link PropertyUtils#setProperty(Object, String, Object)}
      */
     public void testIssue_BEANUTILS_339_BeanUtilsBean_setProperty() {
         
@@ -97,6 +99,23 @@ public void testIssue_BEANUTILS_339_BeanUtilsBean_setProperty() {
         assertNull("TestBean comparator should be null", bean.getComparator());
     }
 
+    /**
+     * Test {@link BeanUtils#populate(Object, Map)}
+     */
+    public void testIssue_BEANUTILS_331_BeanUtilsBean_populate() {
+        
+        TestBean bean = new TestBean();
+        try {
+            Map properties = new HashMap();
+            properties.put("comparator", null);
+            BeanUtils.populate(bean, properties);
+        } catch (Throwable t) {
+            log.error("Failed: " + t.getMessage(), t);
+            fail("Threw exception: " + t);
+        }
+        assertNull("TestBean comparator should be null", bean.getComparator());
+    }
+
     /**
      * Test Bean.
      */
