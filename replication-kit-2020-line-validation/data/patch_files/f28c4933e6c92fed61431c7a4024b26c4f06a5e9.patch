From f28c4933e6c92fed61431c7a4024b26c4f06a5e9 Mon Sep 17 00:00:00 2001
From: Niall Pemberton <niallp@apache.org>
Date: Mon, 11 Aug 2008 11:25:47 +0000
Subject: [PATCH] Fix IO-168 Add symlink check to deleteDirectoryOnExit()
 method as well

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/io/trunk@684716 13f79535-47bb-0310-9956-ffa450edef68
---
 src/java/org/apache/commons/io/FileUtils.java | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/java/org/apache/commons/io/FileUtils.java b/src/java/org/apache/commons/io/FileUtils.java
index 31145ef6bd5..6e2df9e7078 100644
--- a/src/java/org/apache/commons/io/FileUtils.java
+++ b/src/java/org/apache/commons/io/FileUtils.java
@@ -1457,7 +1457,9 @@ private static void deleteDirectoryOnExit(File directory) throws IOException {
             return;
         }
 
-        cleanDirectoryOnExit(directory);
+        if (!isSymlink(directory)) {
+            cleanDirectoryOnExit(directory);
+        }
         directory.deleteOnExit();
     }
 
