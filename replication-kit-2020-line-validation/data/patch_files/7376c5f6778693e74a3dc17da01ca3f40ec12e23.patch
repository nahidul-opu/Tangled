From 7376c5f6778693e74a3dc17da01ca3f40ec12e23 Mon Sep 17 00:00:00 2001
From: Maarten Coene <maartenc@apache.org>
Date: Fri, 12 Sep 2008 19:58:45 +0000
Subject: [PATCH] FIX: Ivy stand-alone ignores -cache argument (IVY-901)
 (thanks to Chris)

git-svn-id: https://svn.apache.org/repos/asf/ant/ivy/core/trunk@694789 13f79535-47bb-0310-9956-ffa450edef68
---
 CHANGES.txt                       | 1 +
 src/java/org/apache/ivy/Main.java | 6 ++++++
 2 files changed, 7 insertions(+)

diff --git a/CHANGES.txt b/CHANGES.txt
index c6109c65a..0b1d351d8 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -111,6 +111,7 @@ for detailed view of each issue, please consult http://issues.apache.org/jira/br
 - IMPROVEMENT: Add a memory cache for the module descriptor that are parsed from the cache (IVY-883)
 - IMPROVEMENT: Improve performance (IVY-872)
 
+- FIX: Ivy stand-alone ignores -cache argument (IVY-901) (thanks to Chris)
 - FIX: ivy.cache.dir.${settingsRef} is set to default instead of the defaultCacheDir from the ivysettings.xml after ivy:resolve (IVY-898)
 - FIX: Ivy ibiblio resolver chokes on variables while checking descriptor consistency (IVY-818)
 - FIX: Enable consistent support of the configuration negation operator (IVY-894) (thanks to Patrick Woodworth)
diff --git a/src/java/org/apache/ivy/Main.java b/src/java/org/apache/ivy/Main.java
index d3de15a9a..4e7c23c4b 100644
--- a/src/java/org/apache/ivy/Main.java
+++ b/src/java/org/apache/ivy/Main.java
@@ -185,6 +185,12 @@ static void run(CommandLineParser parser, String[] args) throws Exception {
 
             File cache = new File(settings.substitute(line.getOptionValue("cache", settings
                     .getDefaultCache().getAbsolutePath())));
+
+            if (line.hasOption("cache")) {
+                //override default cache path with user supplied cache path
+                settings.setDefaultCache(cache);
+            }
+
             if (!cache.exists()) {
                 cache.mkdirs();
             } else if (!cache.isDirectory()) {
