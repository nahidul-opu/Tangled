From 31044ba56dc378d68c04334b66344a718116821a Mon Sep 17 00:00:00 2001
From: Sebastian Bazley <sebb@apache.org>
Date: Sat, 11 Jul 2015 21:30:09 +0000
Subject: [PATCH] NET-558 - getModificationTime(<filename>) returns complete
 received line including response code and EOL

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/net/trunk@1690410 13f79535-47bb-0310-9956-ffa450edef68
---
 src/changes/changes.xml                                 | 3 ++-
 src/main/java/org/apache/commons/net/ftp/FTPClient.java | 2 +-
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index 8e4166875..4f1de2dd3 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -115,7 +115,8 @@ This is mainly a bug-fix release. See further details below.
             Simplify TelnetOptionHandler class hierarchy
             </action>
             <action issue="NET-558" type="fix" dev="sebb" due-to="Ralph Becker">
-            FTPClient.getModificationTime(filename) returns complete received line including response code
+            FTPClient.getModificationTime(filename) returns complete received line including response code and EOL
+            Strip the response code and EOL
             </action>
             <action issue="NET-556" type="update" dev="sebb" due-to="Andy Rosa">
             Make SubnetInfo.isInRange(int) public
diff --git a/src/main/java/org/apache/commons/net/ftp/FTPClient.java b/src/main/java/org/apache/commons/net/ftp/FTPClient.java
index 1d7b2d516..32e2ec367 100644
--- a/src/main/java/org/apache/commons/net/ftp/FTPClient.java
+++ b/src/main/java/org/apache/commons/net/ftp/FTPClient.java
@@ -3527,7 +3527,7 @@ public String getStatus(String pathname) throws IOException
      */
     public String getModificationTime(String pathname) throws IOException {
         if (FTPReply.isPositiveCompletion(mdtm(pathname))) {
-            return getReplyString().substring(4); // skip the return code (e.g. 213) and the space
+            return getReplyStrings()[0].substring(4); // skip the return code (e.g. 213) and the space
         }
         return null;
     }
