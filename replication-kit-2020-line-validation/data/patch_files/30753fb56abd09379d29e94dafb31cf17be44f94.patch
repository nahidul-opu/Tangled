From 30753fb56abd09379d29e94dafb31cf17be44f94 Mon Sep 17 00:00:00 2001
From: Henri Yandell <bayard@apache.org>
Date: Mon, 19 Jun 2006 12:47:28 +0000
Subject: [PATCH] Added unit test for LANG-140 - thanks to Yu Peng for the test
 case

git-svn-id: https://svn.apache.org/repos/asf/jakarta/commons/proper/lang/trunk@415316 13f79535-47bb-0310-9956-ffa450edef68
---
 .../commons/lang/time/DurationFormatUtilsTest.java  | 13 +++++++++++++
 1 file changed, 13 insertions(+)

diff --git a/src/test/org/apache/commons/lang/time/DurationFormatUtilsTest.java b/src/test/org/apache/commons/lang/time/DurationFormatUtilsTest.java
index 767c1b12857..80e0ab90540 100644
--- a/src/test/org/apache/commons/lang/time/DurationFormatUtilsTest.java
+++ b/src/test/org/apache/commons/lang/time/DurationFormatUtilsTest.java
@@ -19,6 +19,7 @@
 import java.lang.reflect.Constructor;
 import java.lang.reflect.Modifier;
 import java.util.Calendar;
+import java.util.Date;
 import java.util.TimeZone;
 
 import junit.framework.Test;
@@ -397,6 +398,18 @@ public void testLexx() {
         assertTrue("Token with Number value not equal to itself. ", numToken.equals(numToken));
     }
 
+
+    // http://issues.apache.org/bugzilla/show_bug.cgi?id=38401
+    public void testBugzilla38401() {
+        Calendar cal1 = Calendar.getInstance();
+        cal1.set(2006, 0, 26, 18, 47, 34);
+        Calendar cal2 = Calendar.getInstance();
+        cal2.set(2006, 1, 26, 10, 47, 34);
+
+        System.err.println("WAS: " + DurationFormatUtils.formatPeriod(cal1.getTime().getTime(), cal2.getTime().getTime(), "yyyy/MM/dd HH:mm:ss SSS") );
+        assertEquals( "0000/00/30 16:00:00 000", DurationFormatUtils.formatPeriod(cal1.getTime().getTime(), cal2.getTime().getTime(), "yyyy/MM/dd HH:mm:ss SSS") );
+    }
+
     private void assertArrayEquals(DurationFormatUtils.Token[] obj1, DurationFormatUtils.Token[] obj2) {
         assertEquals("Arrays are unequal length. ", obj1.length, obj2.length);
         for (int i = 0; i < obj1.length; i++) {
