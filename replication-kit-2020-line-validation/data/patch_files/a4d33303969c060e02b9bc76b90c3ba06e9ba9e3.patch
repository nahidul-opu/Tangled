From a4d33303969c060e02b9bc76b90c3ba06e9ba9e3 Mon Sep 17 00:00:00 2001
From: Avery Ching <aching@fb.com>
Date: Fri, 22 Mar 2013 09:45:40 -0700
Subject: [PATCH] GIRAPH-580: NPE in HiveGiraphRunner when the vertex output
 format is not defined (aching)

---
 CHANGELOG                                                   | 3 +++
 .../main/java/org/apache/giraph/hive/HiveGiraphRunner.java  | 6 ++++--
 2 files changed, 7 insertions(+), 2 deletions(-)

diff --git a/CHANGELOG b/CHANGELOG
index db8f4cee0..50ed932b2 100644
--- a/CHANGELOG
+++ b/CHANGELOG
@@ -1,6 +1,9 @@
 Giraph Change Log
 
 Release 0.2.0 - unreleased
+  GIRAPH-580: NPE in HiveGiraphRunner when the vertex output format is
+  not defined (aching)
+
   GIRAPH-510: Remove HBase Cruft (kelarini via nitay)
 
   GIRAPH-566: Make option for aggregators to be configurable (majakabiljo)
diff --git a/giraph-hive/src/main/java/org/apache/giraph/hive/HiveGiraphRunner.java b/giraph-hive/src/main/java/org/apache/giraph/hive/HiveGiraphRunner.java
index 8788a9dc6..efc08d30d 100644
--- a/giraph-hive/src/main/java/org/apache/giraph/hive/HiveGiraphRunner.java
+++ b/giraph-hive/src/main/java/org/apache/giraph/hive/HiveGiraphRunner.java
@@ -680,8 +680,10 @@ private void logOptions(GiraphConfiguration giraphConf) {
       LOG.info(LOG_PREFIX + "-outputPartition=\"" +
           hiveOutputDescription.getPartitionValues() + "\"");
     }
-    LOG.info(LOG_PREFIX + "-outputFormatClass=" +
-        classes.getVertexOutputFormatClass().getCanonicalName());
+    if (classes.getVertexOutputFormatClass() != null) {
+      LOG.info(LOG_PREFIX + "-outputFormatClass=" +
+          classes.getVertexOutputFormatClass().getCanonicalName());
+    }
 
     LOG.info(LOG_PREFIX + "-workers=" + workers);
   }
