From 90be5430d61bf28bc42459f1ccedd9bd38518182 Mon Sep 17 00:00:00 2001
From: tandraschko <tandraschko@apache.org>
Date: Sat, 13 Sep 2014 19:40:22 +0200
Subject: [PATCH] DELTASPIKE-710 added testcase to playground

---
 .../windowhandling/ViewActionController.java     | 16 +++++++++++++++-
 .../views/windowhandling/clientwindow/test.xhtml |  6 ++++++
 2 files changed, 21 insertions(+), 1 deletion(-)

diff --git a/deltaspike/examples/jsf-playground/src/main/java/org/apache/deltaspike/playground/windowhandling/ViewActionController.java b/deltaspike/examples/jsf-playground/src/main/java/org/apache/deltaspike/playground/windowhandling/ViewActionController.java
index b2e7fe8e8..847102918 100644
--- a/deltaspike/examples/jsf-playground/src/main/java/org/apache/deltaspike/playground/windowhandling/ViewActionController.java
+++ b/deltaspike/examples/jsf-playground/src/main/java/org/apache/deltaspike/playground/windowhandling/ViewActionController.java
@@ -18,6 +18,7 @@
  */
 package org.apache.deltaspike.playground.windowhandling;
 
+import java.util.Date;
 import javax.annotation.PostConstruct;
 import javax.enterprise.context.RequestScoped;
 import javax.faces.context.FacesContext;
@@ -29,9 +30,10 @@
 @RequestScoped
 public class ViewActionController
 {
-
     @Inject
     private ClientWindow clientWindow;
+    
+    private Date lastTimeLinkAction;
 
     @PostConstruct
     public void init()
@@ -44,4 +46,16 @@ public void action()
         FacesContext context = FacesContext.getCurrentInstance();
         System.out.println("ViewActionController#action with windowId: " + clientWindow.getWindowId(context));
     }
+
+    public Date getLastTimeLinkAction()
+    {
+        return lastTimeLinkAction;
+    }
+
+    public void linkAction()
+    {
+        FacesContext context = FacesContext.getCurrentInstance();
+        System.out.println("ViewActionController#linkAction with windowId: " + clientWindow.getWindowId(context));
+        lastTimeLinkAction = new Date();
+    }
 }
diff --git a/deltaspike/examples/jsf-playground/src/main/webapp/views/windowhandling/clientwindow/test.xhtml b/deltaspike/examples/jsf-playground/src/main/webapp/views/windowhandling/clientwindow/test.xhtml
index a5be0259d..52df3055a 100644
--- a/deltaspike/examples/jsf-playground/src/main/webapp/views/windowhandling/clientwindow/test.xhtml
+++ b/deltaspike/examples/jsf-playground/src/main/webapp/views/windowhandling/clientwindow/test.xhtml
@@ -54,6 +54,12 @@
         <h:commandLink value="AJAX Postback with outcome" action="test.xhtml?faces-redirect=true">
             <f:ajax render="@form" execute="@this" />
         </h:commandLink>
+        <br />
+        <br />
+        Last time linkAction: #{viewActionController.lastTimeLinkAction} <br/>
+        <h:commandLink value="AJAX action" action="#{viewActionController.linkAction}">
+            <f:ajax render="@form" execute="@this" />
+        </h:commandLink>
     </h:form>
     
 </h:body>
