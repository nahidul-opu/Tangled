From 72630e935ab6f415a1e07eea712b0234024c27fe Mon Sep 17 00:00:00 2001
From: Oliver Heger <oheger@apache.org>
Date: Wed, 6 Apr 2011 10:07:05 +0000
Subject: [PATCH] [CONFIGURATION-441] Added a test case.

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/configuration/branches/configuration2_experimental@1089380 13f79535-47bb-0310-9956-ffa450edef68
---
 .../TestCompositeConfiguration.java             | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

diff --git a/src/test/java/org/apache/commons/configuration2/TestCompositeConfiguration.java b/src/test/java/org/apache/commons/configuration2/TestCompositeConfiguration.java
index bff685e84f..2acc384fb9 100644
--- a/src/test/java/org/apache/commons/configuration2/TestCompositeConfiguration.java
+++ b/src/test/java/org/apache/commons/configuration2/TestCompositeConfiguration.java
@@ -807,6 +807,23 @@ public void testGetStringArrayWithInterpolation()
         assertEquals("Wrong value in array", "override", values[0]);
     }
 
+    /**
+     * Tests whether interpolation works if multiple configurations are
+     * involved. This test is related to CONFIGURATION-441.
+     */
+    public void testInterpolationInMultipleConfigs()
+    {
+        Configuration c1 = new PropertiesConfiguration();
+        c1.addProperty("property.one", "one");
+        c1.addProperty("property.two", "two");
+        Configuration c2 = new PropertiesConfiguration();
+        c2.addProperty("property.one.ref", "${property.one}");
+        cc.addConfiguration(c1);
+        cc.addConfiguration(c2);
+        assertEquals("Wrong interpolated value", "one",
+                cc.getString("property.one.ref"));
+    }
+
     /**
      * A test configuration event listener that counts the number of received
      * events. Used for testing the event facilities.
