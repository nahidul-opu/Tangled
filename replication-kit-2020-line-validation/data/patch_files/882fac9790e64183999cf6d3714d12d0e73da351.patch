From 882fac9790e64183999cf6d3714d12d0e73da351 Mon Sep 17 00:00:00 2001
From: Lewis John McGibbney <lewis.mcgibbney@gmail.com>
Date: Fri, 16 Sep 2016 12:03:23 -0700
Subject: [PATCH] GORA-494 Lack of synchronization accessing cacheManager in
 InfinispanClient#createSchema()

---
 .../java/org/apache/gora/infinispan/store/InfinispanClient.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/gora-infinispan/src/main/java/org/apache/gora/infinispan/store/InfinispanClient.java b/gora-infinispan/src/main/java/org/apache/gora/infinispan/store/InfinispanClient.java
index ab0a64bdb..335c85b84 100644
--- a/gora-infinispan/src/main/java/org/apache/gora/infinispan/store/InfinispanClient.java
+++ b/gora-infinispan/src/main/java/org/apache/gora/infinispan/store/InfinispanClient.java
@@ -93,7 +93,7 @@ public boolean cacheExists(){
     return cacheExists;
   }
 
-  public void createSchema() {
+  public synchronized void createSchema() {
     try {
       Support.registerSchema(cacheManager, persistentClass.newInstance().getSchema());
     } catch (InstantiationException | IllegalAccessException e) {
