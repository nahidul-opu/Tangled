From 607627168519405b3727ae869e5f491f65a33163 Mon Sep 17 00:00:00 2001
From: Bernd Eckenfels <ecki@apache.org>
Date: Tue, 12 May 2015 20:48:16 +0000
Subject: [PATCH] [VFS-560][http] Avoid HEAD request to server root when
 creating fs.

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/vfs/trunk@1679095 13f79535-47bb-0310-9956-ffa450edef68
---
 .../apache/commons/vfs2/provider/http/HttpClientFactory.java   | 2 --
 src/changes/changes.xml                                        | 3 +++
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/core/src/main/java/org/apache/commons/vfs2/provider/http/HttpClientFactory.java b/core/src/main/java/org/apache/commons/vfs2/provider/http/HttpClientFactory.java
index 0046cd9524..847b299abb 100644
--- a/core/src/main/java/org/apache/commons/vfs2/provider/http/HttpClientFactory.java
+++ b/core/src/main/java/org/apache/commons/vfs2/provider/http/HttpClientFactory.java
@@ -146,8 +146,6 @@ public static HttpClient createConnection(final HttpFileSystemConfigBuilder buil
                 final AuthScope scope = new AuthScope(hostname, AuthScope.ANY_PORT);
                 client.getState().setCredentials(scope, creds);
             }
-
-            client.executeMethod(new HeadMethod());
         }
         catch (final Exception exc)
         {
diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index 1981ea88a6..66689dcb13 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -26,6 +26,9 @@
 <!--       <action issue="VFS-443" dev="ggregory" type="update" due-to="nickallen"> -->
 <!--        [Local] Need an easy way to convert from a FileObject to a File. -->
 <!--       </action> -->
+      <action issue="VFS-560" dev="ecki" type="fix">
+        [http] avoid initial HEAD request to root of HttpFileSystem as it might be wrong context.
+      </action>
       <action issue="VFS-236" dev="ecki" type="fix" due-to="Matt Casters">
         [smb] Allow SMB to be used with no authentication.
       </action>
