From 283d197e50372882ae8d2f985a6c2a493ce58dad Mon Sep 17 00:00:00 2001
From: Sebastian Bazley <sebb@apache.org>
Date: Tue, 9 Nov 2010 02:24:21 +0000
Subject: [PATCH] NET-262 - add Javadoc and some extra tests

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/net/trunk@1032816 13f79535-47bb-0310-9956-ffa450edef68
---
 .../apache/commons/net/util/SubnetUtils.java  |  4 ++++
 .../apache/commons/net/SubnetUtilsTest.java   | 20 +++++++++++++++++++
 2 files changed, 24 insertions(+)

diff --git a/src/main/java/org/apache/commons/net/util/SubnetUtils.java b/src/main/java/org/apache/commons/net/util/SubnetUtils.java
index 2665afdcf..c2781e45b 100644
--- a/src/main/java/org/apache/commons/net/util/SubnetUtils.java
+++ b/src/main/java/org/apache/commons/net/util/SubnetUtils.java
@@ -45,6 +45,8 @@ public class SubnetUtils {
     /**
      * Constructor that takes a CIDR-notation string, e.g. "192.168.0.1/16"
      * @param cidrNotation A CIDR-notation string, e.g. "192.168.0.1/16"
+     * @throws IllegalArgumentException if the parameter is invalid, 
+     * i.e. does not match n.n.n.n/m where n=1-3 decimal digits, m = 1-3 decimal digits in range 1-32
      */
     public SubnetUtils(String cidrNotation) {
         calculate(cidrNotation);
@@ -54,6 +56,8 @@ public SubnetUtils(String cidrNotation) {
      * Constructor that takes a dotted decimal address and a dotted decimal mask.
      * @param address An IP address, e.g. "192.168.0.1"
      * @param mask A dotted decimal netmask e.g. "255.255.0.0"
+     * @throws IllegalArgumentException if the address or mask is invalid, 
+     * i.e. does not match n.n.n.n where n=1-3 decimal digits and the mask is not all zeros
      */
     public SubnetUtils(String address, String mask) {
         calculate(toCidrNotation(address, mask));
diff --git a/src/test/java/org/apache/commons/net/SubnetUtilsTest.java b/src/test/java/org/apache/commons/net/SubnetUtilsTest.java
index 3a9b3d313..3140efcaf 100644
--- a/src/test/java/org/apache/commons/net/SubnetUtilsTest.java
+++ b/src/test/java/org/apache/commons/net/SubnetUtilsTest.java
@@ -223,5 +223,25 @@ public void testCidrAddresses() {
         info = utils.getInfo();
         assertEquals("255.255.255.255",info.getNetmask());
         assertEquals(1, info.getAddressCount());
+        
+        new SubnetUtils("192.168.0.1/1");
+    }
+    
+    public void testInvalidMasks(){
+        try {
+            new SubnetUtils("192.168.0.1/33");
+            fail("Should have thrown IllegalArgumentException");
+        } catch (IllegalArgumentException expected) {
+        }
+        try {
+            new SubnetUtils("192.168.0.1/0");
+            fail("Should have thrown IllegalArgumentException");
+        } catch (IllegalArgumentException expected) {
+        }
+        try {
+            new SubnetUtils("192.168.0.1","0.0.0.0");
+            fail("Should have thrown IllegalArgumentException");
+        } catch (IllegalArgumentException expected) {
+        }
     }
 }
