From fdfcb814712d7d6c40116bdbb6df183f935f0cb3 Mon Sep 17 00:00:00 2001
From: Rory Winston <rwinston@apache.org>
Date: Wed, 27 Feb 2008 09:16:59 +0000
Subject: [PATCH] Add timezone and date symbols to formatter (NET-188)

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/net/branches/NET_2_0@631518 13f79535-47bb-0310-9956-ffa450edef68
---
 .../apache/commons/net/ftp/parser/FTPTimestampParserImpl.java | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/main/java/org/apache/commons/net/ftp/parser/FTPTimestampParserImpl.java b/src/main/java/org/apache/commons/net/ftp/parser/FTPTimestampParserImpl.java
index fc1b2c02f..6dfdbbd89 100644
--- a/src/main/java/org/apache/commons/net/ftp/parser/FTPTimestampParserImpl.java
+++ b/src/main/java/org/apache/commons/net/ftp/parser/FTPTimestampParserImpl.java
@@ -104,8 +104,10 @@ public Calendar parseTimestamp(String timestampStr) throws ParseException {
 				pp = new ParsePosition(0);
 				int year = Calendar.getInstance().get(Calendar.YEAR);
 				String timeStampStrPlusYear = timestampStr + " " + year;
-				SimpleDateFormat hackFormatter = new SimpleDateFormat(recentDateFormat.toPattern() + " yyyy");
+				SimpleDateFormat hackFormatter = new SimpleDateFormat(recentDateFormat.toPattern() + " yyyy", 
+						recentDateFormat.getDateFormatSymbols());
 				hackFormatter.setLenient(false);
+				hackFormatter.setTimeZone(recentDateFormat.getTimeZone());
 				parsed = hackFormatter.parse(timeStampStrPlusYear, pp);
 			}
 			if (parsed != null && pp.getIndex() == timestampStr.length() + 5) {
