From ac79155c97e1b10cd17d221960312cbf2ce8d511 Mon Sep 17 00:00:00 2001
From: "Gary D. Gregory" <ggregory@apache.org>
Date: Fri, 9 Aug 2013 23:44:13 +0000
Subject: [PATCH] [VFS-486] DefaultFileMonitor sleeps for twice the specified
 delay when checkPerRun > 0. Thanks to Sam Haldane.

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/vfs/trunk@1512537 13f79535-47bb-0310-9956-ffa450edef68
---
 .../java/org/apache/commons/vfs2/impl/DefaultFileMonitor.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/core/src/main/java/org/apache/commons/vfs2/impl/DefaultFileMonitor.java b/core/src/main/java/org/apache/commons/vfs2/impl/DefaultFileMonitor.java
index c71242eda2..8777279ca7 100644
--- a/core/src/main/java/org/apache/commons/vfs2/impl/DefaultFileMonitor.java
+++ b/core/src/main/java/org/apache/commons/vfs2/impl/DefaultFileMonitor.java
@@ -388,7 +388,7 @@ public void run()
 
                 if (getChecksPerRun() > 0)
                 {
-                    if (iterFileNames % getChecksPerRun() == 0)
+                    if (((iterFileNames + 1) % getChecksPerRun()) == 0)
                     {
                         try
                         {
