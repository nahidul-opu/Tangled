From 000e726af8464d94e7d02d307dde0e07e176d58c Mon Sep 17 00:00:00 2001
From: Rory Winston <rwinston@apache.org>
Date: Mon, 18 Feb 2008 00:22:53 +0000
Subject: [PATCH] NET-182

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/net/branches/NET_2_0@628584 13f79535-47bb-0310-9956-ffa450edef68
---
 .../DefaultFTPFileEntryParserFactory.java      | 18 +++++-------------
 1 file changed, 5 insertions(+), 13 deletions(-)

diff --git a/src/main/java/org/apache/commons/net/ftp/parser/DefaultFTPFileEntryParserFactory.java b/src/main/java/org/apache/commons/net/ftp/parser/DefaultFTPFileEntryParserFactory.java
index af41f221b..476e69322 100644
--- a/src/main/java/org/apache/commons/net/ftp/parser/DefaultFTPFileEntryParserFactory.java
+++ b/src/main/java/org/apache/commons/net/ftp/parser/DefaultFTPFileEntryParserFactory.java
@@ -78,6 +78,9 @@ public class DefaultFTPFileEntryParserFactory
      */
     public FTPFileEntryParser createFileEntryParser(String key)
     {
+    	if (key == null)
+    		throw new ParserInitializationException("Parser key cannot be null");
+    		
         Class parserClass = null;
         FTPFileEntryParser parser = null;
         try
@@ -127,25 +130,14 @@ else if (ukey.indexOf(FTPClientConfig.SYST_NETWARE) >= 0)
 	                throw new ParserInitializationException("Unknown parser type: " + key);
 	            }
             } 
-            catch (NoClassDefFoundError nf)
-            { 	
-                if (nf.getMessage().startsWith("org/apache/oro")) {
-    	            throw new ParserInitializationException(
-    	                " jakarta-oro-2.x.jar required on the runtime classpath. ", nf);
-                } else {
+            catch (NoClassDefFoundError nf) {
                     throw new ParserInitializationException("Error initializing parser", nf);
-                }
             }
 
         }
         catch (NoClassDefFoundError e)
         { 	
-            if (e.getMessage().startsWith("org/apache/oro")) {
-	            throw new ParserInitializationException(
-	                " jakarta-oro-2.x.jar required on the runtime classpath. ", e);
-            } else {
-                throw new ParserInitializationException("Error initializing parser", e);
-            }
+            throw new ParserInitializationException("Error initializing parser", e);
         }
         catch (ClassCastException e)
         {
