From 86e4b30ba700cb8bcf4d7488e0d60e07a75d6315 Mon Sep 17 00:00:00 2001
From: Niall Pemberton <niallp@apache.org>
Date: Wed, 8 Sep 2010 17:15:52 +0000
Subject: [PATCH] IO-243 SwappedDataInputStream readBoolean is inverted -
 thanks to Ray Myers for the patch

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/io/trunk@995160 13f79535-47bb-0310-9956-ffa450edef68
---
 .../commons/io/input/SwappedDataInputStream.java      |  6 +++---
 .../commons/io/input/SwappedDataInputStreamTest.java  | 11 ++++++++++-
 2 files changed, 13 insertions(+), 4 deletions(-)

diff --git a/src/java/org/apache/commons/io/input/SwappedDataInputStream.java b/src/java/org/apache/commons/io/input/SwappedDataInputStream.java
index 54e01a78861..f9ed6c5769c 100644
--- a/src/java/org/apache/commons/io/input/SwappedDataInputStream.java
+++ b/src/java/org/apache/commons/io/input/SwappedDataInputStream.java
@@ -48,15 +48,15 @@ public SwappedDataInputStream( InputStream input )
     }
 
     /**
-     * Return <code>{@link #readByte()} == 0</code>
-     * @return the true if the byte read is zero, otherwise false
+     * Return <code>{@link #readByte()} != 0</code>
+     * @return false if the byte read is zero, otherwise true
      * @throws IOException if an I/O error occurs
      * @throws EOFException if an end of file is reached unexpectedly
      */
     public boolean readBoolean()
         throws IOException, EOFException
     {
-        return ( 0 == readByte() );
+        return ( 0 != readByte() );
     }
 
     /**
diff --git a/src/test/org/apache/commons/io/input/SwappedDataInputStreamTest.java b/src/test/org/apache/commons/io/input/SwappedDataInputStreamTest.java
index 922390fc679..e758196c968 100644
--- a/src/test/org/apache/commons/io/input/SwappedDataInputStreamTest.java
+++ b/src/test/org/apache/commons/io/input/SwappedDataInputStreamTest.java
@@ -61,7 +61,16 @@ public void tearDown() {
     }
 
     public void testReadBoolean() throws IOException {
-        assertEquals( false, this.sdis.readBoolean() );
+        bytes = new byte[] {
+            0x00,
+            0x01,
+            0x02,
+        };
+        ByteArrayInputStream bais = new ByteArrayInputStream( bytes );
+        SwappedDataInputStream sdis = new SwappedDataInputStream( bais );
+        assertEquals( false, sdis.readBoolean() );
+        assertEquals( true, sdis.readBoolean() );
+        assertEquals( true, sdis.readBoolean() );
     }
 
     public void testReadByte() throws IOException {
