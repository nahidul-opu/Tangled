From 6f5c09abb86e7d5c1293c5ffd297293003648be4 Mon Sep 17 00:00:00 2001
From: Simone Tripodi <simonetripodi@apache.org>
Date: Sun, 26 Jun 2011 17:23:41 +0000
Subject: [PATCH] [DIGESTER-28] Default ClassLoader policy unusable in EAR
 archive

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/digester/trunk@1139841 13f79535-47bb-0310-9956-ffa450edef68
---
 src/main/java/org/apache/commons/digester3/Digester.java      | 4 ++--
 .../org/apache/commons/digester3/binder/DigesterLoader.java   | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/main/java/org/apache/commons/digester3/Digester.java b/src/main/java/org/apache/commons/digester3/Digester.java
index 4a7ff4aa3..c9852eb01 100644
--- a/src/main/java/org/apache/commons/digester3/Digester.java
+++ b/src/main/java/org/apache/commons/digester3/Digester.java
@@ -256,9 +256,9 @@ public Digester( XMLReader reader )
 
     /**
      * Do we want to use the Context ClassLoader when loading classes for instantiating new objects. Default is
-     * <code>false</code>.
+     * <code>true</code>.
      */
-    private boolean useContextClassLoader = false;
+    private boolean useContextClassLoader = true;
 
     /**
      * Do we want to use a validating parser.
diff --git a/src/main/java/org/apache/commons/digester3/binder/DigesterLoader.java b/src/main/java/org/apache/commons/digester3/binder/DigesterLoader.java
index 5802ca799..29a90b0ab 100644
--- a/src/main/java/org/apache/commons/digester3/binder/DigesterLoader.java
+++ b/src/main/java/org/apache/commons/digester3/binder/DigesterLoader.java
@@ -104,7 +104,7 @@ public static DigesterLoader newLoader( Iterable<RulesModule> rulesModules )
 
     private final Iterable<RulesModule> rulesModules;
 
-    private boolean useContextClassLoader;
+    private boolean useContextClassLoader = true;
 
     /**
      * The class loader to use for instantiating application objects.
