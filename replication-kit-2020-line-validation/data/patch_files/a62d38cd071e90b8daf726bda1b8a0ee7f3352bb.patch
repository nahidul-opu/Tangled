From a62d38cd071e90b8daf726bda1b8a0ee7f3352bb Mon Sep 17 00:00:00 2001
From: Sebastian Bazley <sebb@apache.org>
Date: Fri, 13 Apr 2012 11:13:51 +0000
Subject: [PATCH] NET-458 MVSFTPEntryParser.parseSimpleEntry -
 ArrayIndexOutOfBoundsException

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/net/trunk@1325718 13f79535-47bb-0310-9956-ffa450edef68
---
 src/changes/changes.xml                                        | 3 +++
 .../org/apache/commons/net/ftp/parser/MVSFTPEntryParser.java   | 2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index 307d24741..17b36b302 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -65,6 +65,9 @@ The <action> type attribute can be add,update,fix,remove.
         <release version="3.2" date="TBA" description="
 TBA
         ">
+            <action issue="NET-458" dev="sebb" type="fix" due-to="Denis Molony">
+            MVSFTPEntryParser.parseSimpleEntry - ArrayIndexOutOfBoundsException.
+            </action>
             <action issue="NET-450" dev="sebb" type="fix" due-to="Roger Hardiman">
             Bug in documentation for FTPClient.
             </action>
diff --git a/src/main/java/org/apache/commons/net/ftp/parser/MVSFTPEntryParser.java b/src/main/java/org/apache/commons/net/ftp/parser/MVSFTPEntryParser.java
index 5e9367d48..4547e64e3 100644
--- a/src/main/java/org/apache/commons/net/ftp/parser/MVSFTPEntryParser.java
+++ b/src/main/java/org/apache/commons/net/ftp/parser/MVSFTPEntryParser.java
@@ -355,7 +355,7 @@ private boolean parseMemberList(FTPFile file, String entry) {
      * @return
      */
     private boolean parseSimpleEntry(FTPFile file, String entry) {
-        if (entry != null && entry.length() > 0) {
+        if (entry != null && entry.trim().length() > 0) {
             file.setRawListing(entry);
             String name = entry.split(" ")[0];
             file.setName(name);
