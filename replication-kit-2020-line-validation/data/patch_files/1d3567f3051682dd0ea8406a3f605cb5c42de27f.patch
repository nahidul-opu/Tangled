From 1d3567f3051682dd0ea8406a3f605cb5c42de27f Mon Sep 17 00:00:00 2001
From: Gintas Grigelionis <gintas@apache.org>
Date: Fri, 2 Feb 2018 19:08:53 +0100
Subject: [PATCH] IVY-1282 Add missing trim()

---
 .../ivy/plugins/parser/AbstractModuleDescriptorParser.java  | 2 +-
 .../ivy/plugins/parser/xml/XmlModuleDescriptorUpdater.java  | 2 +-
 src/java/org/apache/ivy/util/StringUtils.java               | 6 +-----
 3 files changed, 3 insertions(+), 7 deletions(-)

diff --git a/src/java/org/apache/ivy/plugins/parser/AbstractModuleDescriptorParser.java b/src/java/org/apache/ivy/plugins/parser/AbstractModuleDescriptorParser.java
index 903e4327b..000592709 100644
--- a/src/java/org/apache/ivy/plugins/parser/AbstractModuleDescriptorParser.java
+++ b/src/java/org/apache/ivy/plugins/parser/AbstractModuleDescriptorParser.java
@@ -125,7 +125,7 @@ protected void parseDepsConfs(String confs, DefaultDependencyDescriptor dd,
                 return;
             }
 
-            String[] conf = confs.split(";");
+            String[] conf = confs.trim().split("\\s*;\\s*");
             parseDepsConfs(conf, dd, useDefaultMappingToGuessRightOperand, evaluateConditions);
         }
 
diff --git a/src/java/org/apache/ivy/plugins/parser/xml/XmlModuleDescriptorUpdater.java b/src/java/org/apache/ivy/plugins/parser/xml/XmlModuleDescriptorUpdater.java
index a5ab5931b..bd8b180c2 100644
--- a/src/java/org/apache/ivy/plugins/parser/xml/XmlModuleDescriptorUpdater.java
+++ b/src/java/org/apache/ivy/plugins/parser/xml/XmlModuleDescriptorUpdater.java
@@ -850,7 +850,7 @@ private String substitute(ParserSettings ivy, String value) {
         private String removeConfigurationsFromMapping(String mapping) {
             StringBuilder newMapping = new StringBuilder();
             String mappingSep = "";
-            for (String groups : mapping.split(";")) {
+            for (String groups : mapping.trim().split("\\s*;\\s*")) {
                 String[] ops = groups.split("->");
                 List<String> confsToWrite = new ArrayList<>();
                 for (String lh : splitToArray(ops[0])) {
diff --git a/src/java/org/apache/ivy/util/StringUtils.java b/src/java/org/apache/ivy/util/StringUtils.java
index 099437c01..64ce722ef 100644
--- a/src/java/org/apache/ivy/util/StringUtils.java
+++ b/src/java/org/apache/ivy/util/StringUtils.java
@@ -129,11 +129,7 @@ public static String[] splitToArray(String list) {
         if (list == null) {
             return null;
         }
-        String[] parts = list.split(",");
-        for (int i = 0; i < parts.length; i++) {
-            parts[i] = parts[i].trim();
-        }
-        return parts;
+        return list.trim().split("\\s*,\\s*");
     }
 
     /**
