From 3ca6e3770eb1192d3471bbf5ca49db9f61557d72 Mon Sep 17 00:00:00 2001
From: Niall Pemberton <niallp@apache.org>
Date: Tue, 28 Sep 2010 12:31:40 +0000
Subject: [PATCH] IO-216 Delete files quietly when an exception is thrown
 during initialization

git-svn-id: https://svn.apache.org/repos/asf/commons/proper/io/trunk@1002142 13f79535-47bb-0310-9956-ffa450edef68
---
 .../org/apache/commons/io/output/LockableFileWriter.java  | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/src/java/org/apache/commons/io/output/LockableFileWriter.java b/src/java/org/apache/commons/io/output/LockableFileWriter.java
index 634eee04a3c..6101800c238 100644
--- a/src/java/org/apache/commons/io/output/LockableFileWriter.java
+++ b/src/java/org/apache/commons/io/output/LockableFileWriter.java
@@ -241,17 +241,17 @@ private Writer initWriter(File file, String encoding, boolean append) throws IOE
         } catch (IOException ex) {
             IOUtils.closeQuietly(writer);
             IOUtils.closeQuietly(stream);
-            lockFile.delete();
+            FileUtils.deleteQuietly(lockFile);
             if (fileExistedAlready == false) {
-                file.delete();
+                FileUtils.deleteQuietly(file);
             }
             throw ex;
         } catch (RuntimeException ex) {
             IOUtils.closeQuietly(writer);
             IOUtils.closeQuietly(stream);
-            lockFile.delete();
+            FileUtils.deleteQuietly(lockFile);
             if (fileExistedAlready == false) {
-                file.delete();
+                FileUtils.deleteQuietly(file);
             }
             throw ex;
         }
